<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8">  <meta name="built-on" content="2022-09-25T22:17:42.3949069"><meta name="build-number" content="${buildNumber}">    <meta name="keywords" content="">  <title>2. Editor Coordinates System. Positions and Offsets | IntelliJ Platform Plugin SDK</title><script id="virtual-toc-data" type="application/json">[{"id":"introduction","level":0,"title":"Introduction","anchor":"#introduction"},{"id":"caret-positions-from-the-caretmodel-and-caret-objects","level":0,"title":"Caret Positions from the CaretModel and Caret Objects","anchor":"#caret-positions-from-the-caretmodel-and-caret-objects"},{"id":"editor-coordinate-systems","level":0,"title":"Editor Coordinate Systems","anchor":"#editor-coordinate-systems"},{"id":"displaying-caret-positions","level":0,"title":"Displaying Caret Positions","anchor":"#displaying-caret-positions"}]</script>   <link href="https://resources.jetbrains.com/storage/help-app/v5/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="2. Editor Coordinates System. Positions and Offsets | IntelliJ Platform Plugin SDK"/><meta property="og:description" content=""/><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"/><meta property="og:site_name" content="IntelliJ Platform Plugin SDK Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="https://plugins.jetbrains.com/docs/intellij/coordinates-system.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@JBPlatform"><meta name="twitter:title" content="2. Editor Coordinates System. Positions and Offsets | IntelliJ Platform Plugin SDK"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@JBPlatform"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "https://plugins.jetbrains.com/docs/intellij/coordinates-system.html#webpage", "url": "https://plugins.jetbrains.com/docs/intellij/coordinates-system.html", "name": "2. Editor Coordinates System. Positions and Offsets | IntelliJ Platform Plugin SDK", "description": "", "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "https://plugins.jetbrains.com/docs/intellij/#website", "url": "https://plugins.jetbrains.com/docs/intellij/", "name": "IntelliJ Platform Plugin SDK Help" }</script><!-- End Schema.org --></head>    <body data-id="coordinates_system.md" data-main-title="2. Editor Coordinates System. Positions and Offsets" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Part II — Base Platform///editors.md|Editors///editor_basics.md|Editor Basics"  data-edit-url="https://github.com/JetBrains/intellij-sdk-docs/edit/main/topics/tutorials/editor_basics/coordinates_system.md"  >  <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>IntelliJ Platform Plugin SDK  Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select class="select _shortcuts" height="1" id="switch-shortcuts">      </select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="coordinates_system.md" id="coordinates_system.md"  >2. Editor Coordinates System. Positions and Offsets</h1><p id="266c0f37_1" >The previous tutorial <a href="working-with-text.html" id="266c0f37_2" data-tooltip="This tutorial shows how to use actions to access a caret placed in a document open in an editor. Using information about the caret, replace selected text in a document with a string."  >Working with Text</a> demonstrated how to use actions to access a caret placed in a document open in an editor. The examples replaced selected text in a document by using information about the caret.</p><p id="266c0f37_3" >Every caret has a set of properties describing its position in one of several coordinate systems. This tutorial describes how to access information about the caret(s) in an editor.</p><section class="chapter"  ><h2 id="introduction" data-toc="introduction"  >Introduction</h2><p id="266c0f37_4" >In this tutorial, the <a href="https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/editor_basics" id="266c0f37_5"   data-external="true" rel="noopener noreferrer" >editor_basics</a> code sample is used to explore caret positions. In particular, the <span class="control" id="266c0f37_6" >Caret Position</span> action added by <code class="code " id="266c0f37_7"  >editor_basics</code> to the editor context menu is used to retrieve information about the current caret position. A keyboard shortcut can also initiate the action.</p><figure  id="266c0f37_8"><img alt="Editor Basics Menu" title="Editor Basics Menu" src="images/basics.png"  class="" width="600" height="172"/></figure><p id="266c0f37_9" >The source code for the Java class behind the menu action is <a href="https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/editor_basics/src/main/java/org/intellij/sdk/editor/EditorAreaIllustration.java" id="266c0f37_10"   data-external="true" rel="noopener noreferrer" >EditorAreaIllustration</a>. The focus of discussion will be the <code class="code " id="266c0f37_11"  >EditorAreaIllustration.actionPerformed()</code> method. For more information about creating action classes, see the <a href="action-system.html" id="266c0f37_12" data-tooltip="This tutorial leads you through a series of steps which show how to create, register, and customize custom actions and action groups. By registering actions, you can add your own menu items, toolbar buttons and keyboard shortcuts to the IDE user interface."  >Actions Tutorial</a>, which covers the topic in depth.</p></section><section class="chapter"  ><h2 id="caret-positions-from-the-caretmodel-and-caret-objects" data-toc="caret-positions-from-the-caretmodel-and-caret-objects"  >Caret Positions from the CaretModel and Caret Objects</h2><p id="266c0f37_13" >The properties of a caret can be accessed by obtaining an instance of the <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/editor-ui-api/src/com/intellij/openapi/editor/CaretModel.java" id="266c0f37_14"   data-external="true" rel="noopener noreferrer" ><code class="code " id="266c0f37_15"  >CaretModel</code></a> object. As in the <a href="working-with-text.html" id="266c0f37_16" data-tooltip="This tutorial shows how to use actions to access a caret placed in a document open in an editor. Using information about the caret, replace selected text in a document with a string."  >Working with Text</a> tutorial, the <code class="code " id="266c0f37_17"  >AnActionEvent</code> is used to get the <code class="code " id="266c0f37_18"  >Editor</code> object. The <code class="code " id="266c0f37_19"  >Editor</code> object provides access to the <code class="code " id="266c0f37_20"  >CaretModel</code> object, as shown below:</p><div class="code-block" data-lang="java"         >
public class EditorAreaIllustration extends AnAction {
  @Override
  public void actionPerformed(@NotNull AnActionEvent event) {
    // Get access to the editor and caret model. update() validated editor's existence.
    Editor editor = event.getRequiredData(CommonDataKeys.EDITOR);
    CaretModel caretModel = editor.getCaretModel();
  }
}
</div></section><section class="chapter"  ><h2 id="editor-coordinate-systems" data-toc="editor-coordinate-systems"  >Editor Coordinate Systems</h2><p id="266c0f37_22" >When a <code class="code " id="266c0f37_23"  >Document</code> is opened, the <code class="code " id="266c0f37_24"  >Editor</code> assigns an internal, zero-based coordinate system to lines and columns in the <code class="code " id="266c0f37_25"  >Document</code>. The first line in a <code class="code " id="266c0f37_26"  >Document</code> and the first character in each line are assigned the zero position. Every character in a <code class="code " id="266c0f37_27"  >Document</code> is assigned an <a href="#caret-offset" id="266c0f37_28" data-tooltip="The Offset of a caret is a character count from the beginning of a Document to the caret position. Caret offsets are always calculated in terms of Logical Position. The caret Offset includes:"  >Offset</a>, which is a zero-based count of the characters from the beginning of the file to that character. These <a href="#caret-logical-position" id="266c0f37_29" data-tooltip="The caret Logical Position is a zero-based, (line and column) position of the caret in the Editor. Logical Position information is obtained from the LogicalPosition object for that caret."  >LogicalPosition</a> coordinates are used to describe the line and column number for a caret position. Note that the Logical Position coordinate system is different from the editor UI, which is one-based rather than zero-based.</p><p id="266c0f37_30" >Logical Position coordinates and other coordinate systems discussed in this tutorial can be used to characterize any location in an <code class="code " id="266c0f37_31"  >Editor</code>, not just carets. Hints used for code insights are characterized in terms of these coordinates, for example <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/platform-impl/src/com/intellij/codeInsight/hint/HintManagerImpl.java" id="266c0f37_32"   data-external="true" rel="noopener noreferrer" ><code class="code " id="266c0f37_33"  >HintManager.getHintPosition()</code></a>. Custom visual elements displayed in an <code class="code " id="266c0f37_34"  >Editor</code>, called <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/editor-ui-api/src/com/intellij/openapi/editor/Inlay.java" id="266c0f37_35"   data-external="true" rel="noopener noreferrer" ><code class="code " id="266c0f37_36"  >Inlay</code></a> objects, are also expressed in terms of these coordinate systems.</p><p id="266c0f37_37" >The diagram below shows the Logical Position coordinate system applied to some example content. The character &quot;s&quot; in the red box represents placing the cursor on that character. It has the caret position of line 1, column 9, and Offset 28. More about caret <a href="#caret-offset" id="266c0f37_38" data-tooltip="The Offset of a caret is a character count from the beginning of a Document to the caret position. Caret offsets are always calculated in terms of Logical Position. The caret Offset includes:"  >Offsets</a> is discussed below.</p><figure  id="266c0f37_39"><img alt="Editor Coordinates" title="Editor Coordinates" src="images/editor_coords.png"  class="" width="800" height="162"/></figure><p id="266c0f37_40" >The <a href="multiple-carets.html" id="266c0f37_41" data-tooltip="Support for multiple independent carets has been added to editor implementation in IDEA 13.1. Most editor actions (keyboard navigation, text insertion and deletion, etc.) will be applied to each caret independently. Each caret has its own associated selection, which is a continuous…"  >Multiple Carets</a> documentation covers the subject of more than one caret in an Editor. For this tutorial, be aware there may be more than one caret in an <code class="code " id="266c0f37_42"  >Editor</code> at any given time. Consequently, examples use the <span class="emphasis" id="266c0f37_43" >Primary Caret</span> in an <code class="code " id="266c0f37_44"  >Editor</code>. If there is only one caret in an <code class="code " id="266c0f37_45"  >Editor</code>, it is the Primary Caret. For the case of multiple carets in an <code class="code " id="266c0f37_46"  >Editor</code>, the Primary Caret is the one on which query and update methods in the model operate at the moment.</p><section class="chapter"  ><h3 id="caret-logical-position" data-toc="caret-logical-position"  >Caret Logical Position</h3><p id="266c0f37_47" >The caret <span class="emphasis" id="266c0f37_48" >Logical Position</span> is a zero-based, (line and column) position of the caret in the Editor. Logical Position information is obtained from the <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/editor-ui-api/src/com/intellij/openapi/editor/LogicalPosition.java" id="266c0f37_49"   data-external="true" rel="noopener noreferrer" ><code class="code " id="266c0f37_50"  >LogicalPosition</code></a> object for that caret.</p><p id="266c0f37_51" >The Logical Position line number of a caret ignores the effects of settings that change the presentation of a <code class="code " id="266c0f37_52"  >Document</code> within the Editor. Examples of these settings are <a href="https://www.jetbrains.com/help/idea/working-with-source-code.html#code_folding" id="266c0f37_53"   data-external="true" rel="noopener noreferrer" >Code (Line) Folding</a> and <a href="https://www.jetbrains.com/help/idea/using-code-editor.html#f804afd8" id="266c0f37_54"   data-external="true" rel="noopener noreferrer" >Soft Line Wrap</a>. These effects mean regardless of whether one or more lines in an Editor are folded or soft-wrapped, the caret Logical Position line number will not change.</p><p id="266c0f37_55" >In the example Java file below, Logical Position line numbers 1-3 are folded into line 0. The caret - a blue block - is placed on the letter &quot;p&quot; in &quot;public.&quot; Using the <code class="code " id="266c0f37_56"  >editor_basics</code> <span class="control" id="266c0f37_57" >Caret Position</span> action to inspect the caret, it is reported to be at Logical Position (5,0) - which is line 5, character 0 - the first character in the line. This means that caret Logical Position is not changed by Code Folding:</p><figure  id="266c0f37_58"><img alt="Caret Logical Position with Folding" title="Caret Logical Position with Folding" src="images/logical_pos_folded.png"  class="" width="800" height="235"/></figure><p id="266c0f37_59" >However, note that applying Code Folding <span class="emphasis" id="266c0f37_60" >does change the reported Visual Position</span> of the caret even if the Logical Position stays constant. More about <a href="#caret-visual-position" id="266c0f37_61" data-tooltip="A caret's Visual Position differs from Logical Position in that it takes into account editor presentation settings such as Code Folding and Soft Line Wrap. In doing so, VisualPosition counts - zero-based - the lines of a Document that can be displayed in an Editor. Consequently,…"  >Visual Position</a> is discussed below. However, it's clear combinations of Code Folding and Soft Wrap means that one Logical Position of a caret could map to multiple Visual Positions. The <code class="code " id="266c0f37_62"  >Editor</code> interface provides methods to work with a caret Logical and Visual Position, such as the method <code class="code " id="266c0f37_63"  >Editor.logicalToVisualPosition()</code>.</p></section><section class="chapter"  ><h3 id="caret-visual-position" data-toc="caret-visual-position"  >Caret Visual Position</h3><p id="266c0f37_64" >A caret's <span class="emphasis" id="266c0f37_65" >Visual Position</span> differs from Logical Position in that it takes into account editor presentation settings such as Code Folding and Soft Line Wrap. In doing so, <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/editor-ui-api/src/com/intellij/openapi/editor/VisualPosition.java" id="266c0f37_66"   data-external="true" rel="noopener noreferrer" ><code class="code " id="266c0f37_67"  >VisualPosition</code></a> counts - zero-based - the lines of a <code class="code " id="266c0f37_68"  >Document</code> that can be <span class="emphasis" id="266c0f37_69" >displayed</span> in an Editor. Consequently, Visual Positions can't be uniquely mapped to Logical Positions or corresponding lines in the underlying <code class="code " id="266c0f37_70"  >Document</code>.</p><p id="266c0f37_71" >For example, Soft Line Wrap affects the Visual Position of succeeding lines. In the image below, Soft Line Wrap is applied to Logical line three. With the caret placed at the same character location as in previous tests, it is evident the Logical Position has not changed. However, the Visual Position line number has increased by one! The comments on each line illustrate how the Soft Wrap portion of Logical line three is evaluated as Visual Position line four, as though it was a separate line.</p><figure  id="266c0f37_72"><img alt="Caret Visual Position with Soft-Wrap" title="Caret Visual Position with Soft-Wrap" src="images/vis_pos_soft_wrap.png"  class="" width="800" height="235"/></figure><p id="266c0f37_73" >The Logical and Visual Position objects for a caret are obtained from the <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/editor-ui-api/src/com/intellij/openapi/editor/Caret.java" id="266c0f37_74"   data-external="true" rel="noopener noreferrer" ><code class="code " id="266c0f37_75"  >Caret</code></a> object, as shown in the code snippet below.</p><div class="code-block" data-lang="java"         >
public class EditorAreaIllustration extends AnAction {
  @Override
  public void actionPerformed(@NotNull AnActionEvent event) {
    // Get access to the editor and caret model.
    Editor editor = event.getRequiredData(CommonDataKeys.EDITOR);
    CaretModel caretModel = editor.getCaretModel();
    Caret primaryCaret = caretModel.getPrimaryCaret();
    LogicalPosition logicalPos = primaryCaret.getLogicalPosition();
    VisualPosition visualPos = primaryCaret.getVisualPosition();
  }
}
</div></section><section class="chapter"  ><h3 id="caret-column-position" data-toc="caret-column-position"  >Caret Column Position</h3><p id="266c0f37_77" >The <span class="emphasis" id="266c0f37_78" >Column Position</span> is a count of characters from the beginning of a Logical (Position) line to the current caret position in that line. Characters are counted using a zero-based numbering system, so the first character of a line is numbered zero. Note that Column Position is different from the editor UI, which uses a one-based numbering scheme.</p><p id="266c0f37_79" >Column Position includes:</p><ul class="list _ul" id="266c0f37_80"    ><li class="list__item" id="266c0f37_81" ><p>Whitespace, such as tabs. Tabs can occupy multiple columns, up to the tab size set for the editor.</p></li><li class="list__item" id="266c0f37_82" ><p>The character selected by the caret.</p></li></ul><section class="chapter"  ><h4 id="caret-lean" data-toc="caret-lean"  >Caret Lean</h4><p id="266c0f37_83" >The Column Position of a caret is the boundary between two characters. A caret can be associated with either a preceding or succeeding character. The association is important in bidirectional text, where mapping from Logical Column Position to Visual Column Position is not continuous.</p><p id="266c0f37_84" >As defined in the <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/editor-ui-api/src/com/intellij/openapi/editor/LogicalPosition.java" id="266c0f37_85"   data-external="true" rel="noopener noreferrer" ><code class="code " id="266c0f37_86"  >LogicalPosition</code></a> class, if a caret position is associated with a succeeding character it <span class="emphasis" id="266c0f37_87" >Leans Forward</span>. Otherwise, it is associated with the preceding character.</p><p id="266c0f37_88" >As defined in the <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/editor-ui-api/src/com/intellij/openapi/editor/VisualPosition.java" id="266c0f37_89"   data-external="true" rel="noopener noreferrer" ><code class="code " id="266c0f37_90"  >VisualPosition</code></a> class, if a caret position is associated with a succeeding character it <span class="emphasis" id="266c0f37_91" >Leans Right</span>. Otherwise, it is associated with the preceding character.</p></section><section class="chapter"  ><h4 id="examples-of-caret-lean" data-toc="examples-of-caret-lean"  >Examples of Caret Lean</h4><p id="266c0f37_92" >In the example below, placing a (blue) block caret on the first visible character in Logical line three produces a column position of 0 for both Visual and Logical Positions. Note that the text is unidirectional in this example. In the Logical Position the caret leans forward, meaning it is associated with the succeeding character in the Logical line. For the Visual Position the caret leans right, indicating its association with the succeeding character in the Visual line.</p><figure  id="266c0f37_93"><img alt="Caret Column Position - Block Caret" title="Caret Column Position - Block Caret" src="images/caret_col_pos_block.png"  class="" width="800" height="208"/></figure><p id="266c0f37_95" >Consider the Java snippet below, and use the <code class="code " id="266c0f37_96"  >editor_basics</code> <span class="control" id="266c0f37_97" >Caret Position</span> action to report caret information at each step. Be sure to use the keyboard shortcut to invoke the action so that the caret position is not disturbed.</p><p id="266c0f37_98" >The line containing the <code class="code " id="266c0f37_99"  >String</code> variable declaration contains bidirectional text. Starting on the left end of the line, and using the arrow key to advance a line-shaped cursor to between the <code class="code " id="266c0f37_100"  >(&quot;</code> characters reveals discontinuities in caret coordinate column positions.</p><ul class="list _ul" id="266c0f37_101"    ><li class="list__item" id="266c0f37_102" ><p>After the caret first moves from between <code class="code " id="266c0f37_103"  >g(</code> to between <code class="code " id="266c0f37_104"  >(&quot;</code>, the Logical and Visual Positions have equal column positions of 26, and neither leans. Note the value of the caret positions you measure may have different starting values because of line indentation, but the sign and magnitude of the changes in position will be the same.</p></li><li class="list__item" id="266c0f37_105" ><p>Advancing the caret once more does not appear to visually move the cursor. However, the Logical Position column increases to 59, and although the Visual Position column does not change, it leans right.</p></li><li class="list__item" id="266c0f37_106" ><p>Continuing to advance the cursor (to the right) through the string causes the Logical Position column to <span class="emphasis" id="266c0f37_107" >decrease</span>, and the Visual Position column to <span class="emphasis" id="266c0f37_108" >increase</span>.</p></li><li class="list__item" id="266c0f37_109" ><p>Once the cursor advances to between the <code class="code " id="266c0f37_110"  >&quot;.</code> characters, the Logical Position column position is again 26, and leans forward. The Visual Position column position is now 59.</p></li><li class="list__item" id="266c0f37_111" ><p>Moving the caret right once more does not appear to visually advance the cursor. However, the Logical Position and Visual Position column values are both 59, and both lean.</p></li><li class="list__item" id="266c0f37_112" ><p>As the cursor advances to the right, both Logical and Visual column values increase.</p></li></ul><div class="code-block" data-lang="java"         >
  public void showNow() {
//234567890123456789012345678901234567890123456789012345678901234567890
  String str = new String(&quot;تعطي يونيكود رقما فريدا لكل حرف&quot;.getBytes(), java.nio.charset.StandardCharsets.UTF_8);
  System.out.println(str);
}
</div><p id="266c0f37_114" >The apparent discontinuity in Logical Position is because the RTL portion of the string is treated (or counted) in the logical character order in which it would be written. The apparent continuity in Visual Position is because the RTL portion of the string is counted in the visual order in which it is displayed in the code.</p></section></section><section class="chapter"  ><h3 id="caret-offset" data-toc="caret-offset"  >Caret Offset</h3><p id="266c0f37_115" >The <span class="emphasis" id="266c0f37_116" >Offset</span> of a caret is a character count from the beginning of a <code class="code " id="266c0f37_117"  >Document</code> to the caret position. Caret offsets are always calculated in terms of Logical Position. The caret Offset includes:</p><ul class="list _ul" id="266c0f37_118"    ><li class="list__item" id="266c0f37_119" ><p>The first (0th) character in a document.</p></li><li class="list__item" id="266c0f37_120" ><p>Whitespace characters, including newline and tabs.</p></li><li class="list__item" id="266c0f37_121" ><p>Any characters after end-of-line if the IDE settings permit them. (</p><p>)</p></li><li class="list__item" id="266c0f37_123" ><p>The character selected by the caret.</p></li></ul><p id="266c0f37_124" >The example below demonstrates the Offset of a caret placed at the first character of Logical line one. Note the Offset is 22, which is one greater than the number of visible characters on line zero, and the first character on line one. This apparent discrepancy is actually correct because the Offset includes the newline character for line zero.</p><figure  id="266c0f37_125"><img alt="Line 2 Caret Offset" title="Line 2 Caret Offset" src="images/caret_offset_l2.png"  class="" width="800" height="203"/></figure></section></section><section class="chapter"  ><h2 id="displaying-caret-positions" data-toc="displaying-caret-positions"  >Displaying Caret Positions</h2><p id="266c0f37_126" >To display the values of caret Logical and Visual positions, and Offset, a <code class="code " id="266c0f37_127"  >Messages.showInfoMessage()</code> method shows them in the form of notification as the action is performed.</p><div class="code-block" data-lang="java"         >
public class EditorAreaIllustration extends AnAction {

  public void actionPerformed(@NotNull AnActionEvent event) {
    // Get access to the editor and caret model.
    Editor editor = event.getRequiredData(CommonDataKeys.EDITOR);
    CaretModel caretModel = editor.getCaretModel();

    // Getting the primary caret ensures we get the correct one of a possible many.
    Caret primaryCaret = caretModel.getPrimaryCaret();
    // Get the caret information
    LogicalPosition logicalPos = primaryCaret.getLogicalPosition();
    VisualPosition visualPos = primaryCaret.getVisualPosition();
    int caretOffset = primaryCaret.getOffset();

    // Build and display the caret report.
    String report = logicalPos.toString() + &quot;\n&quot; +
        visualPos.toString() + &quot;\n&quot; +
        &quot;Offset: &quot; + caretOffset;
    Messages.showInfoMessage(report, &quot;Caret Parameters Inside The Editor&quot;);
  }

}
</div></section><div class="last-modified"> Last modified: 25 九月 2022</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="working-with-text.html">1. Working with Text</a>   <a class="navigation-links__next" href="editor-events.html">3. Handling Editor Events</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/storage/help-app/v5/app.js"></script></body></html>