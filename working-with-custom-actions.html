<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8">  <meta name="built-on" content="2022-09-28T11:33:51.0227418"><meta name="build-number" content="${buildNumber}">    <meta name="keywords" content="">  <title>Creating Actions | IntelliJ Platform Plugin SDK</title><script id="virtual-toc-data" type="application/json">[{"id":"introduction","level":0,"title":"Introduction","anchor":"#introduction"},{"id":"creating-a-custom-action","level":0,"title":"Creating a Custom Action","anchor":"#creating-a-custom-action"},{"id":"registering-a-custom-action","level":0,"title":"Registering a Custom Action","anchor":"#registering-a-custom-action"},{"id":"testing-the-minimal-custom-action-implementation","level":0,"title":"Testing the Minimal Custom Action Implementation","anchor":"#testing-the-minimal-custom-action-implementation"},{"id":"developing-the-anaction-methods","level":0,"title":"Developing the AnAction Methods","anchor":"#developing-the-anaction-methods"},{"id":"testing-the-custom-action","level":0,"title":"Testing the Custom Action","anchor":"#testing-the-custom-action"}]</script>   <link href="https://resources.jetbrains.com/storage/help-app/v5/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Creating Actions | IntelliJ Platform Plugin SDK"/><meta property="og:description" content=""/><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"/><meta property="og:site_name" content="IntelliJ Platform Plugin SDK Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="https://plugins.jetbrains.com/docs/intellij/working-with-custom-actions.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@JBPlatform"><meta name="twitter:title" content="Creating Actions | IntelliJ Platform Plugin SDK"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@JBPlatform"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "https://plugins.jetbrains.com/docs/intellij/working-with-custom-actions.html#webpage", "url": "https://plugins.jetbrains.com/docs/intellij/working-with-custom-actions.html", "name": "Creating Actions | IntelliJ Platform Plugin SDK", "description": "", "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "https://plugins.jetbrains.com/docs/intellij/#website", "url": "https://plugins.jetbrains.com/docs/intellij/", "name": "IntelliJ Platform Plugin SDK Help" }</script><!-- End Schema.org --></head>    <body data-id="working_with_custom_actions.md" data-main-title="Creating Actions" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Part II — Base Platform///basic_action_system.md|操作///action_system.md|Actions Tutorial"  data-edit-url="https://github.com/JetBrains/intellij-sdk-docs/edit/main/topics/tutorials/action_system/working_with_custom_actions.md"  >  <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>IntelliJ Platform Plugin SDK  Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select class="select _shortcuts" height="1" id="switch-shortcuts">      </select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="working_with_custom_actions.md" id="working_with_custom_actions.md"  >Creating Actions</h1><section class="chapter"  ><h2 id="introduction" data-toc="introduction"  >Introduction</h2><p id="44a7eb52_1" >Plugins can add actions to existing IDE menus and toolbars, as well as add new menus and toolbars. The IntelliJ Platform calls the actions of plugins in response to user interactions with the IDE. However, the actions of a plugin must first be defined and registered with the IntelliJ Platform.</p><p id="44a7eb52_2" >Using the SDK code sample <a href="https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/action_basics" id="44a7eb52_3"   data-external="true" rel="noopener noreferrer" ><code class="code " id="44a7eb52_4"  >action_basics</code></a>, this tutorial illustrates the steps to create an action for a plugin.</p></section><section class="chapter"  ><h2 id="creating-a-custom-action" data-toc="creating-a-custom-action"  >Creating a Custom Action</h2><p id="44a7eb52_5" >Custom actions extend the abstract class <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/AnAction.java" id="44a7eb52_6"   data-external="true" rel="noopener noreferrer" ><code class="code " id="44a7eb52_7"  >AnAction</code></a>. Classes that extend it should override <code class="code " id="44a7eb52_8"  >AnAction.update()</code>, and must override <code class="code " id="44a7eb52_9"  >AnAction.actionPerformed()</code>.</p><ul class="list _ul" id="44a7eb52_10"    ><li class="list__item" id="44a7eb52_11" ><p>The <code class="code " id="44a7eb52_12"  >update()</code> method implements the code that enables or disables an action.</p></li><li class="list__item" id="44a7eb52_13" ><p>The <code class="code " id="44a7eb52_14"  >actionPerformed()</code> method implements the code that executes when an action is invoked by the user.</p></li></ul><p id="44a7eb52_15" >As an example, <a href="https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/action_basics/src/main/java/org/intellij/sdk/action/PopupDialogAction.java" id="44a7eb52_16"   data-external="true" rel="noopener noreferrer" ><code class="code " id="44a7eb52_17"  >PopupDialogAction</code></a> overrides <code class="code " id="44a7eb52_18"  >AnAction</code> for the <code class="code " id="44a7eb52_19"  >action_basics</code> code sample.</p><div class="code-block" data-lang="java"         >
public class PopupDialogAction extends AnAction {

  @Override
  public void update(@NotNull AnActionEvent event) {
    // Using the event, evaluate the context,
    // and enable or disable the action.
  }

  @Override
  public void actionPerformed(@NotNull AnActionEvent event) {
    // Using the event, implement an action.
    // For example, create and show a dialog.
  }

}
</div><aside data-type="tip" class="prompt" data-title="" id="44a7eb52_21" ><p id="44a7eb52_22" ><code class="code " id="44a7eb52_23"  >AnAction</code> classes do not have class fields of any kind. This restriction prevents memory leaks. For more information about why, see <a href="basic-action-system.html" id="44a7eb52_24" data-tooltip="The actions system allows plugins to add their items to IntelliJ Platform-based IDE menus and toolbars. For example, one of the action classes is responsible for the File | Open File... menu item and the Open... toolbar button."  >操作</a>.</p></aside><p id="44a7eb52_25" >At this stage, <code class="code " id="44a7eb52_26"  >update()</code> implicitly defaults always to enable this action. The implementation of <code class="code " id="44a7eb52_27"  >actionPerformed()</code> does nothing. These methods are fully implemented in <a href="#developing-the-anaction-methods" id="44a7eb52_28" data-tooltip="At this point, the new action PopupDialogAction is registered with the IntelliJ Platform and functions in the sense that update() and actionPerformed() are called in response to user interaction with the IDE Tools menu. However, neither method implements any code to perform useful…"  >Developing the AnAction Methods</a> below.</p><p id="44a7eb52_29" >Before fleshing out those methods, to complete this minimal implementation, <code class="code " id="44a7eb52_30"  >PopupDialogAction</code> must be registered with the IntelliJ Platform.</p></section><section class="chapter"  ><h2 id="registering-a-custom-action" data-toc="registering-a-custom-action"  >Registering a Custom Action</h2><p id="44a7eb52_31" >Actions are registered by declaring them in code or by declaring them in the <a href="plugin-configuration-file.html#idea-plugin__actions" id="44a7eb52_32" data-tooltip="Defines the plugin actions."  ><code class="code " id="44a7eb52_33"  >&lt;actions&gt;</code></a> section of a <a href="plugin-configuration-file.html" id="44a7eb52_34" data-tooltip="Plugin configuration file contains all the information about the plugin, as well as all registered extensions, actions, listeners, etc."  >plugin configuration file</a>. This section describes using IDE tooling - the <span class="control" id="44a7eb52_35" >New Action</span> form - to add a declaration to the <span class="filepath" id="44a7eb52_36" >plugin.xml</span> file, and then tuning registration attributes manually. A more comprehensive explanation of action registration is available in the <a href="basic-action-system.html#registering-actions" id="44a7eb52_37" data-tooltip="There are two main ways to register an action: either by listing it in the <actions> section of a plugin's plugin.xml file or through code."  >Registering Actions</a> section of this guide.</p><section class="chapter"  ><h3 id="registering-an-action-with-the-new-action-form" data-toc="registering-an-action-with-the-new-action-form"  >Registering an Action with the New Action Form</h3><p id="44a7eb52_38" >IntelliJ IDEA has an embedded inspection that spots unregistered actions. Verify the inspection is enabled at . Here is an example for this stage of the <code class="code " id="44a7eb52_40"  >PopupDialogAction</code> class:</p><figure  id="44a7eb52_41"><img alt="&quot;Action never used&quot; inspection" title="&quot;Action never used&quot; inspection" src="images/action_never_used.png"  class="" width="600" height="211"/></figure><p id="44a7eb52_42" >To register <code class="code " id="44a7eb52_43"  >PopupDialogAction</code> and set up its basic attributes press <kbd data-bypass="true" class="keystroke" id="44a7eb52_44" ><span class="keystroke__value">Alt+Shift+Enter</span></kbd>. Fill out the on <span class="control" id="44a7eb52_45" >New Action</span> form to set up the parameters for <code class="code " id="44a7eb52_46"  >PopupDialogAction</code>:</p><figure  id="44a7eb52_47"><img alt="New Action" title="New Action" src="images/new_action.png"  class="" width="800" height="485"/></figure><p id="44a7eb52_48" >The fields of the form are:</p><ul class="list _ul" id="44a7eb52_49"    ><li class="list__item" id="44a7eb52_50" ><p><span class="control" id="44a7eb52_51" >Action ID</span> - Every action must have a unique ID. If the action class is used in only one place in the IDE UI, then the class fully qualified name (FQN) is a good default for the ID. Using the action class in multiple places requires mangling the ID, such as adding a suffix to the FQN, for each ID.</p></li><li class="list__item" id="44a7eb52_52" ><p><span class="control" id="44a7eb52_53" >Class Name</span> - The FQN implementation class for the action. If the same action is used in multiple places in the IDE UI, the implementation FQN can be reused with a different <span class="emphasis" id="44a7eb52_54" >Action ID</span>.</p></li><li class="list__item" id="44a7eb52_55" ><p><span class="control" id="44a7eb52_56" >Name</span> - The text to appear in the menu.</p></li><li class="list__item" id="44a7eb52_57" ><p><span class="control" id="44a7eb52_58" >Description</span> - Hint text to be displayed.</p></li><li class="list__item" id="44a7eb52_59" ><p><span class="control" id="44a7eb52_60" >Add to Group</span> - The action group - menu or toolbar - to which the action is added. Clicking on the list of groups and typing invokes a search, such as &quot;ToolsMenu&quot;.</p></li><li class="list__item" id="44a7eb52_61" ><p><span class="control" id="44a7eb52_62" >Anchor</span> - Where the menu action should be placed in the </p><p> menu relative to the other actions in that menu.</p></li></ul><p id="44a7eb52_64" >In this case, <code class="code " id="44a7eb52_65"  >PopupDialogAction</code> would be available in the  menu, it would be placed at the top, and would have no shortcuts.</p><p id="44a7eb52_67" >After finishing the <span class="control" id="44a7eb52_68" >New Action</span> form and applying the changes, the <a href="plugin-configuration-file.html#idea-plugin__actions" id="44a7eb52_69" data-tooltip="Defines the plugin actions."  ><code class="code " id="44a7eb52_70"  >&lt;actions&gt;</code></a> section of the plugin's <span class="filepath" id="44a7eb52_71" >plugins.xml</span> file would contain:</p><div class="code-block" data-lang="markup"         >
&lt;actions&gt;
  &lt;action
      id=&quot;org.intellij.sdk.action.PopupDialogAction&quot;
      class=&quot;org.intellij.sdk.action.PopupDialogAction&quot;
      text=&quot;Popup Dialog Action&quot;
      description=&quot;SDK action example&quot;&gt;
    &lt;add-to-group group-id=&quot;ToolsMenu&quot; anchor=&quot;first&quot;/&gt;
  &lt;/action&gt;
&lt;/actions&gt;
</div><p id="44a7eb52_73" >The <a href="plugin-configuration-file.html#idea-plugin__actions__action" id="44a7eb52_74" data-tooltip="A single action entry of the <actions> implemented by the plugin. A single <actions> element can contain multiple <action> elements."  ><code class="code " id="44a7eb52_75"  >&lt;action&gt;</code></a> element declares the <span class="control" id="44a7eb52_76" >Action ID</span> (<code class="code " id="44a7eb52_77"  >id</code>), <span class="control" id="44a7eb52_78" >Class Name</span> (<code class="code " id="44a7eb52_79"  >class</code>), <span class="control" id="44a7eb52_80" >Name</span> (<code class="code " id="44a7eb52_81"  >text</code>), and <span class="control" id="44a7eb52_82" >Description</span> from the <span class="control" id="44a7eb52_83" >New Action</span> form. The <a href="plugin-configuration-file.html#idea-plugin__actions__action__add-to-group" id="44a7eb52_84" data-tooltip="Specifies that the action should be added to an existing group. A single action can be added to multiple groups."  ><code class="code " id="44a7eb52_85"  >&lt;add-to-group&gt;</code></a> element declares where the action will appear and mirrors the names of entries from the form.</p><p id="44a7eb52_86" >This declaration is adequate, but adding more attributes is discussed in the next section.</p></section><section class="chapter"  ><h3 id="setting-registration-attributes-manually" data-toc="setting-registration-attributes-manually"  >Setting Registration Attributes Manually</h3><p id="44a7eb52_87" >An action declaration can be added manually to the <span class="filepath" id="44a7eb52_88" >plugin.xml</span> file. An exhaustive list of declaration elements and attributes is presented in <a href="basic-action-system.html#registering-actions-in-pluginxml" id="44a7eb52_89" data-tooltip="Registering actions in plugin.xml is demonstrated in the following reference examples, which document all elements and attributes used in the <actions> section and describe each element's meaning."  >Registering Actions in plugin.xml</a>. Attributes are added by selecting them from the <span class="control" id="44a7eb52_90" >New Action</span> form, or by editing the registration declaration directly in the <span class="filepath" id="44a7eb52_91" >plugin.xml</span> file.</p><p id="44a7eb52_92" >The <a href="plugin-configuration-file.html#idea-plugin__actions__action" id="44a7eb52_93" data-tooltip="A single action entry of the <actions> implemented by the plugin. A single <actions> element can contain multiple <action> elements."  ><code class="code " id="44a7eb52_94"  >&lt;action&gt;</code></a> declaration for <code class="code " id="44a7eb52_95"  >PopupDialogAction</code> in the <code class="code " id="44a7eb52_96"  >action_basics</code> <a href="https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/action_basics/src/main/resources/META-INF/plugin.xml" id="44a7eb52_97"   data-external="true" rel="noopener noreferrer" >plugin.xml</a> file. It also contains an attribute for an <a href="work-with-icons-and-images.html" id="44a7eb52_98" data-tooltip="Icons and images are used widely by IntelliJ Platform plugins. Plugins need icons mostly for actions, custom components renderers, tool windows, and so on."  ><code class="code " id="44a7eb52_99"  >Icon</code></a> and encloses elements declaring text overrides, keyboard and mouse shortcuts, and to which menu group the action should be added.</p><p id="44a7eb52_100" >The full declaration is:</p><div class="code-block" data-lang="markup"         >
&lt;action
    id=&quot;org.intellij.sdk.action.PopupDialogAction&quot;
    class=&quot;org.intellij.sdk.action.PopupDialogAction&quot;
    text=&quot;Action Basics Plugin: Popup Dialog Action&quot;
    description=&quot;SDK action example&quot;
    icon=&quot;SdkIcons.Sdk_default_icon&quot;&gt;
  &lt;override-text place=&quot;MainMenu&quot; text=&quot;Popup Dialog Action&quot;/&gt;
  &lt;keyboard-shortcut
      keymap=&quot;$default&quot;
      first-keystroke=&quot;control alt A&quot;
      second-keystroke=&quot;C&quot;/&gt;
  &lt;mouse-shortcut
      keymap=&quot;$default&quot;
      keystroke=&quot;control button3 doubleClick&quot;/&gt;
  &lt;add-to-group group-id=&quot;ToolsMenu&quot; anchor=&quot;first&quot;/&gt;
&lt;/action&gt;
</div><section class="chapter"  ><h4 id="using-override-text-for-an-action" data-toc="using-override-text-for-an-action"  >Using Override-Text for an Action</h4><p id="44a7eb52_102" >By using the <code class="code " id="44a7eb52_103"  >override-text</code> element introduced in 2020.1 of the IntelliJ Platform, the action text can be different depending on the context of where the action appears: menu, toolbar, etc. The example above uses this element to ensure the shorter text &quot;Popup Dialog Action&quot; is shown anywhere the action appears in the main menu structure. Otherwise, the default, more explanatory text &quot;Action Basics Plugin: Popup Dialog Action&quot; is shown. For more information, see <a href="basic-action-system.html#setting-the-override-text-element" id="44a7eb52_104" data-tooltip="Beginning in 2020.1, an alternate version of an action's menu text can be declared for use depending on where an action appears. Using the <override-text> element, the menu text for an action can be different depending on context: menu location, toolbar, etc. This is also available…"  >Setting the Override-Text Element</a>.</p></section></section></section><section class="chapter"  ><h2 id="testing-the-minimal-custom-action-implementation" data-toc="testing-the-minimal-custom-action-implementation"  >Testing the Minimal Custom Action Implementation</h2><p id="44a7eb52_105" >After performing the steps described above, <a href="gradle-prerequisites.html#executing-the-plugin" id="44a7eb52_106" data-tooltip="The IDE Plugin generator automatically creates the Run Plugin run configuration that can be executed via the Run | Run... action or can be found in the Gradle tool window under the Run Configurations node."  >compile and run</a> the plugin to see the newly created action available as a  menu item, which is within the context of the main menu:</p><figure  id="44a7eb52_108"><img alt="Register action" title="Register action" src="images/tools_menu_item_action.png"  class="" width="350" height="213"/></figure><p id="44a7eb52_109" >To see the alternate, more verbose text declared by the <code class="code " id="44a7eb52_110"  >override-text</code> element, use  and search for &quot;Pop Dialog Action&quot;. The search shows the verbose menu text in a context outside the main menu:</p><figure  id="44a7eb52_112"><img alt="Override Text Display" title="Override Text Display" src="images/find_action.png"  class="" width="500" height="118"/></figure><p id="44a7eb52_113" >Selecting the action from the menu, keyboard/mouse shortcuts, or <span class="control" id="44a7eb52_114" >Find Action</span> won't do anything at this point because the implementations are empty. However, it confirms the new entry appears at  and .</p></section><section class="chapter"  ><h2 id="developing-the-anaction-methods" data-toc="developing-the-anaction-methods"  >Developing the AnAction Methods</h2><p id="44a7eb52_117" >At this point, the new action <code class="code " id="44a7eb52_118"  >PopupDialogAction</code> is registered with the IntelliJ Platform and functions in the sense that <code class="code " id="44a7eb52_119"  >update()</code> and <code class="code " id="44a7eb52_120"  >actionPerformed()</code> are called in response to user interaction with the IDE  menu. However, neither method implements any code to perform useful work.</p><p id="44a7eb52_122" >This section describes adding useful code to these methods. The <code class="code " id="44a7eb52_123"  >update()</code> method defaults to always enable the action, which is satisfactory for intermediate testing. So <code class="code " id="44a7eb52_124"  >actionPerformed()</code> will be developed first.</p><section class="chapter"  ><h3 id="extending-the-actionperformed-method" data-toc="extending-the-actionperformed-method"  >Extending the actionPerformed() Method</h3><p id="44a7eb52_125" >Adding code to the <code class="code " id="44a7eb52_126"  >PopupDialogAction.actionPerformed()</code> method makes the action do something useful. The code below gets information from the <code class="code " id="44a7eb52_127"  >anActionEvent</code> input parameter and constructs a message dialog. A generic icon, and the <code class="code " id="44a7eb52_128"  >message</code> and <code class="code " id="44a7eb52_129"  >title</code> attributes from the invoking menu action are displayed. However, code in this method could manipulate a project, invoke an inspection, change the contents of a file, etc.</p><p id="44a7eb52_130" >For demonstration purposes the <code class="code " id="44a7eb52_131"  >AnActionEvent.getData()</code> method tests if a <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/core-api/src/com/intellij/pom/Navigatable.java" id="44a7eb52_132"   data-external="true" rel="noopener noreferrer" ><code class="code " id="44a7eb52_133"  >Navigatable</code></a> object is available. If so, information about the selected element is added to the dialog.</p><p id="44a7eb52_134" >See <a href="basic-action-system.html#determining-the-action-context" id="44a7eb52_135" data-tooltip="The AnActionEvent object passed to update() carries information about the current context for the action. Context information is available from the methods of AnActionEvent, providing information such as the Presentation and whether the action is triggered by a Toolbar. Additional…"  >Determining the Action Context</a> for more information about accessing information from the <code class="code " id="44a7eb52_136"  >AnActionEvent</code> input parameter.</p><div class="code-block" data-lang="java"         >
@Override
public void actionPerformed(@NotNull AnActionEvent event) {
  // Using the event, create and show a dialog
  Project currentProject = event.getProject();
  StringBuilder message =
      new StringBuilder(event.getPresentation().getText() + &quot; Selected!&quot;);
  // If an element is selected in the editor, add info about it.
  Navigatable selectedElement = event.getData(CommonDataKeys.NAVIGATABLE);
  if (selectedElement != null) {
    message.append(&quot;\nSelected Element: &quot;).append(selectedElement);
  }
  String title = event.getPresentation().getDescription();
  Messages.showMessageDialog(
      currentProject,
      message.toString(),
      title,
      Messages.getInformationIcon());
}
</div></section><section class="chapter"  ><h3 id="extending-the-update-method" data-toc="extending-the-update-method"  >Extending the update() Method</h3><p id="44a7eb52_138" >Adding code to <code class="code " id="44a7eb52_139"  >PopupDialogAction.update()</code> gives finer control of the action's visibility and availability. The action's state and(or) presentation can be dynamically changed depending on the context.</p><aside data-type="tip" class="prompt" data-title="" id="44a7eb52_140" ><p id="44a7eb52_141" >This method needs to <span class="emphasis" id="44a7eb52_142" >execute very quickly</span>. For more information about this constraint, see the warning in <a href="basic-action-system.html#overriding-the-anactionupdate-method" id="44a7eb52_143" data-tooltip="The method AnAction.update() is periodically called by the IntelliJ Platform in response to user gestures. The update() method gives an action to evaluate the current context and enable or disable its functionality. Implementors must ensure that changing presentation and…"  >Overriding the AnAction.update Method</a>.</p></aside><p id="44a7eb52_144" >In this example, the <code class="code " id="44a7eb52_145"  >update()</code> method relies on a <code class="code " id="44a7eb52_146"  >Project</code> object being available. This requirement means the user must have at least one project open in the IDE for the <code class="code " id="44a7eb52_147"  >PopupDialogAction</code> to be available. So the <code class="code " id="44a7eb52_148"  >update()</code> method disables the action for contexts where a <code class="code " id="44a7eb52_149"  >Project</code> object isn't defined.</p><p id="44a7eb52_150" >The availability (enabled and visible) is set on the <code class="code " id="44a7eb52_151"  >Presentation</code> object. Setting both the enabled state and visibility produces consistent behavior despite possible host menu settings, as discussed in <a href="basic-action-system.html#grouping-actions" id="44a7eb52_152" data-tooltip="Groups organize actions into logical UI structures, which in turn can contain other groups. A group of actions can form a toolbar or a menu. Subgroups of a group can form submenus of a menu."  >Grouping Actions</a>.</p><div class="code-block" data-lang="java"         >
@Override
public void update(@NotNull AnActionEvent event) {
  // Set the availability based on whether a project is open
  Project currentProject = event.getProject();
  event.getPresentation().setEnabledAndVisible(currentProject != null);
}
</div><p id="44a7eb52_154" >The <code class="code " id="44a7eb52_155"  >update()</code> method does not check to see if a <code class="code " id="44a7eb52_156"  >Navigatable</code> object is available before enabling <code class="code " id="44a7eb52_157"  >PopupDialogAction</code>. This check is unnecessary because using the <code class="code " id="44a7eb52_158"  >Navigatable</code> object is opportunistic in <code class="code " id="44a7eb52_159"  >actionPerformed()</code>. See <a href="basic-action-system.html#determining-the-action-context" id="44a7eb52_160" data-tooltip="The AnActionEvent object passed to update() carries information about the current context for the action. Context information is available from the methods of AnActionEvent, providing information such as the Presentation and whether the action is triggered by a Toolbar. Additional…"  >Determining the Action Context</a> for more information about accessing information from the <code class="code " id="44a7eb52_161"  >AnActionEvent</code> input parameter.</p></section><section class="chapter"  ><h3 id="other-methods-overrides" data-toc="other-methods-overrides"  >Other Methods Overrides</h3><p id="44a7eb52_162" >A constructor is overridden in <code class="code " id="44a7eb52_163"  >PopupDialogAction</code>, but this is an artifact of reusing this class for a dynamically created menu action. Otherwise, overriding constructors for <code class="code " id="44a7eb52_164"  >AnAction</code> is not required.</p></section></section><section class="chapter"  ><h2 id="testing-the-custom-action" data-toc="testing-the-custom-action"  >Testing the Custom Action</h2><p id="44a7eb52_165" >After compiling and running the plugin project and invoking the action, the dialog will pop up:</p><figure  id="44a7eb52_166"><img alt="Action performed" title="Action performed" src="images/action_performed.png"  class="" width="800" height="283"/></figure></section><div class="last-modified"> Last modified: 28 九月 2022</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="action-system.html">Actions Tutorial</a>   <a class="navigation-links__next" href="grouping-action.html">Grouping Actions</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/storage/help-app/v5/app.js"></script></body></html>