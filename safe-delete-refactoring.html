<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8">  <meta name="built-on" content="2022-09-28T11:33:50.6658064"><meta name="build-number" content="${buildNumber}">    <meta name="keywords" content="">  <title>Safe Delete Refactoring | IntelliJ Platform Plugin SDK</title><script id="virtual-toc-data" type="application/json">[]</script>   <link href="https://resources.jetbrains.com/storage/help-app/v5/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Safe Delete Refactoring | IntelliJ Platform Plugin SDK"/><meta property="og:description" content=""/><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"/><meta property="og:site_name" content="IntelliJ Platform Plugin SDK Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="https://plugins.jetbrains.com/docs/intellij/safe-delete-refactoring.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@JBPlatform"><meta name="twitter:title" content="Safe Delete Refactoring | IntelliJ Platform Plugin SDK"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@JBPlatform"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "https://plugins.jetbrains.com/docs/intellij/safe-delete-refactoring.html#webpage", "url": "https://plugins.jetbrains.com/docs/intellij/safe-delete-refactoring.html", "name": "Safe Delete Refactoring | IntelliJ Platform Plugin SDK", "description": "", "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "https://plugins.jetbrains.com/docs/intellij/#website", "url": "https://plugins.jetbrains.com/docs/intellij/", "name": "IntelliJ Platform Plugin SDK Help" }</script><!-- End Schema.org --></head>    <body data-id="safe_delete_refactoring.md" data-main-title="Safe Delete Refactoring" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Part VII — Custom Languages///custom_language_support.md|Custom Language Support"  data-edit-url="https://github.com/JetBrains/intellij-sdk-docs/edit/main/topics/reference_guide/custom_language_support/safe_delete_refactoring.md"  >  <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>IntelliJ Platform Plugin SDK  Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select class="select _shortcuts" height="1" id="switch-shortcuts">      </select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="safe_delete_refactoring.md" id="safe_delete_refactoring.md"  >Safe Delete Refactoring</h1><p id="bfde96f4_1" >The <span class="emphasis" id="bfde96f4_2" >Safe Delete</span> refactoring also builds on the same <a href="find-usages.html" id="bfde96f4_3" data-tooltip="The Find Usages action is a multi-step process, and each step of the process requires involvement from the custom language plugin."  >Find Usages</a> framework as <a href="rename-refactoring.html" id="bfde96f4_4" data-tooltip="The Rename refactoring operation is quite similar to that of Find Usages. It uses the same rules for locating the element to be renamed and the same index of words for finding the files that may have references to the element being renamed."  >Rename Refactoring</a>.</p><p id="bfde96f4_5" >In addition to that, to support <span class="emphasis" id="bfde96f4_6" >Safe Delete</span>, a plugin needs to implement two things:</p><ul class="list _ul" id="bfde96f4_7"    ><li class="list__item" id="bfde96f4_8" ><p id="bfde96f4_9" >The <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/refactoring/src/com/intellij/lang/refactoring/RefactoringSupportProvider.java" id="bfde96f4_10"   data-external="true" rel="noopener noreferrer" ><code class="code " id="bfde96f4_11"  >RefactoringSupportProvider</code></a> interface, registered in the <code class="code " id="bfde96f4_12"  >com.intellij.lang.refactoringSupport</code> extension point, and the <code class="code " id="bfde96f4_13"  >isSafeDeleteAvailable()</code> method, which checks if the <span class="emphasis" id="bfde96f4_14" >Safe Delete</span> refactoring is available for a specific PSI element</p></li><li class="list__item" id="bfde96f4_15" ><p id="bfde96f4_16" >The <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/core-api/src/com/intellij/psi/PsiElement.java" id="bfde96f4_17"   data-external="true" rel="noopener noreferrer" ><code class="code " id="bfde96f4_18"  >PsiElement.delete()</code></a> method for the <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/core-api/src/com/intellij/psi/PsiElement.java" id="bfde96f4_19"   data-external="true" rel="noopener noreferrer" ><code class="code " id="bfde96f4_20"  >PsiElement</code></a> subclasses for which <span class="emphasis" id="bfde96f4_21" >Safe Delete</span> is available. Deleting PSI elements is implemented by deleting the underlying AST nodes from the AST tree (which, in turn, causes the text ranges corresponding to the AST nodes to be deleted from the document).</p></li></ul><p id="bfde96f4_22" ><span class="control" id="bfde96f4_23" >Example:</span> <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/plugins/properties/properties-psi-impl/src/com/intellij/lang/properties/psi/impl/PropertyImpl.java" id="bfde96f4_24"   data-external="true" rel="noopener noreferrer" ><code class="code " id="bfde96f4_25"  >delete()</code></a> implementation for a Property in <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/plugins/properties" id="bfde96f4_26"   data-external="true" rel="noopener noreferrer" >Properties language plugin</a></p><p id="bfde96f4_27" >If needed, it's possible to further customize how <span class="emphasis" id="bfde96f4_28" >Safe Delete</span> is performed for a particular type of element (e.g., how references are searched) via <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/lang-impl/src/com/intellij/refactoring/safeDelete/SafeDeleteProcessorDelegate.java" id="bfde96f4_29"   data-external="true" rel="noopener noreferrer" ><code class="code " id="bfde96f4_30"  >SafeDeleteProcessorDelegate</code></a>.</p><p id="bfde96f4_31" ><span class="control" id="bfde96f4_32" >Example</span>: <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/plugins/properties/src/com/intellij/lang/properties/refactoring/PropertiesFilesSafeDeleteProcessor.java" id="bfde96f4_33"   data-external="true" rel="noopener noreferrer" ><code class="code " id="bfde96f4_34"  >SafeDeleteProcessorDelegate</code></a> implementation for <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/plugins/properties" id="bfde96f4_35"   data-external="true" rel="noopener noreferrer" >Properties language plugin</a></p><div class="last-modified"> Last modified: 28 九月 2022</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="rename-refactoring.html">Rename Refactoring</a>   <a class="navigation-links__next" href="code-formatting.html">Code Formatter</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/storage/help-app/v5/app.js"></script></body></html>