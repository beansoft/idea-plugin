<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8">  <meta name="built-on" content="2022-09-28T11:33:50.5204651"><meta name="build-number" content="${buildNumber}">    <meta name="keywords" content="">  <title>Test Project and Testdata Directories | IntelliJ Platform Plugin SDK</title><script id="virtual-toc-data" type="application/json">[{"id":"testdata-files","level":0,"title":"Testdata Files","anchor":"#testdata-files"}]</script>   <link href="https://resources.jetbrains.com/storage/help-app/v5/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Test Project and Testdata Directories | IntelliJ Platform Plugin SDK"/><meta property="og:description" content=""/><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"/><meta property="og:site_name" content="IntelliJ Platform Plugin SDK Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="https://plugins.jetbrains.com/docs/intellij/test-project-and-testdata-directories.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@JBPlatform"><meta name="twitter:title" content="Test Project and Testdata Directories | IntelliJ Platform Plugin SDK"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@JBPlatform"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "https://plugins.jetbrains.com/docs/intellij/test-project-and-testdata-directories.html#webpage", "url": "https://plugins.jetbrains.com/docs/intellij/test-project-and-testdata-directories.html", "name": "Test Project and Testdata Directories | IntelliJ Platform Plugin SDK", "description": "", "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "https://plugins.jetbrains.com/docs/intellij/#website", "url": "https://plugins.jetbrains.com/docs/intellij/", "name": "IntelliJ Platform Plugin SDK Help" }</script><!-- End Schema.org --></head>    <body data-id="test_project_and_testdata_directories.md" data-main-title="Test Project and Testdata Directories" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Part VI — Testing"  data-edit-url="https://github.com/JetBrains/intellij-sdk-docs/edit/main/topics/basics/testing_plugins/test_project_and_testdata_directories.md"  >  <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>IntelliJ Platform Plugin SDK  Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select class="select _shortcuts" height="1" id="switch-shortcuts">      </select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="test_project_and_testdata_directories.md" id="test_project_and_testdata_directories.md"  >Test Project and Testdata Directories</h1><p id="92c4fce4_1" >The test fixture creates a <span class="emphasis" id="92c4fce4_2" >test project</span> environment. Unless you customize the project creation, the test project will have one module with one source root called <span class="filepath" id="92c4fce4_3" >src</span>. The test project files exist either in a temporary directory or in an in-memory file system, depending on which implementation of <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/testFramework/fixtures/TempDirTestFixture.java" id="92c4fce4_4"   data-external="true" rel="noopener noreferrer" ><code class="code " id="92c4fce4_5"  >TempDirTestFixture</code></a> is used.</p><p id="92c4fce4_6" ><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/testFramework/fixtures/BasePlatformTestCase.java" id="92c4fce4_7"   data-external="true" rel="noopener noreferrer" ><code class="code " id="92c4fce4_8"  >BasePlatformTestCase</code></a> (renamed from <code class="code " id="92c4fce4_9"  >LightPlatformCodeInsightFixtureTestCase</code> in 2019.2) uses an in-memory implementation; if you set up the test environment by calling <code class="code " id="92c4fce4_10"  >IdeaTestFixtureFactory.createCodeInsightFixture()</code>, you can specify the implementation to use.</p><aside data-type="tip" class="prompt" data-title="" id="92c4fce4_11" ><p id="92c4fce4_12" >If your tests use the in-memory implementation, and you abort the execution of your tests, the persisted filesystem caches may get out of sync with the in-memory structures, and you may get spurious errors in your tests. If you get an unexpected error after a series of successful runs, <span class="control" id="92c4fce4_13" >try rerunning the test</span>, and if that doesn't help, <span class="control" id="92c4fce4_14" >delete the &quot;system&quot; subdirectory</span> in your <a href="ide-development-instance.html#the-development-instance-sandbox-directory" id="92c4fce4_15" data-tooltip="The Sandbox Home directory contains the settings, caches, logs, and plugins for a Development Instance of the IDE. This information is stored in a different location than for the installed IDE itself."  >sandbox directory</a>.</p></aside><section class="chapter"  ><h2 id="testdata-files" data-toc="testdata-files"  >Testdata Files</h2><p id="92c4fce4_16" >In your plugin, you usually store the test data for your tests (such as files on which plugin features will be executed and expected output files) in the <span class="filepath" id="92c4fce4_17" >testdata</span> directory. This is just a directory under your plugin's content root, but not under a source root. Files in <span class="filepath" id="92c4fce4_18" >testdata</span> usually are not valid source code and must not be compiled.</p><p id="92c4fce4_19" >To specify the location of <span class="filepath" id="92c4fce4_20" >testdata</span>, you must override the <code class="code " id="92c4fce4_21"  >getTestDataPath()</code> method. The default implementation assumes running as part of the IntelliJ Platform source tree and is not appropriate for third-party plugins.</p><aside data-type="tip" class="prompt" data-title="" id="92c4fce4_22" ><p id="92c4fce4_23" >A widespread pattern in IntelliJ Platform tests is to use the test method's name being executed as the base for building the <span class="filepath" id="92c4fce4_24" >testdata</span> file paths. This allows us to reuse most of the code between different test methods that test various aspects of the same feature, and this approach is also recommended for third-party plugin tests. The name of the test method can be retrieved using <code class="code " id="92c4fce4_25"  >UsefulTestCase.getTestName()</code>.</p></aside><aside data-type="tip" class="prompt" data-title="" id="92c4fce4_26" ><p id="92c4fce4_27" >If your plugin builds on top of Java support, please see <a href="testing-faq.html#how-to-test-a-jvm-language" id="92c4fce4_28" data-tooltip="Plugins supporting a JVM language may require JDK and language standard library to be set up in a test project, so that classes like java.lang.String can be correctly resolved during tests. Tests extending LightJavaCodeInsightFixtureTestCase use one of the mock JDKs distributed with…"  >How to test a JVM language?</a> to set up your test environment to obtain the required <span class="emphasis" id="92c4fce4_29" >Mock JDK</span> automatically.</p></aside><p id="92c4fce4_30" >To copy files or directories from your <span class="filepath" id="92c4fce4_31" >testdata</span> directory to the test project directory, you can use the <code class="code " id="92c4fce4_32"  >copyFileToProject()</code> and <code class="code " id="92c4fce4_33"  >copyDirectoryToProject()</code> methods from <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/testFramework/fixtures/CodeInsightTestFixture.java" id="92c4fce4_34"   data-external="true" rel="noopener noreferrer" ><code class="code " id="92c4fce4_35"  >CodeInsightTestFixture</code></a>.</p><p id="92c4fce4_36" >Most operations in plugin tests require a file open in the in-memory editor, in which highlighting, completion, and other operations will be performed. The in-memory editor instance is returned by <code class="code " id="92c4fce4_37"  >CodeInsightTestFixture.getEditor()</code>. To copy a file from the <span class="filepath" id="92c4fce4_38" >testdata</span> directory to the test project directory and immediately open it in the editor, you can use the <code class="code " id="92c4fce4_39"  >CodeInsightTestFixture.configureByFile()</code> or <code class="code " id="92c4fce4_40"  >configureByFiles()</code> methods. The latter copies multiple files to the test project directory and opens the <span class="emphasis" id="92c4fce4_41" >first</span> of them in the in-memory editor.</p><p id="92c4fce4_42" >Alternatively, you can use one of the other methods, which take parameters annotated with <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/testFramework/TestDataFile.java" id="92c4fce4_43"   data-external="true" rel="noopener noreferrer" ><code class="code " id="92c4fce4_44"  >@TestDataFile</code></a>. These methods copy the specified files from the <span class="filepath" id="92c4fce4_45" >testdata</span> directory to the test project directory, open the first of the specified files in the in-memory editor, and then perform the requested operation such as highlighting or code completion.</p><aside data-type="tip" class="prompt" data-title="" id="92c4fce4_46" ><p id="92c4fce4_47" >The IDE supports smart navigation between test code and related test data file(s); see this <a href="https://blog.jetbrains.com/platform/2017/10/improvements-in-testing-intellij-platform-plugins/" id="92c4fce4_48"   data-external="true" rel="noopener noreferrer" >blog post</a> for more details.</p></aside><section class="chapter"  ><h3 id="special-markup" data-toc="special-markup"  >Special Markup</h3><p id="92c4fce4_49" >When a file is opened in the in-memory editor, special markup in the file content can specify the caret position or selection.</p><p id="92c4fce4_50" >You can use one of the following markers:</p><ul class="list _ul" id="92c4fce4_51"    ><li class="list__item" id="92c4fce4_52" ><p><code class="code " id="92c4fce4_53"  >&lt;caret&gt;</code> specifies the position where the caret should be placed.</p></li><li class="list__item" id="92c4fce4_54" ><p><code class="code " id="92c4fce4_55"  >&lt;selection&gt;</code> and <code class="code " id="92c4fce4_56"  >&lt;/selection&gt;</code> specify the start and end of the selected text range.</p></li><li class="list__item" id="92c4fce4_57" ><p><code class="code " id="92c4fce4_58"  >&lt;block&gt;</code> and <code class="code " id="92c4fce4_59"  >&lt;/block&gt;</code> specify the column selection's start and end points.</p></li></ul></section></section><div class="last-modified"> Last modified: 28 九月 2022</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="light-and-heavy-tests.html">Light and Heavy Tests</a>   <a class="navigation-links__next" href="writing-tests.html">Writing Tests</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/storage/help-app/v5/app.js"></script></body></html>