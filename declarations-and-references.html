<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8">  <meta name="built-on" content="2022-09-29T19:15:56.8852641"><meta name="build-number" content="${buildNumber}">    <meta name="keywords" content="">  <title>Declarations and References | IntelliJ Platform Plugin SDK</title><script id="virtual-toc-data" type="application/json">[{"id":"declarations","level":0,"title":"Declarations","anchor":"#declarations"},{"id":"references","level":0,"title":"References","anchor":"#references"}]</script>   <link href="https://resources.jetbrains.com/storage/help-app/v5/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Declarations and References | IntelliJ Platform Plugin SDK"/><meta property="og:description" content=""/><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"/><meta property="og:site_name" content="IntelliJ Platform Plugin SDK Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="https://plugins.jetbrains.com/docs/intellij/declarations-and-references.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@JBPlatform"><meta name="twitter:title" content="Declarations and References | IntelliJ Platform Plugin SDK"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@JBPlatform"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "https://plugins.jetbrains.com/docs/intellij/declarations-and-references.html#webpage", "url": "https://plugins.jetbrains.com/docs/intellij/declarations-and-references.html", "name": "Declarations and References | IntelliJ Platform Plugin SDK", "description": "", "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "https://plugins.jetbrains.com/docs/intellij/#website", "url": "https://plugins.jetbrains.com/docs/intellij/", "name": "IntelliJ Platform Plugin SDK Help" }</script><!-- End Schema.org --></head>    <body data-id="declarations_and_references.md" data-main-title="Declarations and References" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Part VII — Custom Languages///custom_language_support.md|Custom Language Support"  data-edit-url="https://github.com/JetBrains/intellij-sdk-docs/edit/main/topics/reference_guide/custom_language_support/declarations_and_references.md"  >  <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>IntelliJ Platform Plugin SDK  Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select class="select _shortcuts" height="1" id="switch-shortcuts">      </select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="declarations_and_references.md" id="declarations_and_references.md"  >Declarations and References</h1><aside data-type="tip" class="prompt" data-title="" id="87250fdb_76" ><p id="87250fdb_77" >This API is available starting from 2020.3 and is currently in development and thus in an experimental state.</p></aside><section class="chapter"  ><h2 id="declarations" data-toc="declarations"  >Declarations</h2><p id="87250fdb_78" >Each <a href="symbols.html" id="87250fdb_79" data-tooltip="This API is available starting from 2020.3 and is currently in development and thus in an experimental state."  >symbol</a> may be declared in zero or more places, for example:</p><ul class="list _ul" id="87250fdb_80"    ><li class="list__item" id="87250fdb_81" ><p>a C# partial class is a symbol with several declarations;</p></li><li class="list__item" id="87250fdb_82" ><p>a property key is a symbol possibly declared in several files simultaneously;</p></li><li class="list__item" id="87250fdb_83" ><p>a Java local variable is a symbol with a single declaration;</p></li><li class="list__item" id="87250fdb_84" ><p>and a file is a symbol without declarations; it has only references.</p></li></ul><p id="87250fdb_85" >Declarations in PSI elements are implementations of <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/core-api/src/com/intellij/model/psi/PsiSymbolDeclaration.java" id="87250fdb_86"   data-external="true" rel="noopener noreferrer" ><code class="code " id="87250fdb_87"  >PsiSymbolDeclaration</code></a>.</p><p id="87250fdb_88" >To report a declaration in a PSI element, either:</p><ul class="list _ul" id="87250fdb_89"    ><li class="list__item" id="87250fdb_90" ><p>implement and register <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/core-api/src/com/intellij/model/psi/PsiSymbolDeclarationProvider.java" id="87250fdb_91"   data-external="true" rel="noopener noreferrer" ><code class="code " id="87250fdb_92"  >PsiSymbolDeclarationProvider</code></a> in <code class="code " id="87250fdb_93"  >com.intellij.psi.declarationProvider</code> EP;</p></li><li class="list__item" id="87250fdb_94" ><p>or implement <code class="code " id="87250fdb_95"  >PsiSymbolDeclaration</code> directly in the <code class="code " id="87250fdb_96"  >PsiElement</code>.</p></li></ul></section><section class="chapter"  ><h2 id="references" data-toc="references"  >References</h2><p id="87250fdb_97" >References from PSI elements are implementations of <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/core-api/src/com/intellij/model/psi/PsiSymbolReference.java" id="87250fdb_98"   data-external="true" rel="noopener noreferrer" ><code class="code " id="87250fdb_99"  >PsiSymbolReference</code></a> interface.</p><p id="87250fdb_100" >The main method of <code class="code " id="87250fdb_101"  >PsiSymbolReference</code> is <code class="code " id="87250fdb_102"  >resolveReference()</code>, which returns the collection of symbols to which the reference points, plus additional data. If it is not possible to resolve the reference, for example, if it points to an undefined class, an empty collection gets returned. A counterpart to the <code class="code " id="87250fdb_103"  >resolveReference()</code> method is <code class="code " id="87250fdb_104"  >PsiSymbolReference.resolvesTo()</code>, which checks if the reference resolves to the specified symbol. This method can be implemented to walk the tree only if the element's text is equal to the reference's text.</p><p id="87250fdb_105" >For convenience, if the reference can possibly be resolved to a single symbol without additional data, then it might be extended from <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/core-api/src/com/intellij/model/SingleTargetReference.java" id="87250fdb_106"   data-external="true" rel="noopener noreferrer" ><code class="code " id="87250fdb_107"  >SingleTargetReference</code></a>.</p><section class="chapter"  ><h3 id="own-references" data-toc="own-references"  >Own References</h3><p id="87250fdb_108" >Own references are the references found in PSI elements, which are considered as references by the language.</p><p id="87250fdb_109" ><span class="control" id="87250fdb_110" >Example:</span> PSI element representing <code class="code " id="87250fdb_111"  >x</code> in <code class="code " id="87250fdb_112"  >x * 2</code> Java expression has an Own reference to a local Java variable, e.g., <code class="code " id="87250fdb_113"  >var x = 42</code>, because this is a reference from Java language point of view, and Java language support uses it, e.g., for code analysis.</p><p id="87250fdb_114" >To provide Own references by the <code class="code " id="87250fdb_115"  >PsiElement</code>, implement <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/core-api/src/com/intellij/psi/PsiElement.java" id="87250fdb_116"   data-external="true" rel="noopener noreferrer" ><code class="code " id="87250fdb_117"  >PsiElement.getOwnReferences()</code></a> in the <code class="code " id="87250fdb_118"  >PsiElement</code>. If the element contains a single reference, <code class="code " id="87250fdb_119"  >Collections.singletonList()</code> can be used.</p></section><section class="chapter"  ><h3 id="external-references" data-toc="external-references"  >External References</h3><p id="87250fdb_120" >External references are the references which are not considered as references by the host language. The language support should not rely on their existence/absence, because they might be contributed by other plugins.</p><p id="87250fdb_121" ><span class="control" id="87250fdb_122" >Example:</span> PSI element representing <code class="code " id="87250fdb_123"  >&quot;users.txt&quot;</code> in <code class="code " id="87250fdb_124"  >new File(&quot;users.txt&quot;)</code> Java expression is a string literal from Java language point of view, but there is a plugin which <span class="emphasis" id="87250fdb_125" >knows</span> that this literal references a file name, and provides such reference.</p><p id="87250fdb_126" >External references might be contributed to PSI elements that implement <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/core-api/src/com/intellij/model/psi/PsiExternalReferenceHost.java" id="87250fdb_127"   data-external="true" rel="noopener noreferrer" ><code class="code " id="87250fdb_128"  >PsiExternalReferenceHost</code></a>. To allow other plugins to contribute references of <code class="code " id="87250fdb_129"  >PsiElement</code>, implement <code class="code " id="87250fdb_130"  >PsiExternalReferenceHost</code> in the <code class="code " id="87250fdb_131"  >PsiElement</code>. To contribute an External reference to the existing <code class="code " id="87250fdb_132"  >PsiExternalReferenceHost</code>, implement and register <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/core-api/src/com/intellij/model/psi/PsiSymbolReferenceProvider.java" id="87250fdb_133"   data-external="true" rel="noopener noreferrer" ><code class="code " id="87250fdb_134"  >PsiSymbolReferenceProvider</code></a>.</p></section><section class="chapter"  ><h3 id="implicit-references" data-toc="implicit-references"  >Implicit References</h3><p id="87250fdb_135" >Implicit references are the references which should be part of the mechanism to obtain a target by a reference, without the inverse ability to search or rename such references by a target.</p><p id="87250fdb_136" ><span class="control" id="87250fdb_137" >Example:</span> <code class="code " id="87250fdb_138"  >var</code> keyword in <code class="code " id="87250fdb_139"  >var x = new Person()</code> Java declaration has an Implicit reference, because it doesn't make sense to obtain the reference by the target class.</p><p id="87250fdb_140" >At the same time, it's possible:</p><ul class="list _ul" id="87250fdb_141"    ><li class="list__item" id="87250fdb_142" ><p>to navigate to the class by <kbd data-bypass="true" class="keystroke" id="87250fdb_143" ><span class="keystroke__value">Ctrl-Click</span></kbd> on <code class="code " id="87250fdb_144"  >var</code>;</p></li><li class="list__item" id="87250fdb_145" ><p>to start a refactoring (e.g., rename) from the class targeted by this reference;</p></li><li class="list__item" id="87250fdb_146" ><p>to view documentation of the class targeted by this reference.</p></li></ul><p id="87250fdb_147" >To provide an Implicit reference, implement and register <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/core-api/src/com/intellij/model/psi/ImplicitReferenceProvider.java" id="87250fdb_148"   data-external="true" rel="noopener noreferrer" ><code class="code " id="87250fdb_149"  >ImplicitReferenceProvider</code></a> in <code class="code " id="87250fdb_150"  >com.intellij.psi.implicitReferenceProvider</code> extension point.</p></section></section><div class="last-modified"> Last modified: 29 九月 2022</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="symbols.html">Symbols</a>   <a class="navigation-links__next" href="navigation.html">Navigation</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/storage/help-app/v5/app.js"></script></body></html>