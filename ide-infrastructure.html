<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8">  <meta name="built-on" content="2022-09-29T19:15:57.1321832"><meta name="build-number" content="${buildNumber}">    <meta name="keywords" content="">  <title>IDE Infrastructure | IntelliJ Platform Plugin SDK</title><script id="virtual-toc-data" type="application/json">[{"id":"logging","level":0,"title":"Logging","anchor":"#logging"},{"id":"error-reporting","level":0,"title":"Error Reporting","anchor":"#error-reporting"},{"id":"runtime-information","level":0,"title":"Runtime Information","anchor":"#runtime-information"},{"id":"context-help","level":0,"title":"Context Help","anchor":"#context-help"},{"id":"running-tasks-once","level":0,"title":"Running Tasks Once","anchor":"#running-tasks-once"},{"id":"application-events","level":0,"title":"Application Events","anchor":"#application-events"},{"id":"power-save-mode","level":0,"title":"Power Save Mode","anchor":"#power-save-mode"},{"id":"plugin-management","level":0,"title":"Plugin Management","anchor":"#plugin-management"}]</script>   <link href="https://resources.jetbrains.com/storage/help-app/v5/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="IDE Infrastructure | IntelliJ Platform Plugin SDK"/><meta property="og:description" content=""/><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"/><meta property="og:site_name" content="IntelliJ Platform Plugin SDK Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="https://plugins.jetbrains.com/docs/intellij/ide-infrastructure.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@JBPlatform"><meta name="twitter:title" content="IDE Infrastructure | IntelliJ Platform Plugin SDK"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@JBPlatform"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "https://plugins.jetbrains.com/docs/intellij/ide-infrastructure.html#webpage", "url": "https://plugins.jetbrains.com/docs/intellij/ide-infrastructure.html", "name": "IDE Infrastructure | IntelliJ Platform Plugin SDK", "description": "", "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "https://plugins.jetbrains.com/docs/intellij/#website", "url": "https://plugins.jetbrains.com/docs/intellij/", "name": "IntelliJ Platform Plugin SDK Help" }</script><!-- End Schema.org --></head>    <body data-id="ide_infrastructure.md" data-main-title="IDE Infrastructure" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Part II — Base Platform"  data-edit-url="https://github.com/JetBrains/intellij-sdk-docs/edit/main/topics/basics/ide_infrastructure.md"  >  <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>IntelliJ Platform Plugin SDK  Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select class="select _shortcuts" height="1" id="switch-shortcuts">      </select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="ide_infrastructure.md" id="ide_infrastructure.md"  >IDE Infrastructure</h1><section class="chapter"  ><h2 id="logging" data-toc="logging"  >Logging</h2><aside data-type="tip" class="prompt" data-title="" id="c6582f98_112" ><p id="c6582f98_113" >If your plugin uses <span class="control" id="c6582f98_114" >log4j</span> library directly: it is removed from IntelliJ Platform in 2022.1; please see this <a href="https://blog.jetbrains.com/platform/2022/02/removing-log4j-from-the-intellij-platform/" id="c6582f98_115"   data-external="true" rel="noopener noreferrer" >blog post</a> for migration instructions.</p></aside><p id="c6582f98_116" >The IntelliJ platform uses <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/util/src/com/intellij/openapi/diagnostic/Logger.java" id="c6582f98_117"   data-external="true" rel="noopener noreferrer" ><code class="code " id="c6582f98_118"  >Logger</code></a> abstraction class to shield from underlying logging implementation and configuration.</p><p id="c6582f98_119" >Plugins should obtain a dedicated instance:</p><div class="tabs" id="c6582f98_120"><div class="tabs__content" data-gtm="tab" id="c6582f98_121"   data-title="Java" ><div class="code-block" data-lang="java"    data-title="Java"     >
import com.intellij.openapi.diagnostic.Logger;

public class MyPluginClass {

  private static final Logger LOG = Logger.getInstance(MyPluginClass.class);

  public void someMethod() {
    LOG.info(&quot;someMethod() was called&quot;);
  }

}
</div></div><div class="tabs__content" data-gtm="tab" id="c6582f98_123"   data-title="Kotlin" ><div class="code-block" data-lang="kotlin"    data-title="Kotlin"     >
private val LOG = logger&lt;MyPluginClass&gt;()

class MyPluginClass {

  fun someMethod() {
    LOG.info(&quot;someMethod() was called&quot;)
  }
}
</div><p id="c6582f98_125" >If logging is used only to report exceptions, use convenience method <code class="code " id="c6582f98_126"  >thisLogger()</code>:</p><div class="code-block" data-lang="kotlin"    data-title="Kotlin"     >
try {
  // some code
}
catch (e: Throwable) {
  thisLogger().error(&quot;some code failed&quot;, e)
}
</div></div></div><p id="c6582f98_128" >By default, all messages with level <code class="code " id="c6582f98_129"  >INFO</code> and higher are written to log output file <span class="filepath" id="c6582f98_130" >idea.log</span>. To enable <code class="code " id="c6582f98_131"  >DEBUG</code>/<code class="code " id="c6582f98_132"  >TRACE</code> logging for specific categories, use .</p><p id="c6582f98_134" >To locate the log file, choose the  action. When <a href="enabling-internal.html" id="c6582f98_136" data-tooltip="某些工具例如内部操作菜单, 只有在IntelliJ IDEA的内部模式启用时才能看到."  >internal mode</a> is enabled, the currently running IDE log file can be opened using .</p><p id="c6582f98_138" >To locate it for a specific installation, see this <a href="https://intellij-support.jetbrains.com/hc/en-us/articles/206544519" id="c6582f98_139"   data-external="true" rel="noopener noreferrer" >Knowledge Base article</a>. See <a href="ide-development-instance.html#the-development-instance-sandbox-directory" id="c6582f98_140" data-tooltip="The Sandbox Home directory contains the settings, caches, logs, and plugins for a Development Instance of the IDE. This information is stored in a different location than for the installed IDE itself."  >Development Instance Sandbox Directory</a> on how to find it for development instances.</p><p id="c6582f98_141" >See <a href="testing-faq.html" id="c6582f98_142" data-tooltip="This page lists a number of common questions/issues and techniques useful for testing plugins."  >Testing FAQ</a> on how to enable <code class="code " id="c6582f98_143"  >DEBUG</code>/<code class="code " id="c6582f98_144"  >TRACE</code> level logging during tests, and obtain separate logs for failing tests.</p><p id="c6582f98_145" >To provide additional context for <a href="#error-reporting" id="c6582f98_146" data-tooltip="The IDE will show fatal errors caught by itself as well as logging messages with ERROR level in the IDE Fatal Errors dialog:"  >reporting fatal errors</a>, use <code class="code " id="c6582f98_147"  >Logger.error()</code> methods taking additional <code class="code " id="c6582f98_148"  >Attachment</code> (see <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/core-impl/src/com/intellij/diagnostic/AttachmentFactory.java" id="c6582f98_149"   data-external="true" rel="noopener noreferrer" ><code class="code " id="c6582f98_150"  >AttachmentFactory</code></a>).</p></section><section class="chapter"  ><h2 id="error-reporting" data-toc="error-reporting"  >Error Reporting</h2><p id="c6582f98_151" >The IDE will show fatal errors caught by itself as well as logging messages with <code class="code " id="c6582f98_152"  >ERROR</code> level in the <span class="control" id="c6582f98_153" >IDE Fatal Errors</span> dialog:</p><ul class="list _ul" id="c6582f98_154"    ><li class="list__item" id="c6582f98_155" ><p>for IDE platform: in EAP releases or when running in <a href="enabling-internal.html" id="c6582f98_156" data-tooltip="某些工具例如内部操作菜单, 只有在IntelliJ IDEA的内部模式启用时才能看到."  >internal mode</a></p></li><li class="list__item" id="c6582f98_157" ><p>for third-party plugins: always</p></li></ul><p id="c6582f98_158" >For the latter, reporting is disabled by default — instead, there's an option to disable the plugin causing the exception.</p><p id="c6582f98_159" >To let users report such errors to the vendor, plugins can implement custom <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/platform-api/src/com/intellij/openapi/diagnostic/ErrorReportSubmitter.java" id="c6582f98_160"   data-external="true" rel="noopener noreferrer" ><code class="code " id="c6582f98_161"  >ErrorReportSubmitter</code></a> registered in <code class="code " id="c6582f98_162"  >com.intellij.errorHandler</code> extension point. See <a href="https://jb.gg/ipe?extensions=com.intellij.errorHandler" id="c6582f98_163"   data-external="true" rel="noopener noreferrer" >IntelliJ Platform Explorer</a> for existing implementations — ranging from pre-filling web-based issue tracker forms to fully automated submission to log monitoring systems. This <a href="https://www.plugin-dev.com/intellij/general/error-reporting/" id="c6582f98_164"   data-external="true" rel="noopener noreferrer" >tutorial</a> also offers a working solution for using <span class="emphasis" id="c6582f98_165" >Sentry</span>.</p><p id="c6582f98_166" >To disable red exclamation notification icon in status bar, invoke  and add <code class="code " id="c6582f98_168"  >idea.fatal.error.notification=disabled</code> in opened <span class="filepath" id="c6582f98_169" >idea.properties</span>.</p></section><section class="chapter"  ><h2 id="runtime-information" data-toc="runtime-information"  >Runtime Information</h2><p id="c6582f98_170" ><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/core-api/src/com/intellij/openapi/application/ApplicationInfo.java" id="c6582f98_171"   data-external="true" rel="noopener noreferrer" ><code class="code " id="c6582f98_172"  >ApplicationInfo</code></a> provides information on the IDE version and vendor. NOTE: to restrict compatibility, declare <a href="plugin-compatibility.html" id="c6582f98_173" data-tooltip="All products based on the IntelliJ Platform are built on the same underlying API. Some of these products share features built on top of the platform, such as Java support in IntelliJ IDEA and Android Studio. Underlying those shared features are shared components. When authoring a…"  >IDEs</a> and <a href="build-number-ranges.html" id="c6582f98_174" data-tooltip="Use this reference of build number ranges to specify the correct since-build and until-build values in your plugin descriptor. Setting the actual values in plugin.xml is managed by patchPluginXml Gradle task, see ."  >versions</a> via <span class="filepath" id="c6582f98_175" ><a href="plugin-configuration-file.html" id="c6582f98_176" data-tooltip="Plugin configuration file contains all the information about the plugin, as well as all registered extensions, actions, listeners, etc."  >plugin.xml</a></span>.</p><p id="c6582f98_177" >To obtain information about OS and Java VM, use <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/util/src/com/intellij/openapi/util/SystemInfo.java" id="c6582f98_178"   data-external="true" rel="noopener noreferrer" ><code class="code " id="c6582f98_179"  >SystemInfo</code></a>.</p><p id="c6582f98_180" >To access relevant configuration directories, see <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/util/src/com/intellij/openapi/application/PathManager.java" id="c6582f98_181"   data-external="true" rel="noopener noreferrer" ><code class="code " id="c6582f98_182"  >PathManager</code></a>.</p><p id="c6582f98_183" >To obtain unique installation UUID, use <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/platform-impl/src/com/intellij/openapi/application/PermanentInstallationID.java" id="c6582f98_184"   data-external="true" rel="noopener noreferrer" ><code class="code " id="c6582f98_185"  >PermanentInstallationID</code></a>.</p></section><section class="chapter"  ><h2 id="context-help" data-toc="context-help"  >Context Help</h2><p id="c6582f98_186" >To show custom context web-based help for your plugin's functionality (e.g., for <a href="dialog-wrapper.html" id="c6582f98_187" data-tooltip="The DialogWrapper is the base class which is supposed to be used for all modal dialogs (and some non-modal dialogs) shown in IntelliJ Platform."  >dialogs</a>), provide <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/platform-api/src/com/intellij/openapi/help/WebHelpProvider.java" id="c6582f98_188"   data-external="true" rel="noopener noreferrer" ><code class="code " id="c6582f98_189"  >WebHelpProvider</code></a> registered in <code class="code " id="c6582f98_190"  >com.intellij.webHelpProvider</code> extension point.</p></section><section class="chapter"  ><h2 id="running-tasks-once" data-toc="running-tasks-once"  >Running Tasks Once</h2><p id="c6582f98_191" >Use <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/ide-core/src/com/intellij/ide/util/RunOnceUtil.java" id="c6582f98_192"   data-external="true" rel="noopener noreferrer" ><code class="code " id="c6582f98_193"  >RunOnceUtil</code></a> to run a task exactly once per project/application.</p></section><section class="chapter"  ><h2 id="application-events" data-toc="application-events"  >Application Events</h2><p id="c6582f98_194" >Application lifecycle events can be tracked via <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/platform-impl/src/com/intellij/ide/AppLifecycleListener.java" id="c6582f98_195"   data-external="true" rel="noopener noreferrer" ><code class="code " id="c6582f98_196"  >AppLifecycleListener</code></a> <a href="plugin-listeners.html" id="c6582f98_197" data-tooltip="Listeners allow subscription to application and project events."  >listener</a>. See also <a href="plugin-components.html#application-startup" id="c6582f98_198" data-tooltip="Executing code on application startup should be avoided whenever possible because it slows down startup."  >Application Startup</a> and <a href="plugin-components.html#project-and-application-close" id="c6582f98_199" data-tooltip="To execute code on project closing or application shutdown, implement the Disposable interface in a Service and place the code in the dispose() method. Alternatively, use Disposer.register() passing a Project or Application service instance as the parent argument (see Choosing a…"  >Project and Application Close</a>.</p><p id="c6582f98_200" >Register <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/ide-core/src/com/intellij/openapi/application/ApplicationActivationListener.java" id="c6582f98_201"   data-external="true" rel="noopener noreferrer" ><code class="code " id="c6582f98_202"  >ApplicationActivationListener</code></a> <a href="plugin-listeners.html" id="c6582f98_203" data-tooltip="Listeners allow subscription to application and project events."  >listener</a> to be notified of &quot;application focused/unfocused&quot; events.</p></section><section class="chapter"  ><h2 id="power-save-mode" data-toc="power-save-mode"  >Power Save Mode</h2><p id="c6582f98_204" > can be enabled to limit power-consuming features on laptops. Use <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/core-api/src/com/intellij/ide/PowerSaveMode.java" id="c6582f98_206"   data-external="true" rel="noopener noreferrer" ><code class="code " id="c6582f98_207"  >PowerSaveMode</code></a> service and <code class="code " id="c6582f98_208"  >PowerSaveMode.Listener</code> topic to disable such features in your plugin accordingly.</p></section><section class="chapter"  ><h2 id="plugin-management" data-toc="plugin-management"  >Plugin Management</h2><p id="c6582f98_209" >Currently, installed plugins can be checked via <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/core-impl/src/com/intellij/ide/plugins/PluginManagerCore.java" id="c6582f98_210"   data-external="true" rel="noopener noreferrer" ><code class="code " id="c6582f98_211"  >PluginManagerCore.isPluginInstalled()</code></a>.</p><section class="chapter"  ><h3 id="plugin-suggestions" data-toc="plugin-suggestions"  >Plugin Suggestions</h3><p id="c6582f98_212" >For specific features (e.g., <a href="registering-file-type.html" id="c6582f98_213" data-tooltip="The first step in developing a custom language plugin is registering a file type associated with the language."  >File Type</a>, <a href="facet.html" id="c6582f98_214" data-tooltip="A facet represents configuration specific for a particular framework/technology, associated with a module. A module can have multiple facets. E.g. Spring Framework specific configuration is stored in a Spring facet."  >Facet</a>, ...), the IDE will suggest installing matching plugins automatically. See <a href="https://plugins.jetbrains.com/docs/marketplace/intellij-plugin-recommendations.html" id="c6582f98_215"   data-external="true" rel="noopener noreferrer" >Plugin Recommendations</a> in Marketplace documentation for details.</p><p id="c6582f98_216" >To suggest other relevant plugins, use <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/platform-impl/src/com/intellij/openapi/updateSettings/impl/pluginsAdvertisement/PluginsAdvertiser.kt" id="c6582f98_217"   data-external="true" rel="noopener noreferrer" ><code class="code " id="c6582f98_218"  >PluginsAdvertiser.installAndEnable()</code></a>.</p></section><section class="chapter"  ><h3 id="deprecating-a-plugin" data-toc="deprecating-a-plugin"  >Deprecating a Plugin</h3><p id="c6582f98_219" >To suggest replacing the currently installed deprecated plugin with the new one, implement <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/platform-api/src/com/intellij/ide/plugins/PluginReplacement.java" id="c6582f98_220"   data-external="true" rel="noopener noreferrer" ><code class="code " id="c6582f98_221"  >PluginReplacement</code></a> registered in <code class="code " id="c6582f98_222"  >com.intellij.pluginReplacement</code> extension point.</p></section></section><div class="last-modified"> Last modified: 29 九月 2022</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="messaging-infrastructure.html">Messaging Infrastructure</a>   <a class="navigation-links__next" href="user-interface-components.html">User Interface Components</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/storage/help-app/v5/app.js"></script></body></html>