<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8">  <meta name="built-on" content="2022-09-29T19:15:57.0821716"><meta name="build-number" content="${buildNumber}">    <meta name="keywords" content="">  <title>Testing FAQ | IntelliJ Platform Plugin SDK</title><script id="virtual-toc-data" type="application/json">[{"id":"useful-classes","level":0,"title":"Useful Classes","anchor":"#useful-classes"},{"id":"issues","level":0,"title":"Issues","anchor":"#issues"},{"id":"techniques","level":0,"title":"Techniques","anchor":"#techniques"}]</script>   <link href="https://resources.jetbrains.com/storage/help-app/v5/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Testing FAQ | IntelliJ Platform Plugin SDK"/><meta property="og:description" content=""/><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"/><meta property="og:site_name" content="IntelliJ Platform Plugin SDK Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="https://plugins.jetbrains.com/docs/intellij/testing-faq.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@JBPlatform"><meta name="twitter:title" content="Testing FAQ | IntelliJ Platform Plugin SDK"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@JBPlatform"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "https://plugins.jetbrains.com/docs/intellij/testing-faq.html#webpage", "url": "https://plugins.jetbrains.com/docs/intellij/testing-faq.html", "name": "Testing FAQ | IntelliJ Platform Plugin SDK", "description": "", "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "https://plugins.jetbrains.com/docs/intellij/#website", "url": "https://plugins.jetbrains.com/docs/intellij/", "name": "IntelliJ Platform Plugin SDK Help" }</script><!-- End Schema.org --></head>    <body data-id="testing_faq.md" data-main-title="Testing FAQ" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Part VI — Testing"  data-edit-url="https://github.com/JetBrains/intellij-sdk-docs/edit/main/topics/basics/testing_plugins/testing_faq.md"  >  <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>IntelliJ Platform Plugin SDK  Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select class="select _shortcuts" height="1" id="switch-shortcuts">      </select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="testing_faq.md" id="testing_faq.md"  >Testing FAQ</h1><p id="221c3bf_143" >This page lists a number of common questions/issues and techniques useful for testing plugins.</p><section class="chapter"  ><h2 id="useful-classes" data-toc="useful-classes"  >Useful Classes</h2><ul class="list _ul" id="221c3bf_144"    ><li class="list__item" id="221c3bf_145" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/testFramework/UsefulTestCase.java" id="221c3bf_146"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_147"  >UsefulTestCase</code></a></p></li><li class="list__item" id="221c3bf_148" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/testFramework/PlatformTestUtil.java" id="221c3bf_149"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_150"  >PlatformTestUtil</code></a></p></li><li class="list__item" id="221c3bf_151" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/testFramework/fixtures/CodeInsightTestUtil.java" id="221c3bf_152"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_153"  >CodeInsightTestUtil</code></a></p></li><li class="list__item" id="221c3bf_154" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/testFramework/EditorTestUtil.java" id="221c3bf_155"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_156"  >EditorTestUtil</code></a></p></li><li class="list__item" id="221c3bf_157" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/testFramework/PsiTestUtil.java" id="221c3bf_158"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_159"  >PsiTestUtil</code></a></p></li><li class="list__item" id="221c3bf_160" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/testFramework/VfsTestUtil.java" id="221c3bf_161"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_162"  >VfsTestUtil</code></a></p></li><li class="list__item" id="221c3bf_163" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/openapi/util/io/IoTestUtil.java" id="221c3bf_164"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_165"  >IoTestUtil</code></a></p></li></ul><section class="chapter"  ><h3 id="ui" data-toc="ui"  >UI</h3><ul class="list _ul" id="221c3bf_166"    ><li class="list__item" id="221c3bf_167" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/testFramework/ProjectViewTestUtil.java" id="221c3bf_168"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_169"  >ProjectViewTestUtil</code></a></p></li><li class="list__item" id="221c3bf_170" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/testFramework/fixtures/TestLookupElementPresentation.java" id="221c3bf_171"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_172"  >TestLookupElementPresentation</code></a></p></li><li class="list__item" id="221c3bf_173" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/ui/IconTestUtil.java" id="221c3bf_174"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_175"  >IconTestUtil</code></a></p></li><li class="list__item" id="221c3bf_176" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/ui/tree/TreeTestUtil.java" id="221c3bf_177"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_178"  >TreeTestUtil</code></a></p></li></ul></section></section><section class="chapter"  ><h2 id="issues" data-toc="issues"  >Issues</h2><section class="chapter"  ><h3 id="no-tests-found-targeting-20213" data-toc="no-tests-found-targeting-20213"  >&quot;No Tests Found&quot; targeting 2021.3+</h3><p id="221c3bf_179" >Please see <a href="https://plugins.jetbrains.com/docs/intellij/api-changes-list-2021.html#20213" id="221c3bf_180"   data-external="true" rel="noopener noreferrer" >notes</a>.</p></section><section class="chapter"  ><h3 id="how-to-avoid-flaky-tests" data-toc="how-to-avoid-flaky-tests"  >How to avoid flaky tests?</h3><p id="221c3bf_181" >Always call <code class="code " id="221c3bf_182"  >super.tearDown()</code> inside <code class="code " id="221c3bf_183"  >finally {..}</code> block of your test class to avoid leaks and side effects from previously run (failed) tests:</p><div class="code-block" data-lang="java"         >
void tearDown() {
  try {
    // test specific tear down calls
  }
  catch (Exception e) {
    addSuppressedException(e);
  }
  finally {
    super.tearDown();
  }
}
</div><p id="221c3bf_185" >Avoid OS-specific assumptions (e.g., filesystem case-sensitivity, hardcoded separator instead of <code class="code " id="221c3bf_186"  >java.io.File.separator</code>, default encoding, line endings).</p><p id="221c3bf_187" >Use <span class="emphasis" id="221c3bf_188" >ordered</span> collections or <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/testFramework/UsefulTestCase.java" id="221c3bf_189"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_190"  >UsefulTestCase.assertUnorderedCollection()</code></a>.</p><p id="221c3bf_191" >Code deferring execution (e.g., via <code class="code " id="221c3bf_192"  >Application.invokeLater()</code>) might not run during test execution (and possibly fails in production, too). Use <code class="code " id="221c3bf_193"  >Application.invokeLater(runnable, myProject.getDisposed())</code>.</p></section><section class="chapter"  ><h3 id="how-to-avoid-test-failure-when-using-resources" data-toc="how-to-avoid-test-failure-when-using-resources"  >How to avoid test failure when using resources?</h3><p id="221c3bf_194" >In some situations, added or changed files (e.g. XML DTDs provided by a plugin) are not refreshed in <a href="virtual-file-system.html" id="221c3bf_195" data-tooltip="The Virtual File System (VFS) is a component of the IntelliJ Platform that encapsulates most of its activity for working with files represented as Virtual File."  >Virtual File System</a>. In such cases, simply delete <span class="filepath" id="221c3bf_196" >test-system/caches</span> in your <a href="ide-development-instance.html#the-development-instance-sandbox-directory" id="221c3bf_197" data-tooltip="The Sandbox Home directory contains the settings, caches, logs, and plugins for a Development Instance of the IDE. This information is stored in a different location than for the installed IDE itself."  >sandbox directory</a> and try again.</p></section><section class="chapter"  ><h3 id="how-to-enable-debugtrace-logging" data-toc="how-to-enable-debugtrace-logging"  >How to enable DEBUG/TRACE logging?</h3><p id="221c3bf_198" >Provide JVM system properties (Gradle: via <code class="code " id="221c3bf_199"  >systemProperty</code> for <code class="code " id="221c3bf_200"  >test</code> task) <code class="code " id="221c3bf_201"  >idea.log.debug.categories</code> or <code class="code " id="221c3bf_202"  >idea.log.trace.categories</code>, respectively. Multiple categories can be set using a comma separated value list.</p></section><section class="chapter"  ><h3 id="how-to-get-separate-logs-for-failing-tests" data-toc="how-to-get-separate-logs-for-failing-tests"  >How to get separate logs for failing tests?</h3><p id="221c3bf_203" >Set system property <code class="code " id="221c3bf_204"  >idea.split.test.logs</code> to <code class="code " id="221c3bf_205"  >true</code> to generate separate test log files in <span class="filepath" id="221c3bf_206" >splitTestLogs</span> subdirectory for failing tests (WARN/ERROR level messages) (2021.3).</p></section></section><section class="chapter"  ><h2 id="techniques" data-toc="techniques"  >Techniques</h2><section class="chapter"  ><h3 id="how-to-mark-test-only-elements-in-production-code" data-toc="how-to-mark-test-only-elements-in-production-code"  >How to mark test-only elements in production code?</h3><p id="221c3bf_207" >Annotate with <a href="https://github.com/JetBrains/java-annotations/blob/master/common/src/main/java/org/jetbrains/annotations/TestOnly.java" id="221c3bf_208"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_209"  >org.jetbrains.annotations.TestOnly</code></a>, usages will be highlighted via inspection <span class="control" id="221c3bf_210" >JVM languages | Test-only usage in production code</span>.</p></section><section class="chapter"  ><h3 id="how-to-run-tests-for-all-files-in-a-directory" data-toc="how-to-run-tests-for-all-files-in-a-directory"  >How to run tests for all files in a directory?</h3><p id="221c3bf_211" >Use <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/testFramework/FileBasedTestCaseHelper.java" id="221c3bf_212"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_213"  >FileBasedTestCaseHelper</code></a>, please see its javadoc for instructions.</p></section><section class="chapter"  ><h3 id="how-to-modify-setup-on-a-per-test-basis" data-toc="how-to-modify-setup-on-a-per-test-basis"  >How to modify setup on a per-test basis?</h3><p id="221c3bf_214" >Use <code class="code " id="221c3bf_215"  >UsefulTestCase.getTestName()</code> or create your own annotation(s) which can be checked via <code class="code " id="221c3bf_216"  >UsefulTestCase.annotatedWith()</code>.</p></section><section class="chapter"  ><h3 id="how-to-run-a-performance-test" data-toc="how-to-run-a-performance-test"  >How to run a performance test?</h3><p id="221c3bf_217" >Use <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/testFramework/PlatformTestUtil.java" id="221c3bf_218"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_219"  >PlatformTestUtil.startPerformanceTest()</code></a> to assert machine-adjusted metrics.</p></section><section class="chapter"  ><h3 id="how-to-dispatch-pending-ui-events" data-toc="how-to-dispatch-pending-ui-events"  >How to dispatch pending UI events?</h3><p id="221c3bf_220" >Use <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/testFramework/PlatformTestUtil.java" id="221c3bf_221"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_222"  >PlatformTestUtil.dispatchAllInvocationEventsInIdeEventQueue()</code></a>.</p></section><section class="chapter"  ><h3 id="how-to-disable-stderr-logging" data-toc="how-to-disable-stderr-logging"  >How to disable stderr logging?</h3><p id="221c3bf_223" >Use <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/util/src/com/intellij/openapi/diagnostic/DefaultLogger.java" id="221c3bf_224"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_225"  >DefaultLogger.disableStderrDumping()</code></a> passing <code class="code " id="221c3bf_226"  >getTestRootDisposable()</code>.</p></section><section class="chapter"  ><h3 id="how-to-register-a-resource-dtd-xsd-temporarily" data-toc="how-to-register-a-resource-dtd-xsd-temporarily"  >How to register a resource (DTD, XSD) temporarily?</h3><p id="221c3bf_227" >Use <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/xml/xml-psi-impl/src/com/intellij/javaee/ExternalResourceManagerExImpl.java" id="221c3bf_228"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_229"  >ExternalResourceManagerExImpl.registerResourceTemporarily()</code></a> passing <code class="code " id="221c3bf_230"  >getTestRootDisposable()</code>.</p></section><section class="chapter"  ><h3 id="how-to-replace-componentservice-in-tests" data-toc="how-to-replace-componentservice-in-tests"  >How to replace component/service in tests?</h3><p id="221c3bf_231" >Provide dedicated test implementation via <code class="code " id="221c3bf_232"  >testServiceImplementation</code> in <a href="plugin-services.html#declaring-a-service" id="221c3bf_233" data-tooltip="To register a non-Light Service, distinct extension points are provided for each type:"  >service declaration</a>, or use <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/testFramework/ServiceContainerUtil.kt" id="221c3bf_234"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_235"  >ServiceContainerUtil</code></a>.</p></section><section class="chapter"  ><h3 id="how-to-replace-extension-points-in-tests" data-toc="how-to-replace-extension-points-in-tests"  >How to replace extension points in tests?</h3><p id="221c3bf_236" >Use <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/testFramework/ExtensionTestUtil.kt" id="221c3bf_237"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_238"  >ExtensionTestUtil</code></a>.</p></section><section class="chapter"  ><h3 id="how-to-wait-for-a-specified-amount-of-time" data-toc="how-to-wait-for-a-specified-amount-of-time"  >How to wait for a specified amount of time?</h3><p id="221c3bf_239" >If possible, use <a href="#how-to-wait-for-condition-with-timeout" id="221c3bf_240" data-tooltip="Use WaitFor."  >How to wait for condition with timeout?</a> approach. Otherwise, call <code class="code " id="221c3bf_241"  >com.intellij.util.TimeoutUtil.sleep()</code>.</p></section><section class="chapter"  ><h3 id="how-to-wait-for-condition-with-timeout" data-toc="how-to-wait-for-condition-with-timeout"  >How to wait for condition with timeout?</h3><p id="221c3bf_242" >Use <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/util/src/com/intellij/util/WaitFor.java" id="221c3bf_243"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_244"  >WaitFor</code></a>.</p></section><section class="chapter"  ><h3 id="how-to-test-a-jvm-language" data-toc="how-to-test-a-jvm-language"  >How to test a JVM language?</h3><p id="221c3bf_245" >Plugins supporting a JVM language may require JDK and language standard library to be set up in a test project, so that classes like <code class="code " id="221c3bf_246"  >java.lang.String</code> can be correctly resolved during tests. Tests extending <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/java/testFramework/src/com/intellij/testFramework/fixtures/LightJavaCodeInsightFixtureTestCase.java" id="221c3bf_247"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_248"  >LightJavaCodeInsightFixtureTestCase</code></a> use one of the mock JDKs distributed with the <a href="https://github.com/JetBrains/intellij-community" id="221c3bf_249"   data-external="true" rel="noopener noreferrer" >IntelliJ Community project</a> sources (notice <span class="filepath" id="221c3bf_250" >java/mockJDK-$JAVA_VERSION$</span> directories). These JAR files are not available in plugin project dependencies, so the IntelliJ Community sources must be checked out to the machine running the tests, and sources' location must be provided to the test framework. It's done by setting the <code class="code " id="221c3bf_251"  >idea.home.path</code> system property to the absolute path of the checked-out sources in the <code class="code " id="221c3bf_252"  >test</code> task configuration:</p><div class="tabs" id="221c3bf_253"><div class="tabs__content" data-gtm="tab" id="221c3bf_254"   data-title="Kotlin" ><div class="code-block" data-lang="kotlin"    data-title="Kotlin"     >
test {
  systemProperty(&quot;idea.home.path&quot;, &quot;/path/to/intellij-community-sources&quot;)
}
</div></div><div class="tabs__content" data-gtm="tab" id="221c3bf_256"   data-title="Groovy" ><div class="code-block" data-lang="groovy"    data-title="Groovy"     >
test {
  systemProperty &quot;idea.home.path&quot;, &quot;/path/to/intellij-community-sources&quot;
}
</div></div></div><p id="221c3bf_258" >The default JDK version used by the test framework depends on the target platform version and is the latest supported version. The easiest way to change the JDK version to a custom one is by overriding <code class="code " id="221c3bf_259"  >LightJavaCodeInsightFixtureTestCase.getProjectDescriptor()</code> and using one of the predefined project descriptors in <code class="code " id="221c3bf_260"  >LightJavaCodeInsightFixtureTestCase</code>. If a project descriptor requires more customizations, its <code class="code " id="221c3bf_261"  >getSdk()</code> method can use one of the <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/java/testFramework/src/com/intellij/testFramework/IdeaTestUtil.java" id="221c3bf_262"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_263"  >IdeaTestUtil.getMockJdk*()</code></a> methods.</p><p id="221c3bf_264" >Sometimes, testing a JVM language requires adding standard or other libraries to a test project. If a required library is available in the Maven repository, use <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/java/testFramework/src/com/intellij/testFramework/fixtures/MavenDependencyUtil.java" id="221c3bf_265"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_266"  >MavenDependencyUtil</code></a>, e.g.:</p><div class="code-block" data-lang="java"         >
MavenDependencyUtil.addFromMaven(model,
    &quot;org.jetbrains.kotlin:kotlin-stdlib:1.6.10&quot;);
</div><p id="221c3bf_268" >For <a href="light-and-heavy-tests.html" id="221c3bf_269" data-tooltip="Plugin tests run in a real, rather than mocked, IntelliJ Platform environment and use real implementations for most application and project services."  >light tests</a>, use convenience method <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/java/testFramework/src/com/intellij/testFramework/fixtures/DefaultLightProjectDescriptor.java" id="221c3bf_270"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_271"  >DefaultLightProjectDescriptor.withRepositoryLibrary()</code></a> and <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/java/testFramework/src/com/intellij/testFramework/builders/JavaModuleFixtureBuilder.java" id="221c3bf_272"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_273"  >JavaModuleFixtureBuilder.addMavenLibrary()</code></a> for <a href="light-and-heavy-tests.html" id="221c3bf_274" data-tooltip="Plugin tests run in a real, rather than mocked, IntelliJ Platform environment and use real implementations for most application and project services."  >heavy tests</a>.</p><p id="221c3bf_275" >If a required library is an unpublished JAR file, use <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/testFramework/src/com/intellij/testFramework/PsiTestUtil.java" id="221c3bf_276"   data-external="true" rel="noopener noreferrer" ><code class="code " id="221c3bf_277"  >PsiTestUtil.addLibrary()</code></a> or <code class="code " id="221c3bf_278"  >addProjectLibrary()</code> method and the JAR file path, e.g.:</p><div class="code-block" data-lang="java"         >
PsiTestUtil.addLibrary(model,
    &quot;internal-library&quot;, getTestDataPath(), &quot;internal-library-2.0.jar&quot;);
</div><aside data-type="tip" class="prompt" data-title="" id="221c3bf_280" ><p id="221c3bf_281" >If a topic you are interested in is not covered in the above sections, let us know via the &quot;<span class="control" id="221c3bf_282" >Was this page helpful?</span>&quot; feedback form below or <a href="getting-help.html#problems-with-the-guide" id="221c3bf_283" data-tooltip="If you're having problems with the guide itself, such as missing, incorrect, or confusing content, please raise an issue on YouTrack. If the problem is easily solved, you can also submit a Pull Request."  >other channels</a>.</p><p id="221c3bf_284" >Please be specific about the topics and reasons for adding them, and leave your email in case we need more details.</p></aside></section></section><div class="last-modified"> Last modified: 29 九月 2022</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="testing-highlighting.html">Testing Highlighting</a>   <a class="navigation-links__next" href="custom-language-support.html">Custom Language Support</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/storage/help-app/v5/app.js"></script></body></html>