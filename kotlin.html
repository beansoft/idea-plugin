<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8">  <meta name="built-on" content="2022-09-28T11:33:50.0691045"><meta name="build-number" content="${buildNumber}">    <meta name="keywords" content="">  <title>Kotlin for Plugin Developers | IntelliJ Platform Plugin SDK</title><script id="virtual-toc-data" type="application/json">[{"id":"why-kotlin","level":0,"title":"Why Kotlin?","anchor":"#why-kotlin"},{"id":"adding-kotlin-support","level":0,"title":"Adding Kotlin Support","anchor":"#adding-kotlin-support"},{"id":"kotlin-gradle-plugin","level":0,"title":"Kotlin Gradle Plugin","anchor":"#kotlin-gradle-plugin"},{"id":"ui-in-kotlin","level":0,"title":"UI in Kotlin","anchor":"#ui-in-kotlin"},{"id":"handling-kotlin-code","level":0,"title":"Handling Kotlin Code","anchor":"#handling-kotlin-code"},{"id":"caution","level":0,"title":"Caution","anchor":"#caution"},{"id":"examples","level":0,"title":"Examples","anchor":"#examples"}]</script>   <link href="https://resources.jetbrains.com/storage/help-app/v5/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Kotlin for Plugin Developers | IntelliJ Platform Plugin SDK"/><meta property="og:description" content=""/><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"/><meta property="og:site_name" content="IntelliJ Platform Plugin SDK Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="https://plugins.jetbrains.com/docs/intellij/kotlin.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@JBPlatform"><meta name="twitter:title" content="Kotlin for Plugin Developers | IntelliJ Platform Plugin SDK"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@JBPlatform"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "https://plugins.jetbrains.com/docs/intellij/kotlin.html#webpage", "url": "https://plugins.jetbrains.com/docs/intellij/kotlin.html", "name": "Kotlin for Plugin Developers | IntelliJ Platform Plugin SDK", "description": "", "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "https://plugins.jetbrains.com/docs/intellij/#website", "url": "https://plugins.jetbrains.com/docs/intellij/", "name": "IntelliJ Platform Plugin SDK Help" }</script><!-- End Schema.org --></head>    <body data-id="kotlin.md" data-main-title="Kotlin for Plugin Developers" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Part I — 插件"  data-edit-url="https://github.com/JetBrains/intellij-sdk-docs/edit/main/topics/tutorials/kotlin.md"  >  <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>IntelliJ Platform Plugin SDK  Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select class="select _shortcuts" height="1" id="switch-shortcuts">      </select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="kotlin.md" id="kotlin.md"  >Kotlin for Plugin Developers</h1><section class="chapter"  ><h2 id="why-kotlin" data-toc="why-kotlin"  >Why Kotlin?</h2><p id="d68a7d7a_7" >Using <a href="https://kotlinlang.org" id="d68a7d7a_8"   data-external="true" rel="noopener noreferrer" >Kotlin</a> to write plugins for the IntelliJ Platform is very similar to writing plugins in Java. Existing plugin developers can get started by converting boilerplate Java classes to their Kotlin equivalents by using the <a href="https://kotlinlang.org/docs/mixing-java-kotlin-intellij.html#converting-an-existing-java-file-to-kotlin-with-j2k" id="d68a7d7a_9"   data-external="true" rel="noopener noreferrer" >J2K compiler</a> bundled with the IntelliJ Platform (versions 143.+), and developers can easily mix and match Kotlin classes with their existing Java code.</p><p id="d68a7d7a_10" >In addition to <a href="https://kotlinlang.org/docs/null-safety.html" id="d68a7d7a_11"   data-external="true" rel="noopener noreferrer" >null safety</a> and <a href="https://kotlinlang.org/docs/type-safe-builders.html" id="d68a7d7a_12"   data-external="true" rel="noopener noreferrer" >type-safe builders</a>, the Kotlin language offers many convenient features for plugin development, which make plugins easier to read and simpler to maintain. Much like <a href="https://kotlinlang.org/docs/android-overview.html" id="d68a7d7a_13"   data-external="true" rel="noopener noreferrer" >Kotlin for Android</a>, the IntelliJ Platform makes extensive use of callbacks, which are easy to express as <a href="https://kotlinlang.org/docs/lambdas.html" id="d68a7d7a_14"   data-external="true" rel="noopener noreferrer" >lambdas</a> in Kotlin.</p><p id="d68a7d7a_15" >Likewise, it is easy to customize the behavior of internal classes in IntelliJ IDEA, with <a href="https://kotlinlang.org/docs/extensions.html" id="d68a7d7a_16"   data-external="true" rel="noopener noreferrer" >extensions</a>. For example, it is common practice to <a href="https://www.slf4j.org/faq.html#logging_performance" id="d68a7d7a_17"   data-external="true" rel="noopener noreferrer" >guard logging statements</a> to avoid the cost of parameter construction, leading to the following ceremony when using the log:</p><div class="code-block" data-lang="java"         >
if (logger.isDebugEnabled()) {
  logger.debug(&quot;...&quot;);
}
</div><p id="d68a7d7a_19" >We can achieve the same result more succinctly in Kotlin, by declaring the following extension method:</p><div class="code-block" data-lang="kotlin"         >
inline fun Logger.debug(lazyMessage: () -&gt; String) {
  if (isDebugEnabled) {
    debug(lazyMessage())
  }
}
</div><p id="d68a7d7a_21" >Now we can directly write <code class="code " id="d68a7d7a_22"  >logger.debug { &quot;...&quot; }</code> to receive all the benefits of lightweight logging, with none of the verbosity. With practice, you will be able to recognize many idioms in the IntelliJ Platform that can be simplified with Kotlin. To learn more about building IntelliJ Platform plugins with Kotlin, this tutorial will help you get started.</p></section><section class="chapter"  ><h2 id="adding-kotlin-support" data-toc="adding-kotlin-support"  >Adding Kotlin Support</h2><aside data-type="tip" class="prompt" data-title="" id="d68a7d7a_23" ><p id="d68a7d7a_24" >The <a href="github-template.html" id="d68a7d7a_25" data-tooltip="IntelliJ Platform Plugin Template is a repository that provides a pure boilerplate template to make it easier to create a new plugin project using the recommended Gradle setup."  >IntelliJ Platform Plugin Template</a> provides a preconfigured project using Kotlin.</p><p id="d68a7d7a_26" >See also <a href="https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/kotlin_demo" id="d68a7d7a_27"   data-external="true" rel="noopener noreferrer" >kotlin_demo</a> for a minimal sample plugin.</p></aside><p id="d68a7d7a_28" >IntelliJ IDEA bundles the necessary Kotlin plugin, requiring no further configuration. For detailed instructions, please refer to the <a href="https://kotlinlang.org/docs/getting-started.html" id="d68a7d7a_29"   data-external="true" rel="noopener noreferrer" >Kotlin documentation</a>.</p><section class="chapter"  ><h3 id="kotlin-standard-library" data-toc="kotlin-standard-library"  >Kotlin Standard Library</h3><p id="d68a7d7a_30" >Since Kotlin 1.4, a dependency on the standard library <code class="code " id="d68a7d7a_31"  >stdlib</code> is added automatically (<a href="https://kotlinlang.org/api/latest/jvm/stdlib/" id="d68a7d7a_32"   data-external="true" rel="noopener noreferrer" >API Docs</a>). In most cases, it is not necessary to include it in the plugin distribution as the platform already bundles it.</p><p id="d68a7d7a_33" >To opt out, add this line in <span class="filepath" id="d68a7d7a_34" >gradle.properties</span>:</p><div class="code-block" data-lang="none"         >
kotlin.stdlib.default.dependency = false
</div><p id="d68a7d7a_36" >The presence of this Gradle property is checked by the <a href="tools-gradle-intellij-plugin.html" id="d68a7d7a_37" data-tooltip="The Gradle IntelliJ Plugin is a plugin for the Gradle build system to help configuring your environment for building, testing, verifying, and publishing plugins for IntelliJ-based IDEs."  >Gradle IntelliJ Plugin</a> with the <a href="tools-gradle-intellij-plugin.html#tasks-verifypluginconfiguration" id="d68a7d7a_38" data-tooltip="Validates the plugin project configuration:"  >verifyPluginConfiguration</a>. If the property is not present, a warning will be reported during the plugin configuration verification, as it is a common problem when Kotlin stdlib gets bundled within the plugin archive. If it is expected to make Kotlin stdlib present in the final archive, explicitly specify it with <code class="code " id="d68a7d7a_39"  >kotlin.stdlib.default.dependency = true</code>.</p><p id="d68a7d7a_40" >If a plugin supports <a href="build-number-ranges.html" id="d68a7d7a_41" data-tooltip="Use this reference of build number ranges to specify the correct since-build and until-build values in your plugin descriptor. Setting the actual values in plugin.xml is managed by patchPluginXml Gradle task, see ."  >multiple platform versions</a>, it must either target the lowest bundled <code class="code " id="d68a7d7a_42"  >stdlib</code> version or provide the specific version in plugin distribution.</p><div class="table-wrapper" ><table class=" wide" id="d68a7d7a_43"  ><thead><tr class=" ijRowHead" id="d68a7d7a_44" ><th id="d68a7d7a_45"    ><p>IntelliJ Platform version</p></th><th id="d68a7d7a_46"    ><p>Bundled <code class="code " id="d68a7d7a_47"  >stdlib</code> version</p></th></tr></thead><tbody ><tr class="" id="d68a7d7a_48" ><td id="d68a7d7a_49"    ><p>2022.2</p></td><td id="d68a7d7a_50"    ><p>1.6.21</p></td></tr><tr class="" id="d68a7d7a_51" ><td id="d68a7d7a_52"    ><p>2022.1</p></td><td id="d68a7d7a_53"    ><p>1.6.20</p></td></tr><tr class="" id="d68a7d7a_54" ><td id="d68a7d7a_55"    ><p>2021.3</p></td><td id="d68a7d7a_56"    ><p>1.5.10</p></td></tr><tr class="" id="d68a7d7a_57" ><td id="d68a7d7a_58"    ><p>2021.2</p></td><td id="d68a7d7a_59"    ><p>1.5.10</p></td></tr><tr class="" id="d68a7d7a_60" ><td id="d68a7d7a_61"    ><p>2021.1</p></td><td id="d68a7d7a_62"    ><p>1.4.32</p></td></tr><tr class="" id="d68a7d7a_63" ><td id="d68a7d7a_64"    ><p>2020.3</p></td><td id="d68a7d7a_65"    ><p>1.4.0</p></td></tr><tr class="" id="d68a7d7a_66" ><td id="d68a7d7a_67"    ><p>2020.2</p></td><td id="d68a7d7a_68"    ><p>1.3.70</p></td></tr><tr class="" id="d68a7d7a_69" ><td id="d68a7d7a_70"    ><p>2020.1</p></td><td id="d68a7d7a_71"    ><p>1.3.70</p></td></tr><tr class="" id="d68a7d7a_72" ><td id="d68a7d7a_73"    ><p>2019.3</p></td><td id="d68a7d7a_74"    ><p>1.3.31</p></td></tr><tr class="" id="d68a7d7a_75" ><td id="d68a7d7a_76"    ><p>2019.2</p></td><td id="d68a7d7a_77"    ><p>1.3.3</p></td></tr><tr class="" id="d68a7d7a_78" ><td id="d68a7d7a_79"    ><p>2019.1</p></td><td id="d68a7d7a_80"    ><p>1.3.11</p></td></tr></tbody ></table ></div><p id="d68a7d7a_81" >See <a href="https://kotlinlang.org/docs/gradle.html#dependency-on-the-standard-library" id="d68a7d7a_82"   data-external="true" rel="noopener noreferrer" >Dependency on the standard library</a> for more details.</p><aside data-type="tip" class="prompt" data-title="" id="d68a7d7a_83" ><p id="d68a7d7a_84" >If you need to add Kotlin Standard Library to your <span class="control" id="d68a7d7a_85" >test project</span> dependencies, see the <a href="testing-faq.html#how-to-test-a-jvm-language" id="d68a7d7a_86" data-tooltip="Plugins supporting a JVM language may require JDK and language standard library to be set up in a test project, so that classes like java.lang.String can be correctly resolved during tests. Tests extending LightJavaCodeInsightFixtureTestCase use one of the mock JDKs distributed with…"  >How to test a JVM language?</a> section.</p></aside></section><section class="chapter"  ><h3 id="other-bundled-kotlin-libraries" data-toc="other-bundled-kotlin-libraries"  >Other Bundled Kotlin Libraries</h3><p id="d68a7d7a_87" >Please see <a href="https://www.jetbrains.com/legal/third-party-software/" id="d68a7d7a_88"   data-external="true" rel="noopener noreferrer" >Third-Party Software and Licenses</a>.</p></section></section><section class="chapter"  ><h2 id="kotlin-gradle-plugin" data-toc="kotlin-gradle-plugin"  >Kotlin Gradle Plugin</h2><p id="d68a7d7a_89" >Plugins using the <a href="gradle-build-system.html" id="d68a7d7a_90" data-tooltip="The is the recommended solution for building IntelliJ Platform plugins. The plugin takes care of the dependencies of your plugin project — both the base IDE and other plugin dependencies. It provides tasks to run the IDE with your plugin and to package and publish your plugin to the…"  >Gradle Build System</a> use the <a href="https://kotlinlang.org/docs/gradle.html#targeting-the-jvm" id="d68a7d7a_91"   data-external="true" rel="noopener noreferrer" >Kotlin JVM Gradle plugin</a>.</p><p id="d68a7d7a_92" >See the <span class="filepath" id="d68a7d7a_93" >build.gradle.kts</span> from <a href="https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/kotlin_demo" id="d68a7d7a_94"   data-external="true" rel="noopener noreferrer" >kotlin_demo</a> sample plugin:</p><div class="code-block" data-lang="kotlin"       data-disable-link-processing="true"  ></div><section class="chapter"  ><h3 id="use-kotlin-for-gradle-build-scripts" data-toc="use-kotlin-for-gradle-build-scripts"  >Use Kotlin for Gradle Build Scripts</h3><p id="d68a7d7a_96" >Gradle also supports using Kotlin in build scripts: <span class="filepath" id="d68a7d7a_97" >build.gradle.kts</span>.</p><p id="d68a7d7a_98" >There are many good resources for learning how to write build scripts for an IntelliJ Platform plugin with Kotlin script, like <a href="https://github.com/intellij-rust/intellij-rust/blob/master/build.gradle.kts" id="d68a7d7a_99"   data-external="true" rel="noopener noreferrer" >intellij-rust</a>, <a href="https://github.com/JuliaEditorSupport/julia-intellij/blob/master/build.gradle.kts" id="d68a7d7a_100"   data-external="true" rel="noopener noreferrer" >julia-intellij</a>, <a href="https://github.com/covscript/covscript-intellij/blob/master/build.gradle.kts" id="d68a7d7a_101"   data-external="true" rel="noopener noreferrer" >covscript-intellij</a> or <a href="https://github.com/ice1000/intellij-zig/blob/master/build.gradle.kts" id="d68a7d7a_102"   data-external="true" rel="noopener noreferrer" >zig-intellij</a>.</p><p id="d68a7d7a_103" >Additionally, explore IntelliJ Platform Explorer's <a href="https://jb.gg/ipe?buildSystem=gradle_kts" id="d68a7d7a_104"   data-external="true" rel="noopener noreferrer" >list of open-source plugins</a> using Gradle KTS.</p></section></section><section class="chapter"  ><h2 id="ui-in-kotlin" data-toc="ui-in-kotlin"  >UI in Kotlin</h2><p id="d68a7d7a_105" >The recommended way to create UI forms with Kotlin is to use a <a href="kotlin-ui-dsl-version-2.html" id="d68a7d7a_106" data-tooltip="This page describes API available in IntelliJ Platform releases 2021.3 and later only."  >type safe DSL</a>. Using a GUI designer with Kotlin is currently <a href="https://youtrack.jetbrains.com/issue/KTIJ-791" id="d68a7d7a_107"   data-external="true" rel="noopener noreferrer" >not supported</a>.</p></section><section class="chapter"  ><h2 id="handling-kotlin-code" data-toc="handling-kotlin-code"  >Handling Kotlin Code</h2><p id="d68a7d7a_108" >If a plugin processes Kotlin code (e.g., providing inspections), it needs to add a dependency on the Kotlin plugin (Plugin ID <code class="code " id="d68a7d7a_109"  >org.jetbrains.kotlin</code>) itself. Please refer to <a href="plugin-dependencies.html" id="d68a7d7a_110" data-tooltip="A plugin may depend on classes from other plugins, either bundled, third-party, or by the same author. This document describes the syntax for declaring plugin dependencies and optional plugin dependencies. For more information about dependencies on the IntelliJ Platform modules, see…"  >Plugin Dependencies</a> for more information.</p><p id="d68a7d7a_111" >Depending on exact functionality, a plugin can also target <a href="uast.html" id="d68a7d7a_112" data-tooltip="UAST (Unified Abstract Syntax Tree) is an abstraction layer on the PSI of different JVM languages. It provides a unified API for working with common language elements like classes and method declarations, literal values, and control flow operators."  >UAST (Unified Abstract Syntax Tree)</a> to support multiple JVM languages, including Java and Kotlin.</p><section class="chapter"  ><h3 id="kotlin-code-faq" data-toc="kotlin-code-faq"  >Kotlin Code FAQ</h3><p id="d68a7d7a_113" ><a href="https://intellij-support.jetbrains.com/hc/en-us/community/posts/360010025120-Add-new-parameter-into-kotlin-data-class-from-IDEA-plugin?page=1#community_comment_360002950760" id="d68a7d7a_114"   data-external="true" rel="noopener noreferrer" >How to shorten references</a></p></section></section><section class="chapter"  ><h2 id="caution" data-toc="caution"  >Caution</h2><p id="d68a7d7a_115" >Plugins <span class="emphasis" id="d68a7d7a_116" >may</span> use <a href="https://kotlinlang.org/docs/classes.html" id="d68a7d7a_117"   data-external="true" rel="noopener noreferrer" >Kotlin classes</a> to implement declarations in the <a href="plugin-configuration-file.html" id="d68a7d7a_118" data-tooltip="Plugin configuration file contains all the information about the plugin, as well as all registered extensions, actions, listeners, etc."  >plugin configuration file</a>. When registering an extension, the platform uses a dependency injection framework to instantiate these classes. For this reason, plugins <span class="emphasis" id="d68a7d7a_119" >must not</span> use <a href="https://kotlinlang.org/docs/object-declarations.html" id="d68a7d7a_120"   data-external="true" rel="noopener noreferrer" >Kotlin objects</a> to implement any <span class="filepath" id="d68a7d7a_121" ><a href="plugin-configuration-file.html" id="d68a7d7a_122" data-tooltip="Plugin configuration file contains all the information about the plugin, as well as all registered extensions, actions, listeners, etc."  >plugin.xml</a></span> declarations.</p></section><section class="chapter"  ><h2 id="examples" data-toc="examples"  >Examples</h2><p id="d68a7d7a_123" >There are many <a href="https://jb.gg/ipe?language=kotlin" id="d68a7d7a_124"   data-external="true" rel="noopener noreferrer" >open-source Kotlin plugins</a> built on the IntelliJ Platform. For a readily available source of up to date examples and applications of the Kotlin language for building developer tools with the IntelliJ Platform, developers may look to these projects for inspiration:</p><ul class="list _ul" id="d68a7d7a_125"    ><li class="list__item" id="d68a7d7a_126" ><p><a href="https://github.com/chashnikov/IntelliJ-presentation-assistant" id="d68a7d7a_127"   data-external="true" rel="noopener noreferrer" >Presentation Assistant</a></p></li><li class="list__item" id="d68a7d7a_128" ><p><a href="https://github.com/intellij-rust/intellij-rust" id="d68a7d7a_129"   data-external="true" rel="noopener noreferrer" >Rust</a></p></li><li class="list__item" id="d68a7d7a_130" ><p><a href="https://github.com/Hannah-Sten/TeXiFy-IDEA" id="d68a7d7a_131"   data-external="true" rel="noopener noreferrer" >TeXiFy IDEA</a></p></li><li class="list__item" id="d68a7d7a_132" ><p><a href="https://github.com/JetBrains/intellij-plugins/tree/master/Deno" id="d68a7d7a_133"   data-external="true" rel="noopener noreferrer" >Deno</a></p></li></ul></section><div class="last-modified"> Last modified: 28 九月 2022</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="intellij-artifacts.html">IntelliJ Platform Artifacts Repositories</a>   <a class="navigation-links__next" href="plugin-signing.html">Plugin Signing</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/storage/help-app/v5/app.js"></script></body></html>