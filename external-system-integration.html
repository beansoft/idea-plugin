<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8">  <meta name="built-on" content="2022-09-28T11:33:50.3754319"><meta name="build-number" content="${buildNumber}">    <meta name="keywords" content="">  <title>External System Integration | IntelliJ Platform Plugin SDK</title><script id="virtual-toc-data" type="application/json">[{"id":"project-management","level":0,"title":"Project Management","anchor":"#project-management"},{"id":"auto-import","level":0,"title":"Auto-Import","anchor":"#auto-import"},{"id":"settings","level":0,"title":"Settings","anchor":"#settings"},{"id":"testing","level":0,"title":"Testing","anchor":"#testing"}]</script>   <link href="https://resources.jetbrains.com/storage/help-app/v5/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="External System Integration | IntelliJ Platform Plugin SDK"/><meta property="og:description" content=""/><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"/><meta property="og:site_name" content="IntelliJ Platform Plugin SDK Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="https://plugins.jetbrains.com/docs/intellij/external-system-integration.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@JBPlatform"><meta name="twitter:title" content="External System Integration | IntelliJ Platform Plugin SDK"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@JBPlatform"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "https://plugins.jetbrains.com/docs/intellij/external-system-integration.html#webpage", "url": "https://plugins.jetbrains.com/docs/intellij/external-system-integration.html", "name": "External System Integration | IntelliJ Platform Plugin SDK", "description": "", "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "https://plugins.jetbrains.com/docs/intellij/#website", "url": "https://plugins.jetbrains.com/docs/intellij/", "name": "IntelliJ Platform Plugin SDK Help" }</script><!-- End Schema.org --></head>    <body data-id="external_system_integration.md" data-main-title="External System Integration" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Part III — Project Model"  data-edit-url="https://github.com/JetBrains/intellij-sdk-docs/edit/main/topics/reference_guide/frameworks_and_external_apis/external_system_integration.md"  >  <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>IntelliJ Platform Plugin SDK  Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select class="select _shortcuts" height="1" id="switch-shortcuts">      </select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="external_system_integration.md" id="external_system_integration.md"  >External System Integration</h1><p id="48304c81_1" >This page provides a high-level overview of the <span class="emphasis" id="48304c81_2" >External System</span> sub-system. There are multiple project management systems (<a href="https://maven.apache.org/" id="48304c81_3"   data-external="true" rel="noopener noreferrer" >Apache Maven</a>, <a href="https://www.gradle.org/" id="48304c81_4"   data-external="true" rel="noopener noreferrer" >Gradle</a>, <a href="https://www.scala-sbt.org/" id="48304c81_5"   data-external="true" rel="noopener noreferrer" >sbt</a>, etc.) and IntelliJ Platform provides a mechanism to support them in IDEs.</p><p id="48304c81_6" >Most of the project management systems provide a similar set of facilities from the integration point of view:</p><ul class="list _ul" id="48304c81_7"    ><li class="list__item" id="48304c81_8" ><p>build a project from external system config (<span class="filepath" id="48304c81_9" >pom.xml</span>, <span class="filepath" id="48304c81_10" >build.gradle.kts</span>, etc.)</p></li><li class="list__item" id="48304c81_11" ><p>provide a list of available tasks</p></li><li class="list__item" id="48304c81_12" ><p>allow to execute a particular task</p></li><li class="list__item" id="48304c81_13" ><p>and more</p></li></ul><p id="48304c81_14" >That means that we can separate external system-specific logic and general IDE processing. The <span class="emphasis" id="48304c81_15" >External System</span> sub-system provides a simple API for wrapping external system elements and extensible IDE-specific processing logic.</p><section class="chapter"  ><h2 id="project-management" data-toc="project-management"  >Project Management</h2><section class="chapter"  ><h3 id="project-data-domain" data-toc="project-data-domain"  >Project Data Domain</h3><p id="48304c81_16" >The external system wrapper is required to be able to build project info on the basis of the given external system config. That information is built with the following base classes:</p><ul class="list _ul" id="48304c81_17"    ><li class="list__item" id="48304c81_18" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/external-system-api/src/com/intellij/openapi/externalSystem/model/DataNode.java" id="48304c81_19"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_20"  >DataNode</code></a></p></li><li class="list__item" id="48304c81_21" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/external-system-api/src/com/intellij/openapi/externalSystem/model/Key.java" id="48304c81_22"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_23"  >Key</code></a></p></li><li class="list__item" id="48304c81_24" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/external-system-api/src/com/intellij/openapi/externalSystem/model/project/ExternalEntityData.java" id="48304c81_25"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_26"  >ExternalEntityData</code></a></p></li></ul><figure  id="48304c81_27"><img alt="DataNode" title="DataNode" src="images/data_node.svg"  class="" width="555" height="219"/></figure><p id="48304c81_28" >The <code class="code " id="48304c81_29"  >DataNode</code> class is just a holder for the target data (a data type is defined by the <code class="code " id="48304c81_30"  >Key</code>). Multiple <code class="code " id="48304c81_31"  >DataNode</code> objects might be organized in directed graph where every edge identifies parent-child relation.</p><p id="48304c81_32" >For example, a simple one-module project might look as below:</p><figure  id="48304c81_33"><img alt="DataNode Example" title="DataNode Example" src="images/data_node_example.svg"  class="" width="546" height="283"/></figure><p id="48304c81_34" >The IDE provides a set of built-in <code class="code " id="48304c81_35"  >Key</code> and <code class="code " id="48304c81_36"  >ExternalEntityData</code> classes but any external system integration or third-party plugin developer might enhance project data by defining custom <code class="code " id="48304c81_37"  >Key</code> and <code class="code " id="48304c81_38"  >ExternalEntityData</code> and store them at a child of appropriate <code class="code " id="48304c81_39"  >DataNode</code>.</p></section><section class="chapter"  ><h3 id="managing-project-data" data-toc="managing-project-data"  >Managing Project Data</h3><p id="48304c81_40" >Processing project data built on an external system config basis can be performed with <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/external-system-api/src/com/intellij/openapi/externalSystem/service/project/manage/ProjectDataService.java" id="48304c81_41"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_42"  >ProjectDataService</code></a>. It is a strategy which knows how to manage particular <code class="code " id="48304c81_43"  >ExternalEntityData</code>. For example, when we want to import a project from an external model, we can start with the top level <code class="code " id="48304c81_44"  >DataNode</code> which references project info and then import its data using corresponding service.</p><p id="48304c81_45" >Custom services can be registered via <a href="https://jb.gg/ipe?extensions=com.intellij.externalProjectDataService" id="48304c81_46"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_47"  >com.intellij.externalProjectDataService</code></a> extension point.</p><p id="48304c81_48" >The good thing is that we can separate project parsing and management here. That means that a set of <code class="code " id="48304c81_49"  >DataNode</code>, <code class="code " id="48304c81_50"  >Key</code> and <code class="code " id="48304c81_51"  >ProjectDataServices</code> can be introduced for particular technology and then every external system integration can build corresponding data if necessary using it.</p></section><section class="chapter"  ><h3 id="importing-from-external-model" data-toc="importing-from-external-model"  >Importing from External Model</h3><p id="48304c81_52" >The IntelliJ Platform provides an API for importing projects from external models:</p><ul class="list _ul" id="48304c81_53"    ><li class="list__item" id="48304c81_54" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/java/idea-ui/src/com/intellij/projectImport/ProjectImportBuilder.java" id="48304c81_55"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_56"  >ProjectImportBuilder</code></a></p></li><li class="list__item" id="48304c81_57" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/java/idea-ui/src/com/intellij/projectImport/ProjectImportProvider.java" id="48304c81_58"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_59"  >ProjectImportProvider</code></a></p></li></ul><p id="48304c81_60" >There are two classes built on the <span class="emphasis" id="48304c81_61" >template method</span> pattern which simplify implementation:</p><ul class="list _ul" id="48304c81_62"    ><li class="list__item" id="48304c81_63" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/java/idea-ui/src/com/intellij/openapi/externalSystem/service/project/wizard/AbstractExternalProjectImportBuilder.java" id="48304c81_64"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_65"  >AbstractExternalProjectImportBuilder</code></a></p></li><li class="list__item" id="48304c81_66" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/java/idea-ui/src/com/intellij/openapi/externalSystem/service/project/wizard/AbstractExternalProjectImportProvider.java" id="48304c81_67"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_68"  >AbstractExternalProjectImportProvider</code></a></p></li></ul><p id="48304c81_69" >Note that <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/java/idea-ui/src/com/intellij/openapi/externalSystem/service/project/wizard/AbstractExternalProjectImportBuilder.java" id="48304c81_70"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_71"  >AbstractExternalProjectImportBuilder</code></a> is built on top of the 'external system settings' controls.</p><p id="48304c81_72" >Concrete implementations should be registered in <a href="https://jb.gg/ipe?extensions=com.intellij.projectImportBuilder" id="48304c81_73"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_74"  >com.intellij.projectImportBuilder</code></a> and <a href="https://jb.gg/ipe?extensions=com.intellij.projectImportProvider" id="48304c81_75"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_76"  >com.intellij.projectImportProvider</code></a> extension points accordingly.</p><p id="48304c81_77" >Example of the project import provider and builder for Gradle:</p><ul class="list _ul" id="48304c81_78"    ><li class="list__item" id="48304c81_79" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/plugins/gradle/java/src/service/project/wizard/JavaGradleProjectImportProvider.kt" id="48304c81_80"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_81"  >JavaGradleProjectImportProvider</code></a></p></li><li class="list__item" id="48304c81_82" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/plugins/gradle/java/src/service/project/wizard/JavaGradleProjectImportBuilder.kt" id="48304c81_83"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_84"  >JavaGradleProjectImportBuilder</code></a></p></li></ul></section></section><section class="chapter"  ><h2 id="auto-import" data-toc="auto-import"  >Auto-Import</h2><p id="48304c81_85" >It's possible to configure external system integration to automatically refresh project structure when external project's config files are modified.</p><aside data-type="tip" class="prompt" data-title="" id="48304c81_86" ><p id="48304c81_87" >From 2020.1, auto-import cannot be disabled by a user.</p></aside><section class="chapter"  ><h3 id="auto-import-for-externalsystemmanager-implementation" data-toc="auto-import-for-externalsystemmanager-implementation"  >Auto-Import for ExternalSystemManager Implementation</h3><p id="48304c81_88" >Describe project's settings files to track by having external system <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/external-system-api/src/com/intellij/openapi/externalSystem/ExternalSystemManager.java" id="48304c81_89"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_90"  >ExternalSystemManager</code></a> implement <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/external-system-api/src/com/intellij/openapi/externalSystem/ExternalSystemAutoImportAware.java" id="48304c81_91"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_92"  >ExternalSystemAutoImportAware</code></a>.</p><aside data-type="tip" class="prompt" data-title="" id="48304c81_93" ><p id="48304c81_94" >The <code class="code " id="48304c81_95"  >ExternalSystemAutoImportAware.getAffectedExternalProjectPath()</code> method is called quite often, that's why it's expected to return control as soon as possible. Helper <code class="code " id="48304c81_96"  >CachingExternalSystemAutoImportAware</code> class might be used for caching, i.e. <code class="code " id="48304c81_97"  >ExternalSystemManager</code> which implements <code class="code " id="48304c81_98"  >ExternalSystemAutoImportAware</code> can have a field like <code class="code " id="48304c81_99"  >new CachingExternalSystemAutoImportAware(new MyExternalSystemAutoImportAware())</code> and delegate <code class="code " id="48304c81_100"  >ExternalSystemAutoImportAware.getAffectedExternalProjectPath()</code> calls to it.</p></aside></section><section class="chapter"  ><h3 id="auto-import-for-standalone-external-systems" data-toc="auto-import-for-standalone-external-systems"  >Auto-Import for Standalone External Systems</h3><p id="48304c81_101" >Some external systems don't have <code class="code " id="48304c81_102"  >ExternalSystemManager</code> (e.g., Maven), but they also can use auto-import core to track changes in settings files. For this, implement <code class="code " id="48304c81_103"  >ExternalSystemProjectAware</code> interface that describes settings files for tracking and an action to reload the project model. Then register the instance with <code class="code " id="48304c81_104"  >ExternalSystemProjectTracker</code> to start tracking.</p><aside data-type="tip" class="prompt" data-title="" id="48304c81_105" ><p id="48304c81_106" >Multiple <code class="code " id="48304c81_107"  >ExternalSystemProjectAware</code> instances can correspond to a single external system. It allows performing project reload differently depending on the set of settings files (project aware per settings file, per module, per external project, etc.).</p></aside></section><section class="chapter"  ><h3 id="icon-for-reload-notification" data-toc="icon-for-reload-notification"  >Icon for Reload Notification</h3><p id="48304c81_108" >From 2020.1, the icon for reload notification can be specified per external system. Implement <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/external-system-api/src/com/intellij/openapi/externalSystem/ui/ExternalSystemIconProvider.kt" id="48304c81_109"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_110"  >ExternalSystemIconProvider</code></a> and register via <a href="https://jb.gg/ipe?extensions=com.intellij.externalIconProvider" id="48304c81_111"   data-external="true" rel="noopener noreferrer" >com.intellij.externalIconProvider</a> extension point in <span class="filepath" id="48304c81_112" ><a href="plugin-configuration-file.html" id="48304c81_113" data-tooltip="Plugin configuration file contains all the information about the plugin, as well as all registered extensions, actions, listeners, etc."  >plugin.xml</a></span>. Alternatively, set <code class="code " id="48304c81_114"  >reloadIcon</code> field external system implements <code class="code " id="48304c81_115"  >ExternalSystemIconProvider</code> directly.</p></section></section><section class="chapter"  ><h2 id="settings" data-toc="settings"  >Settings</h2><p id="48304c81_116" >All external system settings controls are represented by implementations of <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/external-system-impl/src/com/intellij/openapi/externalSystem/util/ExternalSystemSettingsControl.java" id="48304c81_117"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_118"  >ExternalSystemSettingsControl</code></a>. There are general and linked project-level external system settings. A particular external system settings UI contains the following items:</p><ul class="list _ul" id="48304c81_119"    ><li class="list__item" id="48304c81_120" ><p>General system settings</p></li><li class="list__item" id="48304c81_121" ><p>Linked external projects list</p></li><li class="list__item" id="48304c81_122" ><p>Project-level settings for the selected project</p></li></ul><p id="48304c81_123" >It's recommended to extend from <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/external-system-impl/src/com/intellij/openapi/externalSystem/service/settings/AbstractExternalProjectSettingsControl.java" id="48304c81_124"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_125"  >AbstractExternalProjectSettingsControl</code></a> for implementing project-level settings control as it already handles some of them.</p><p id="48304c81_126" ><span class="control" id="48304c81_127" >Examples</span>:</p><ul class="list _ul" id="48304c81_128"    ><li class="list__item" id="48304c81_129" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/plugins/gradle/src/org/jetbrains/plugins/gradle/service/settings/GradleSystemSettingsControl.java" id="48304c81_130"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_131"  >GradleSystemSettingsControl</code></a> handling the <span class="control" id="48304c81_132" >General settings</span> in </p></li><li class="list__item" id="48304c81_134" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/plugins/gradle/src/org/jetbrains/plugins/gradle/service/settings/GradleProjectSettingsControl.java" id="48304c81_135"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_136"  >GradleProjectSettingsControl</code></a> handling the selected Gradle project settings in </p></li></ul><p id="48304c81_138" >A similar approach is used for providing settings in importing external project UI. Implementation is expected to extend <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/java/idea-ui/src/com/intellij/openapi/externalSystem/service/settings/AbstractImportFromExternalSystemControl.java" id="48304c81_139"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_140"  >AbstractImportFromExternalSystemControl</code></a> and instead of linked external projects list it contains target external project path control.</p></section><section class="chapter"  ><h2 id="testing" data-toc="testing"  >Testing</h2><p id="48304c81_141" ><span class="emphasis" id="48304c81_142" >2022.1</span></p><p id="48304c81_143" >Use <code class="code " id="48304c81_144"  >com.jetbrains.intellij.platform:external-system-test-framework</code> from <a href="intellij-artifacts.html" id="48304c81_145" data-tooltip="When using additional repositories, make sure to use HTTPS always."  >IntelliJ Platform Artifacts Repositories</a>.</p><p id="48304c81_146" >Relevant base classes:</p><ul class="list _ul" id="48304c81_147"    ><li class="list__item" id="48304c81_148" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/external-system-api/testFramework/src/com/intellij/platform/externalSystem/testFramework/ExternalSystemImportingTestCase.java" id="48304c81_149"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_150"  >ExternalSystemImportingTestCase</code></a></p></li><li class="list__item" id="48304c81_151" ><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/external-system-api/testFramework/src/com/intellij/platform/externalSystem/testFramework/ExternalSystemTestCase.java" id="48304c81_152"   data-external="true" rel="noopener noreferrer" ><code class="code " id="48304c81_153"  >ExternalSystemTestCase</code></a></p></li></ul></section><div class="last-modified"> Last modified: 28 九月 2022</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="facet.html">Facet</a>   <a class="navigation-links__next" href="psi.html">Program Structure Interface (PSI)</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/storage/help-app/v5/app.js"></script></body></html>