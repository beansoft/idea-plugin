<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8">  <meta name="built-on" content="2022-09-29T19:15:56.8852641"><meta name="build-number" content="${buildNumber}">    <meta name="keywords" content="">  <title>3. Grammar and Parser | IntelliJ Platform Plugin SDK</title><script id="virtual-toc-data" type="application/json">[{"id":"define-a-token-type","level":0,"title":"Define a Token Type","anchor":"#define-a-token-type"},{"id":"define-an-element-type","level":0,"title":"Define an Element Type","anchor":"#define-an-element-type"},{"id":"define-the-grammar","level":0,"title":"Define the Grammar","anchor":"#define-the-grammar"},{"id":"generate-a-parser","level":0,"title":"Generate a Parser","anchor":"#generate-a-parser"},{"id":"add-generated-sources-root","level":0,"title":"Add Generated Sources Root","anchor":"#add-generated-sources-root"}]</script>   <link href="https://resources.jetbrains.com/storage/help-app/v5/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="3. Grammar and Parser | IntelliJ Platform Plugin SDK"/><meta property="og:description" content=""/><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"/><meta property="og:site_name" content="IntelliJ Platform Plugin SDK Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="https://plugins.jetbrains.com/docs/intellij/grammar-and-parser.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@JBPlatform"><meta name="twitter:title" content="3. Grammar and Parser | IntelliJ Platform Plugin SDK"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@JBPlatform"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "https://plugins.jetbrains.com/docs/intellij/grammar-and-parser.html#webpage", "url": "https://plugins.jetbrains.com/docs/intellij/grammar-and-parser.html", "name": "3. Grammar and Parser | IntelliJ Platform Plugin SDK", "description": "", "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "https://plugins.jetbrains.com/docs/intellij/#website", "url": "https://plugins.jetbrains.com/docs/intellij/", "name": "IntelliJ Platform Plugin SDK Help" }</script><!-- End Schema.org --></head>    <body data-id="grammar_and_parser.md" data-main-title="3. Grammar and Parser" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Part VII — Custom Languages///custom_language_support_tutorial.md|Custom Language Support Tutorial"  data-edit-url="https://github.com/JetBrains/intellij-sdk-docs/edit/main/topics/tutorials/custom_language_support/grammar_and_parser.md"  >  <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>IntelliJ Platform Plugin SDK  Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select class="select _shortcuts" height="1" id="switch-shortcuts">      </select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="grammar_and_parser.md" id="grammar_and_parser.md"  >3. Grammar and Parser</h1><p id="35dc1f1_68" >In order for the IntelliJ Platform to parse a Simple Language file, tokens and elements must be defined based on <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/core-api/src/com/intellij/psi/tree/IElementType.java" id="35dc1f1_69"   data-external="true" rel="noopener noreferrer" ><code class="code " id="35dc1f1_70"  >IElementType</code></a>. The Simple Language grammar must also be defined to generate a parser.</p><section class="chapter"  ><h2 id="define-a-token-type" data-toc="define-a-token-type"  >Define a Token Type</h2><p id="35dc1f1_71" >Create <a href="https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleTokenType.java" id="35dc1f1_72"   data-external="true" rel="noopener noreferrer" ><code class="code " id="35dc1f1_73"  >SimpleTokenType</code></a> in the <code class="code " id="35dc1f1_74"  >org.intellij.sdk.language.psi</code> package by subclassing <code class="code " id="35dc1f1_75"  >IElementType</code>.</p><div class="code-block" data-lang="java"       data-disable-link-processing="true"  ></div></section><section class="chapter"  ><h2 id="define-an-element-type" data-toc="define-an-element-type"  >Define an Element Type</h2><p id="35dc1f1_77" >Create the <a href="https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/simple_language_plugin/src/main/java/org/intellij/sdk/language/psi/SimpleElementType.java" id="35dc1f1_78"   data-external="true" rel="noopener noreferrer" ><code class="code " id="35dc1f1_79"  >SimpleElementType</code></a> in the <code class="code " id="35dc1f1_80"  >org.intellij.sdk.language.psi</code> package by subclassing <code class="code " id="35dc1f1_81"  >IElementType</code>.</p><div class="code-block" data-lang="java"       data-disable-link-processing="true"  ></div></section><section class="chapter"  ><h2 id="define-the-grammar" data-toc="define-the-grammar"  >Define the Grammar</h2><p id="35dc1f1_83" >Define a grammar for the Simple Language in the <span class="filepath" id="35dc1f1_84" >org/intellij/sdk/language/Simple.bnf</span> file.</p><div class="code-block" data-lang="rbnf"         >
{
  parserClass=&quot;org.intellij.sdk.language.parser.SimpleParser&quot;

  extends=&quot;com.intellij.extapi.psi.ASTWrapperPsiElement&quot;

  psiClassPrefix=&quot;Simple&quot;
  psiImplClassSuffix=&quot;Impl&quot;
  psiPackage=&quot;org.intellij.sdk.language.psi&quot;
  psiImplPackage=&quot;org.intellij.sdk.language.psi.impl&quot;

  elementTypeHolderClass=&quot;org.intellij.sdk.language.psi.SimpleTypes&quot;
  elementTypeClass=&quot;org.intellij.sdk.language.psi.SimpleElementType&quot;
  tokenTypeClass=&quot;org.intellij.sdk.language.psi.SimpleTokenType&quot;
}

simpleFile ::= item_*

private item_ ::= (property|COMMENT|CRLF)

property ::= (KEY? SEPARATOR VALUE?) | KEY
</div><p id="35dc1f1_86" >Please see <a href="https://github.com/JetBrains/Grammar-Kit" id="35dc1f1_87"   data-external="true" rel="noopener noreferrer" >Grammar-Kit</a> documentation for more details on BNF syntax.</p><p id="35dc1f1_88" >The grammar defines the flexibility of the support for a language. The above grammar specifies that a property may have or may not have a key and value. This flexibility allows the IntelliJ Platform to recognize incorrectly defined properties and provide corresponding code analysis and quick-fixes.</p><p id="35dc1f1_89" >Note that the <code class="code " id="35dc1f1_90"  >SimpleTypes</code> class in the <code class="code " id="35dc1f1_91"  >elementTypeHolderClass</code> attribute above specifies the name of a class that gets generated from the grammar in the scope of the <span class="control" id="35dc1f1_92" >Generate Parser Code</span> action (see <a href="#generate-a-parser" id="35dc1f1_93" data-tooltip="Now that the grammar is defined, generate a parser with PSI classes via Generate Parser Code from the context menu on the Simple.bnf file. This step generates a parser and PSI elements in the /src/main/gen folder of the project."  >Generate a Parser</a>); it doesn't exist at this point.</p></section><section class="chapter"  ><h2 id="generate-a-parser" data-toc="generate-a-parser"  >Generate a Parser</h2><p id="35dc1f1_94" >Now that the grammar is defined, generate a parser with PSI classes via <span class="control" id="35dc1f1_95" >Generate Parser Code</span> from the context menu on the <span class="filepath" id="35dc1f1_96" >Simple.bnf</span> file. This step generates a parser and PSI elements in the <span class="filepath" id="35dc1f1_97" >/src/main/gen</span> folder of the project.</p><aside data-type="tip" class="prompt" data-title="" id="35dc1f1_98" ><p id="35dc1f1_99" ><a href="tools-gradle-grammar-kit-plugin.html" id="35dc1f1_100" data-tooltip="The Gradle Grammar-Kit Plugin automates generating lexers and parsers to support building custom language plugins for IntelliJ-based IDEs when using Grammar-Kit."  >Gradle Grammar-Kit Plugin</a> can be used alternatively.</p></aside><figure  id="35dc1f1_101"><img alt="Parser" title="Parser" src="images/generated_parser.png"  class="" width="800" height="700"/></figure></section><section class="chapter"  ><h2 id="add-generated-sources-root" data-toc="add-generated-sources-root"  >Add Generated Sources Root</h2><p id="35dc1f1_102" >To include the sources generated into <span class="filepath" id="35dc1f1_103" >/src/main/gen</span>, the project's <code class="code " id="35dc1f1_104"  >sourceSets</code> must be expanded by inserting the following line in the project's Gradle build script:</p><div class="tabs" id="35dc1f1_105"><div class="tabs__content" data-gtm="tab" id="35dc1f1_106"   data-title="Kotlin" ><div class="code-block" data-lang="kotlin"    data-title="Kotlin"     >
sourceSets[&quot;main&quot;].java.srcDirs(&quot;src/main/gen&quot;)
</div></div><div class="tabs__content" data-gtm="tab" id="35dc1f1_108"   data-title="Groovy" ><div class="code-block" data-lang="groovy"    data-title="Groovy"     >
sourceSets.main.java.srcDirs 'src/main/gen'
</div></div></div><p id="35dc1f1_110" >Reload the Gradle project for changes to take effect and build the project.</p></section><div class="last-modified"> Last modified: 29 九月 2022</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="language-and-filetype.html">2. Language and File Type</a>   <a class="navigation-links__next" href="lexer-and-parser-definition.html">4. Lexer and Parser Definition</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/storage/help-app/v5/app.js"></script></body></html>