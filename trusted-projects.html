<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8">  <meta name="built-on" content="2022-09-29T19:15:56.8342526"><meta name="build-number" content="${buildNumber}">    <meta name="keywords" content="">  <title>Trusted Project | IntelliJ Platform Plugin SDK</title><script id="virtual-toc-data" type="application/json">[{"id":"is-the-feature-dangerous","level":0,"title":"Is the feature dangerous?","anchor":"#is-the-feature-dangerous"}]</script>   <link href="https://resources.jetbrains.com/storage/help-app/v5/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Trusted Project | IntelliJ Platform Plugin SDK"/><meta property="og:description" content=""/><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"/><meta property="og:site_name" content="IntelliJ Platform Plugin SDK Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="https://plugins.jetbrains.com/docs/intellij/trusted-projects.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@JBPlatform"><meta name="twitter:title" content="Trusted Project | IntelliJ Platform Plugin SDK"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@JBPlatform"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "https://plugins.jetbrains.com/docs/intellij/trusted-projects.html#webpage", "url": "https://plugins.jetbrains.com/docs/intellij/trusted-projects.html", "name": "Trusted Project | IntelliJ Platform Plugin SDK", "description": "", "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "https://plugins.jetbrains.com/docs/intellij/#website", "url": "https://plugins.jetbrains.com/docs/intellij/", "name": "IntelliJ Platform Plugin SDK Help" }</script><!-- End Schema.org --></head>    <body data-id="trusted_projects.md" data-main-title="Trusted Project" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Part III — Project Model///project.md|Project"  data-edit-url="https://github.com/JetBrains/intellij-sdk-docs/edit/main/topics/reference_guide/project_model/trusted_projects.md"  >  <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>IntelliJ Platform Plugin SDK  Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select class="select _shortcuts" height="1" id="switch-shortcuts">      </select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="trusted_projects.md" id="trusted_projects.md"  >Trusted Project</h1><aside data-type="tip" class="prompt" data-title="" id="9ae30bf7_25" ><p id="9ae30bf7_26" >This API is available in platform releases 2021.2.4/2021.3.1 and later.</p><p id="9ae30bf7_27" >Please see related <a href="https://www.jetbrains.com/help/idea/project-security.html" id="9ae30bf7_28"   data-external="true" rel="noopener noreferrer" >Project Security</a> topic from product documentation.</p></aside><p id="9ae30bf7_29" >When a project is opened in the IDE for the first time, the user will be asked whether they trust the project or not. If the user chooses to preview the project in the safe mode, no potentially dangerous feature can be executed automatically or unexpectedly.</p><p id="9ae30bf7_30" >A plugin can check whether the project is trusted via the Kotlin extension method <code class="code " id="9ae30bf7_31"  >Project.isTrusted()</code> or from Java via static method <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/platform-impl/src/com/intellij/ide/impl/TrustedProjects.kt" id="9ae30bf7_32"   data-external="true" rel="noopener noreferrer" ><code class="code " id="9ae30bf7_33"  >TrustedProjects.isTrusted(Project)</code></a>.</p><p id="9ae30bf7_34" >A project opened in the safe mode can become trusted afterward: either the user can click on the <span class="control" id="9ae30bf7_35" >Trust Project</span> link in the notification panel shown on top of the editor, or the state can be changed programmatically, for instance, if the user invokes a dangerous action, and that action proposes to switch to the Trusted mode.</p><p id="9ae30bf7_36" >Therefore, a plugin can subscribe to changes of the trusted state via <a href="plugin-listeners.html#defining-application-level-listeners" id="9ae30bf7_37" data-tooltip="To define an application-level listener, add the <applicationListeners> section to your plugin.xml:"  >application-level listener</a> <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/platform-impl/src/com/intellij/ide/impl/TrustedProjects.kt" id="9ae30bf7_38"   data-external="true" rel="noopener noreferrer" ><code class="code " id="9ae30bf7_39"  >TrustStateListener</code></a> to switch on a feature that was disabled in the safe mode. To do it the plugin should implement <code class="code " id="9ae30bf7_40"  >TrustStateListener.onProjectTrusted()</code>. Or better, use one of <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/platform-impl/src/com/intellij/ide/impl/TrustedProjects.kt" id="9ae30bf7_41"   data-external="true" rel="noopener noreferrer" ><code class="code " id="9ae30bf7_42"  >TrustedProjects.whenProjectTrusted()</code></a> helper methods accepting a lambda, one for Kotlin and another for Java.</p><section class="chapter"  ><h2 id="is-the-feature-dangerous" data-toc="is-the-feature-dangerous"  >Is the feature dangerous?</h2><p id="9ae30bf7_43" >Suppose the feature can potentially execute malicious code, and it is not obvious that this code is going to be executed. In that case, this feature has to be disabled in the safe mode, and enabling it has to be protected via a <a href="misc-swing-components.html#messages" id="9ae30bf7_44" data-tooltip="The Messages class provides a way to show simple message boxes, input dialogs (modal dialogs with a text field), and chooser dialogs (modal dialogs with a combo box). The function of different methods of the class should be clear from their names. When running on macOS, the message…"  >confirmation</a>.</p><p id="9ae30bf7_45" >Samples:</p><ul class="list _ul" id="9ae30bf7_46"    ><li class="list__item" id="9ae30bf7_47" ><p>It is not obvious that opening a folder in the IDE can execute Gradle build script, which in turn can call a malicious code located inside the project =&gt; the Gradle import is disabled in the safe mode.</p></li><li class="list__item" id="9ae30bf7_48" ><p>It is obvious that running or debugging the source code can execute malicious code =&gt; it is not necessary to wrap this action with a confirmation.</p></li></ul></section><div class="last-modified"> Last modified: 29 九月 2022</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="project.html">Project</a>   <a class="navigation-links__next" href="project-wizard.html">Project Wizard - Adding Support for Creating New Project Types</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/storage/help-app/v5/app.js"></script></body></html>