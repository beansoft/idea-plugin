<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8">  <meta name="built-on" content="2022-09-28T11:33:50.7878336"><meta name="build-number" content="${buildNumber}">    <meta name="keywords" content="">  <title>Project Wizard - Adding Support for Creating New Project Types | IntelliJ Platform Plugin SDK</title><script id="virtual-toc-data" type="application/json">[{"id":"project-wizard","level":0,"title":"Project Wizard","anchor":"#project-wizard"},{"id":"implementing-a-new-module-type","level":0,"title":"Implementing a New Module Type","anchor":"#implementing-a-new-module-type"},{"id":"custom-project-wizard","level":0,"title":"Custom Project Wizard","anchor":"#custom-project-wizard"},{"id":"facet","level":0,"title":"Facet","anchor":"#facet"},{"id":"implementing-project-structure-detector","level":0,"title":"Implementing Project Structure Detector","anchor":"#implementing-project-structure-detector"}]</script>   <link href="https://resources.jetbrains.com/storage/help-app/v5/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Project Wizard - Adding Support for Creating New Project Types | IntelliJ Platform Plugin SDK"/><meta property="og:description" content=""/><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"/><meta property="og:site_name" content="IntelliJ Platform Plugin SDK Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="https://plugins.jetbrains.com/docs/intellij/project-wizard.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@JBPlatform"><meta name="twitter:title" content="Project Wizard - Adding Support for Creating New Project Types | IntelliJ Platform Plugin SDK"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@JBPlatform"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "https://plugins.jetbrains.com/docs/intellij/project-wizard.html#webpage", "url": "https://plugins.jetbrains.com/docs/intellij/project-wizard.html", "name": "Project Wizard - Adding Support for Creating New Project Types | IntelliJ Platform Plugin SDK", "description": "", "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "https://plugins.jetbrains.com/docs/intellij/#website", "url": "https://plugins.jetbrains.com/docs/intellij/", "name": "IntelliJ Platform Plugin SDK Help" }</script><!-- End Schema.org --></head>    <body data-id="project_wizard.md" data-main-title="Project Wizard - Adding Support for Creating New Project Types" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Part III — Project Model///project.md|Project"  data-edit-url="https://github.com/JetBrains/intellij-sdk-docs/edit/main/topics/reference_guide/project_wizard.md"  >  <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>IntelliJ Platform Plugin SDK  Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select class="select _shortcuts" height="1" id="switch-shortcuts">      </select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="project_wizard.md" id="project_wizard.md"  >Project Wizard - Adding Support for Creating New Project Types</h1><section class="chapter"  ><h2 id="project-wizard" data-toc="project-wizard"  >Project Wizard</h2><p id="880b278_1" >Working with the project wizard can be illustrated with the <a href="https://github.com/bulenkov/RedlineSmalltalk" id="880b278_2"   data-external="true" rel="noopener noreferrer" >RedLine SmallTalk plugin</a></p></section><section class="chapter"  ><h2 id="implementing-a-new-module-type" data-toc="implementing-a-new-module-type"  >Implementing a New Module Type</h2><p id="880b278_3" >Additional support for specific tools and technologies is usually done via implementing some certain module type which is attached to the project. New module type should be derived from the class <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/lang-core/src/com/intellij/openapi/module/ModuleType.java" id="880b278_4"   data-external="true" rel="noopener noreferrer" ><code class="code " id="880b278_5"  >ModuleType</code></a>.</p></section><section class="chapter"  ><h2 id="custom-project-wizard" data-toc="custom-project-wizard"  >Custom Project Wizard</h2><p id="880b278_6" >Main utilities to configure a custom project wizard can be found in the package <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/lang-api/src/com/intellij/ide/util/projectWizard" id="880b278_7"   data-external="true" rel="noopener noreferrer" ><code class="code " id="880b278_8"  >lang-api.ide.util.projectWizard</code></a>. These classes and interfaces serve the following purposes:</p><ul class="list _ul" id="880b278_9"    ><li class="list__item" id="880b278_10" ><p>Modification of the configuration wizard view</p></li><li class="list__item" id="880b278_11" ><p>Adding new steps to the wizard</p></li><li class="list__item" id="880b278_12" ><p>Providing additional setting for project creation</p></li><li class="list__item" id="880b278_13" ><p>Handling activities during project creation</p></li><li class="list__item" id="880b278_14" ><p>Initial environment configuration</p></li></ul><section class="chapter"  ><h3 id="module-type" data-toc="module-type"  >Module Type</h3><p id="880b278_15" >To create a new module type add an extension</p><div class="code-block" data-lang="markup"         >
&lt;moduleType
    id=&quot;MY_MODULE&quot;
    implementationClass=&quot;st.redline.smalltalk.module.MyModuleType&quot;/&gt;
</div><p id="880b278_17" >to the <a href="https://github.com/bulenkov/RedlineSmalltalk/blob/master/resources/META-INF/plugin.xml" id="880b278_18"   data-external="true" rel="noopener noreferrer" ><code class="code " id="880b278_19"  >plugin.xml</code></a>. A custom module type should extend the <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/lang-core/src/com/intellij/openapi/module/ModuleType.java" id="880b278_20"   data-external="true" rel="noopener noreferrer" ><code class="code " id="880b278_21"  >ModuleType</code></a> generic from <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/lang-core/src/com/intellij/ide/util/projectWizard/ModuleBuilder.java" id="880b278_22"   data-external="true" rel="noopener noreferrer" ><code class="code " id="880b278_23"  >ModuleBuilder</code></a>. The following <a href="https://github.com/bulenkov/RedlineSmalltalk/blob/master/src/st/redline/smalltalk/module/RsModuleType.java" id="880b278_24"   data-external="true" rel="noopener noreferrer" >module type implementation</a> of a custom module type shows how this instance can be registered and implemented.</p></section><section class="chapter"  ><h3 id="implementing-module-builder" data-toc="implementing-module-builder"  >Implementing Module Builder</h3><p id="880b278_25" >To set up a new module environment <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/lang-core/src/com/intellij/ide/util/projectWizard/ModuleBuilder.java" id="880b278_26"   data-external="true" rel="noopener noreferrer" ><code class="code " id="880b278_27"  >ModuleBuilder</code></a> class should be extended and registered as an extension point like the following snippet shows:</p><div class="code-block" data-lang="markup"         >
&lt;extensions defaultExtensionNs=&quot;com.intellij&quot;&gt;
  &lt;moduleBuilder
      builderClass=&quot;org.jetbrains.plugins.ruby.rails.facet.versions.MyModuleBuilder&quot;/&gt;
&lt;/extensions&gt;
</div><p id="880b278_29" >Functionality which is mandatory to implement consists of:</p><ul class="list _ul" id="880b278_30"    ><li class="list__item" id="880b278_31" ><p id="880b278_32" >Setting up a root model for the new module by overriding</p><div class="code-block" data-lang="java"         >
public abstract void setupRootModel(
    ModifiableRootModel modifiableRootModel) throws ConfigurationException;
</div></li><li class="list__item" id="880b278_34" ><p id="880b278_35" >Getting a module type</p><div class="code-block" data-lang="java"         >
public abstract ModuleType getModuleType();
</div></li></ul><p id="880b278_37" >See <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/java/openapi/src/com/intellij/ide/util/projectWizard/JavaModuleBuilder.java" id="880b278_38"   data-external="true" rel="noopener noreferrer" ><code class="code " id="880b278_39"  >JavaModuleBuilder</code></a> to understand better how to implement a module builder.</p><p id="880b278_40" >If your module type is based on the Java module and meant to support Java as well, extending <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/java/openapi/src/com/intellij/ide/util/projectWizard/JavaModuleBuilder.java" id="880b278_41"   data-external="true" rel="noopener noreferrer" ><code class="code " id="880b278_42"  >JavaModuleBuilder</code></a> is enough. No extension point needs to be registered. Refer to <a href="https://github.com/bulenkov/RedlineSmalltalk/blob/master/src/st/redline/smalltalk/module/RsModuleType.java" id="880b278_43"   data-external="true" rel="noopener noreferrer" >SmallTalk module type</a> to see how <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/java/openapi/src/com/intellij/ide/util/projectWizard/JavaModuleBuilder.java" id="880b278_44"   data-external="true" rel="noopener noreferrer" ><code class="code " id="880b278_45"  >JavaModuleBuilder</code></a> can be derived.</p><aside data-type="tip" class="prompt" data-title="" id="880b278_46" ><p id="880b278_47" >Starting with the 2022.1 release, IntelliJ-based IDEs use the refreshed project wizard and some module builder base classes return <code class="code " id="880b278_48"  >false</code> from <code class="code " id="880b278_49"  >isAvailable()</code> when the new wizard is enabled. If your module builder is not visible in 2022.1, make sure that your <code class="code " id="880b278_50"  >ModuleBuilder.isAvailable()</code> returns <code class="code " id="880b278_51"  >true</code>.</p></aside></section><section class="chapter"  ><h3 id="implementing-module-builder-listener" data-toc="implementing-module-builder-listener"  >Implementing Module Builder Listener</h3><p id="880b278_52" >Module builder listener reacts on a new module creation, which could be done either as a part of the project creation process, or as adding a new module to the already existing project. To provide a certain behavior right after a module has been created, module builder should implement <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/lang-core/src/com/intellij/ide/util/projectWizard/ModuleBuilderListener.java" id="880b278_53"   data-external="true" rel="noopener noreferrer" ><code class="code " id="880b278_54"  >ModuleBuilderListener.moduleCreated(Module)</code></a>.</p><p id="880b278_55" >Examples of the tasks executed right after a module has been created may include configuring module roots, looking up for an SDK and setting it up, adding a specific facet if required, etc. For more details, please see the following <a href="https://github.com/bulenkov/RedlineSmalltalk/blob/master/src/st/redline/smalltalk/module/RsModuleType.java" id="880b278_56"   data-external="true" rel="noopener noreferrer" >SmallTalk custom module type</a> implementation.</p></section><section class="chapter"  ><h3 id="adding-new-wizard-steps" data-toc="adding-new-wizard-steps"  >Adding New Wizard Steps</h3><p id="880b278_57" >Adding new steps to the module wizard can be done by overriding <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/lang-core/src/com/intellij/ide/util/projectWizard/AbstractModuleBuilder.java" id="880b278_58"   data-external="true" rel="noopener noreferrer" ><code class="code " id="880b278_59"  >AbstractModuleBuilder.createWizardSteps(WizardContext, ModulesProvider)</code></a>. See an example <a href="https://github.com/bulenkov/RedlineSmalltalk/blob/master/src/st/redline/smalltalk/module/RsModuleBuilder.java" id="880b278_60"   data-external="true" rel="noopener noreferrer" >module builder</a>. If this method returns a non-empty array of <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/lang-core/src/com/intellij/ide/util/projectWizard/ModuleWizardStep.java" id="880b278_61"   data-external="true" rel="noopener noreferrer" ><code class="code " id="880b278_62"  >ModuleWizardStep</code></a> objects, new steps will be shown in their indexing order while creating a new module. The following <a href="https://github.com/bulenkov/RedlineSmalltalk/blob/master/src/st/redline/smalltalk/module/RsModuleWizardStep.java" id="880b278_63"   data-external="true" rel="noopener noreferrer" >implementation</a> for the SmallTalk project type illustrates how a custom wizard step can be created. The <a href="https://github.com/bulenkov/RedlineSmalltalk/blob/master/src/st/redline/smalltalk/module/RsModuleWizardStep.java" id="880b278_64"   data-external="true" rel="noopener noreferrer" ><code class="code " id="880b278_65"  >RsModuleWizardStep</code></a> class is derived from <code class="code " id="880b278_66"  >ModuleWizardStep</code>, which has two methods to be overridden:</p><ul class="list _ul" id="880b278_67"    ><li class="list__item" id="880b278_68" ><div class="code-block" data-lang="java"         >
public JComponent getComponent();
</div><p id="880b278_70" >defines how the step will look like</p></li><li class="list__item" id="880b278_71" ><div class="code-block" data-lang="java"         >
public void updateDataModel();
</div><p id="880b278_73" >commits data from UI into <code class="code " id="880b278_74"  >ModuleBuilder</code> and <code class="code " id="880b278_75"  >WizardContext</code></p></li></ul></section></section><section class="chapter"  ><h2 id="facet" data-toc="facet"  >Facet</h2><p id="880b278_76" >Facets in IntelliJ are the way to store multiple kinds of module-specific settings, for instance to make a language support or framework available in some given module. To understand facets better from the end-user's point of view, see the <a href="facet.html" id="880b278_77" data-tooltip="A facet represents configuration specific for a particular framework/technology, associated with a module. A module can have multiple facets. E.g. Spring Framework specific configuration is stored in a Spring facet."  >Facet</a> documentation section.</p></section><section class="chapter"  ><h2 id="implementing-project-structure-detector" data-toc="implementing-project-structure-detector"  >Implementing Project Structure Detector</h2><p id="880b278_78" >To support the creation of your module when a project is imported from existing sources, extend <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/java/idea-ui/src/com/intellij/ide/util/projectWizard/importSources/ProjectStructureDetector.java" id="880b278_79"   data-external="true" rel="noopener noreferrer" ><code class="code " id="880b278_80"  >ProjectStructureDetector</code></a>. To detect the files your module supports, implement <code class="code " id="880b278_81"  >ProjectStructureDetector.detectRoots()</code>.</p><p id="880b278_82" >Refer to the <a href="https://github.com/bulenkov/RedlineSmalltalk/blob/master/src/st/redline/smalltalk/module/RsProjectStructureDetector.java" id="880b278_83"   data-external="true" rel="noopener noreferrer" >Smalltalk project structure detector</a> to see example implementation.</p><p id="880b278_84" >But detecting the files is not enough, you also need to create a module for the project if appropriate by implementing <code class="code " id="880b278_85"  >setupProjectStructure()</code>. Here is an example that creates a module if no other modules exist in the project structure.</p><div class="code-block" data-lang="java"         >
@Override
public void setupProjectStructure(Collection&lt;DetectedProjectRoot&gt; roots,
                                  ProjectDescriptor projectDescriptor,
                                  ProjectFromSourcesBuilder builder) {
  List&lt;ModuleDescriptor&gt; modules = projectDescriptor.getModules();
  if (modules.isEmpty()) {
    modules = new ArrayList&lt;&gt;();
    for (DetectedProjectRoot root : roots) {
      modules.add(new ModuleDescriptor(root.getDirectory(),
          MyModuleType.getInstance(), ContainerUtil.emptyList()));
    }
    projectDescriptor.setModules(modules);
  }
}
</div></section><div class="last-modified"> Last modified: 28 九月 2022</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="trusted-projects.html">Trusted Project</a>   <a class="navigation-links__next" href="intro-project-wizard.html">Project Wizard Tutorial</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/storage/help-app/v5/app.js"></script></body></html>