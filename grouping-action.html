<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8">  <meta name="built-on" content="2022-09-28T11:33:51.0905756"><meta name="build-number" content="${buildNumber}">    <meta name="keywords" content="">  <title>Grouping Actions | IntelliJ Platform Plugin SDK</title><script id="virtual-toc-data" type="application/json">[{"id":"simple-action-groups","level":0,"title":"Simple Action Groups","anchor":"#simple-action-groups"},{"id":"implementing-custom-action-group-classes","level":0,"title":"Implementing Custom Action Group Classes","anchor":"#implementing-custom-action-group-classes"},{"id":"action-groups-with-dynamic-actions-sets","level":0,"title":"Action Groups with Dynamic Actions Sets","anchor":"#action-groups-with-dynamic-actions-sets"}]</script>   <link href="https://resources.jetbrains.com/storage/help-app/v5/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Grouping Actions | IntelliJ Platform Plugin SDK"/><meta property="og:description" content=""/><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"/><meta property="og:site_name" content="IntelliJ Platform Plugin SDK Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="https://plugins.jetbrains.com/docs/intellij/grouping-action.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@JBPlatform"><meta name="twitter:title" content="Grouping Actions | IntelliJ Platform Plugin SDK"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@JBPlatform"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "https://plugins.jetbrains.com/docs/intellij/grouping-action.html#webpage", "url": "https://plugins.jetbrains.com/docs/intellij/grouping-action.html", "name": "Grouping Actions | IntelliJ Platform Plugin SDK", "description": "", "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "https://plugins.jetbrains.com/docs/intellij/#website", "url": "https://plugins.jetbrains.com/docs/intellij/", "name": "IntelliJ Platform Plugin SDK Help" }</script><!-- End Schema.org --></head>    <body data-id="grouping_action.md" data-main-title="Grouping Actions" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Part II — Base Platform///basic_action_system.md|操作///action_system.md|Actions Tutorial"  data-edit-url="https://github.com/JetBrains/intellij-sdk-docs/edit/main/topics/tutorials/action_system/grouping_action.md"  >  <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>IntelliJ Platform Plugin SDK  Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select class="select _shortcuts" height="1" id="switch-shortcuts">      </select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="grouping_action.md" id="grouping_action.md"  >Grouping Actions</h1><p id="f47c00fc_1" >If an implementation requires several actions, or there are simply too many actions that overload the menu, the actions can be placed into groups. This tutorial demonstrates adding an action to an existing group, creating a new action group, and action groups with a variable number of actions. The sample code discussed in this tutorial is from the code sample <a href="https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/action_basics" id="f47c00fc_2"   data-external="true" rel="noopener noreferrer" ><code class="code " id="f47c00fc_3"  >action_basics</code></a>.</p><p id="f47c00fc_4" >Some content in this tutorial assumes the reader is familiar with the tutorial for <a href="working-with-custom-actions.html" id="f47c00fc_5" data-tooltip="Plugins can add actions to existing IDE menus and toolbars, as well as add new menus and toolbars. The IntelliJ Platform calls the actions of plugins in response to user interactions with the IDE. However, the actions of a plugin must first be defined and registered with the…"  >Creating Actions</a>.</p><section class="chapter"  ><h2 id="simple-action-groups" data-toc="simple-action-groups"  >Simple Action Groups</h2><p id="f47c00fc_6" >In this first example, the action group will be available as a top-level menu item, and actions are represented as drop-down menu items. The group is based on a default IntelliJ Platform implementation.</p><section class="chapter"  ><h3 id="creating-simple-groups" data-toc="creating-simple-groups"  >Creating Simple Groups</h3><p id="f47c00fc_7" >Grouping can be registered by adding a <a href="plugin-configuration-file.html#idea-plugin__actions__group" id="f47c00fc_8" data-tooltip="Defines an action group. The <action>, <group> and <separator> elements defined inside the group are automatically included in it. The <group> elements can be nested."  ><code class="code " id="f47c00fc_9"  >&lt;group&gt;</code></a> element to the <a href="plugin-configuration-file.html#idea-plugin__actions" id="f47c00fc_10" data-tooltip="Defines the plugin actions."  ><code class="code " id="f47c00fc_11"  >&lt;actions&gt;</code></a> section of a plugin's <span class="filepath" id="f47c00fc_12" ><a href="plugin-configuration-file.html" id="f47c00fc_13" data-tooltip="Plugin configuration file contains all the information about the plugin, as well as all registered extensions, actions, listeners, etc."  >plugin.xml</a></span> file. This example has no <code class="code " id="f47c00fc_14"  >class</code> attribute in the <code class="code " id="f47c00fc_15"  >&lt;group&gt;</code> element because the IntelliJ Platform framework will supply a default implementation class for the group. This default implementation is used if a set of actions belonging to the group is static, i.e., does not change at runtime, which is the majority of cases. The <code class="code " id="f47c00fc_16"  >id</code> attribute must be unique, so incorporating the plugin ID or package name is the best practice.</p><p id="f47c00fc_17" >The <code class="code " id="f47c00fc_18"  >popup</code> attribute determines whether actions in the group are placed in a submenu. The <code class="code " id="f47c00fc_19"  >icon</code> attribute specifies the FQN of an <a href="work-with-icons-and-images.html" id="f47c00fc_20" data-tooltip="Icons and images are used widely by IntelliJ Platform plugins. Plugins need icons mostly for actions, custom components renderers, tool windows, and so on."  ><code class="code " id="f47c00fc_21"  >Icon</code></a> object to be displayed. No <code class="code " id="f47c00fc_22"  >compact</code> attribute is specified, which means this group will support submenus. See <a href="basic-action-system.html#registering-actions-in-pluginxml" id="f47c00fc_23" data-tooltip="Registering actions in plugin.xml is demonstrated in the following reference examples, which document all elements and attributes used in the <actions> section and describe each element's meaning."  >Registering Actions in plugin.xml</a> for more information about these attributes.</p><div class="code-block" data-lang="markup"         >
&lt;group
    id=&quot;org.intellij.sdk.action.GroupedActions&quot;
    text=&quot;Static Grouped Actions&quot;
    popup=&quot;true&quot;
    icon=&quot;SdkIcons.Sdk_default_icon&quot;/&gt;
</div></section><section class="chapter"  ><h3 id="binding-action-groups-to-ui-components" data-toc="binding-action-groups-to-ui-components"  >Binding Action Groups to UI Components</h3><p id="f47c00fc_25" >The following sample shows how to use an <a href="plugin-configuration-file.html#idea-plugin__actions__action__add-to-group" id="f47c00fc_26" data-tooltip="Specifies that the action should be added to an existing group. A single action can be added to multiple groups."  ><code class="code " id="f47c00fc_27"  >&lt;add-to-group&gt;</code></a> element to place a custom action group relative to an entry in the  menu. The attribute <code class="code " id="f47c00fc_29"  >relative-to-action</code> references the action <code class="code " id="f47c00fc_30"  >id</code> for <code class="code " id="f47c00fc_31"  >PopupDialogAction</code>, not a native IntelliJ menu entry. Rather <code class="code " id="f47c00fc_32"  >PopupDialogAction</code> is defined in the same <a href="https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/action_basics/src/main/resources/META-INF/plugin.xml" id="f47c00fc_33"   data-external="true" rel="noopener noreferrer" ><code class="code " id="f47c00fc_34"  >plugin.xml</code></a> file. This group is placed after the single entry for the action <code class="code " id="f47c00fc_35"  >PopupDialogAction</code>, as defined in the tutorial <a href="working-with-custom-actions.html#registering-an-action-with-the-new-action-form" id="f47c00fc_36" data-tooltip="IntelliJ IDEA has an embedded inspection that spots unregistered actions. Verify the inspection is enabled at Settings/Preferences | Editor | Inspections | Plugin DevKit | Code | Component/Action not registered. Here is an example for this stage of the PopupDialogAction class:"  >Creating Actions</a>.</p><div class="code-block" data-lang="markup"         >
&lt;group
    id=&quot;org.intellij.sdk.action.GroupedActions&quot;
    text=&quot;Static Grouped Actions&quot;
    popup=&quot;true&quot;
    icon=&quot;SdkIcons.Sdk_default_icon&quot;&gt;
  &lt;add-to-group
      group-id=&quot;ToolsMenu&quot;
      anchor=&quot;after&quot;
      relative-to-action=&quot;org.intellij.sdk.action.PopupDialogAction&quot;/&gt;
&lt;/group&gt;
</div></section><section class="chapter"  ><h3 id="adding-a-new-action-to-the-static-grouped-actions" data-toc="adding-a-new-action-to-the-static-grouped-actions"  >Adding a New Action to the Static Grouped Actions</h3><p id="f47c00fc_38" >The <code class="code " id="f47c00fc_39"  >PopupDialogAction</code> implementation will be reused and registered in the newly created static group. The <code class="code " id="f47c00fc_40"  >id</code> attribute for the reused <code class="code " id="f47c00fc_41"  >PopupDialogAction</code> implementation is set to a unique value, <code class="code " id="f47c00fc_42"  >org.intellij.sdk.action.GroupPopDialogAction</code>. This value differentiates this new <a href="plugin-configuration-file.html#idea-plugin__actions__action" id="f47c00fc_43" data-tooltip="A single action entry of the <actions> implemented by the plugin. A single <actions> element can contain multiple <action> elements."  ><code class="code " id="f47c00fc_44"  >&lt;action&gt;</code></a> entry from the <code class="code " id="f47c00fc_45"  >id</code> previously used to register this action implementation in the <a href="working-with-custom-actions.html#registering-an-action-with-the-new-action-form" id="f47c00fc_46" data-tooltip="IntelliJ IDEA has an embedded inspection that spots unregistered actions. Verify the inspection is enabled at Settings/Preferences | Editor | Inspections | Plugin DevKit | Code | Component/Action not registered. Here is an example for this stage of the PopupDialogAction class:"  >Creating Actions</a> tutorial. A unique <code class="code " id="f47c00fc_47"  >id</code> supports reuse of action classes in more than one menu or group. The action in this group will be displayed in the menu as &quot;A Group Action&quot;.</p><div class="code-block" data-lang="markup"         >
&lt;group
    id=&quot;org.intellij.sdk.action.GroupedActions&quot;
    text=&quot;Static Grouped Actions&quot;
    popup=&quot;true&quot;
    icon=&quot;SdkIcons.Sdk_default_icon&quot;&gt;
  &lt;add-to-group
      group-id=&quot;ToolsMenu&quot;
      anchor=&quot;after&quot;
      relative-to-action=&quot;org.intellij.sdk.action.PopupDialogAction&quot;/&gt;
  &lt;action
      class=&quot;org.intellij.sdk.action.PopupDialogAction&quot;
      id=&quot;org.intellij.sdk.action.GroupPopDialogAction&quot;
      text=&quot;A Group Action&quot;
      description=&quot;SDK static grouped action example&quot;
      icon=&quot;SdkIcons.Sdk_default_icon&quot;&gt;
  &lt;/action&gt;
&lt;/group&gt;
</div><p id="f47c00fc_49" >After performing the steps described above, the action group and its content will be available in the  menu. The underlying <code class="code " id="f47c00fc_51"  >PopupDialogAction</code> implementation is reused for two entries in the  menu:</p><ul class="list _ul" id="f47c00fc_53"    ><li class="list__item" id="f47c00fc_54" ><p>Once for the top menu entry </p><p> with the action <code class="code " id="f47c00fc_56"  >id</code> equal to <code class="code " id="f47c00fc_57"  >org.intellij.sdk.action.PopupDialogAction</code> as set in the <a href="working-with-custom-actions.html#registering-an-action-with-the-new-action-form" id="f47c00fc_58" data-tooltip="IntelliJ IDEA has an embedded inspection that spots unregistered actions. Verify the inspection is enabled at Settings/Preferences | Editor | Inspections | Plugin DevKit | Code | Component/Action not registered. Here is an example for this stage of the PopupDialogAction class:"  >Creating Actions</a> tutorial.</p></li><li class="list__item" id="f47c00fc_59" ><p>A second time for the menu entry </p><p> with the action <code class="code " id="f47c00fc_61"  >id</code> equal to <code class="code " id="f47c00fc_62"  >org.intellij.sdk.action.GroupPopDialogAction</code>.</p></li></ul><figure  id="f47c00fc_63"><img alt="Simple Action Group" title="Simple Action Group" src="images/grouped_action.png"  class="" width="550" height="171"/></figure></section></section><section class="chapter"  ><h2 id="implementing-custom-action-group-classes" data-toc="implementing-custom-action-group-classes"  >Implementing Custom Action Group Classes</h2><p id="f47c00fc_64" >In some cases, the specific behavior of an action group needs to depend on the context. The solution is analogous to making a <a href="working-with-custom-actions.html#extending-the-update-method" id="f47c00fc_65" data-tooltip="Adding code to PopupDialogAction.update() gives finer control of the action's visibility and availability. The action's state and(or) presentation can be dynamically changed depending on the context."  >single action entry dependent on context</a>.</p><p id="f47c00fc_66" >The steps below show how to make a group of actions available and visible if certain conditions are met. In this case, the condition is having an instance of available editor. This condition is needed because the custom action group is added to an IntelliJ menu that is only enabled for editing.</p><section class="chapter"  ><h3 id="extending-defaultactiongroup" data-toc="extending-defaultactiongroup"  >Extending DefaultActionGroup</h3><p id="f47c00fc_67" >The <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/platform-api/src/com/intellij/openapi/actionSystem/DefaultActionGroup.java" id="f47c00fc_68"   data-external="true" rel="noopener noreferrer" ><code class="code " id="f47c00fc_69"  >DefaultActionGroup</code></a> is an implementation of <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/ActionGroup.java" id="f47c00fc_70"   data-external="true" rel="noopener noreferrer" ><code class="code " id="f47c00fc_71"  >ActionGroup</code></a>. The <code class="code " id="f47c00fc_72"  >DefaultActionGroup</code> class is used to add child actions and separators between them to a group. This class is used if a set of actions belonging to the group does not change at runtime.</p><p id="f47c00fc_73" >As an example, extend <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/platform-api/src/com/intellij/openapi/actionSystem/DefaultActionGroup.java" id="f47c00fc_74"   data-external="true" rel="noopener noreferrer" ><code class="code " id="f47c00fc_75"  >DefaultActionGroup</code></a> to create the <code class="code " id="f47c00fc_76"  >CustomDefaultActionGroup</code> class in the <code class="code " id="f47c00fc_77"  >action_basics</code> code sample:</p><div class="code-block" data-lang="java"         >
public class CustomDefaultActionGroup extends DefaultActionGroup {
  @Override
  public void update(AnActionEvent event) {
    // Enable/disable depending on whether a user is editing...
  }
}
</div></section><section class="chapter"  ><h3 id="registering-the-custom-action-group" data-toc="registering-the-custom-action-group"  >Registering the Custom Action Group</h3><p id="f47c00fc_79" >As in the case with the static action group, the action <a href="plugin-configuration-file.html#idea-plugin__actions__group" id="f47c00fc_80" data-tooltip="Defines an action group. The <action>, <group> and <separator> elements defined inside the group are automatically included in it. The <group> elements can be nested."  ><code class="code " id="f47c00fc_81"  >&lt;group&gt;</code></a> should be declared in the <a href="plugin-configuration-file.html#idea-plugin__actions" id="f47c00fc_82" data-tooltip="Defines the plugin actions."  ><code class="code " id="f47c00fc_83"  >&lt;actions&gt;</code></a> section of the <span class="filepath" id="f47c00fc_84" >plugin.xml</span> file, for example, the <a href="https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/action_basics/src/main/resources/META-INF/plugin.xml" id="f47c00fc_85"   data-external="true" rel="noopener noreferrer" >action_basics</a> plugin. For demonstration purposes, this implementation will use localization.</p><p id="f47c00fc_86" >The <code class="code " id="f47c00fc_87"  >&lt;group&gt;</code> element declaration below shows:</p><ul class="list _ul" id="f47c00fc_88"    ><li class="list__item" id="f47c00fc_89" ><p>An optional resource bundle declaration outside the <code class="code " id="f47c00fc_90"  >&lt;actions&gt;</code> section for localizing actions.</p></li><li class="list__item" id="f47c00fc_91" ><p>The presence of the <code class="code " id="f47c00fc_92"  >class</code> attribute in the <code class="code " id="f47c00fc_93"  >&lt;group&gt;</code> element tells the IntelliJ Platform framework to use <code class="code " id="f47c00fc_94"  >CustomDefaultActionGroup</code> rather than the default implementation.</p></li><li class="list__item" id="f47c00fc_95" ><p>Setting the group's <code class="code " id="f47c00fc_96"  >popup</code> attribute to allow submenus.</p></li><li class="list__item" id="f47c00fc_97" ><p>The <code class="code " id="f47c00fc_98"  >text</code> and <code class="code " id="f47c00fc_99"  >description</code> attributes are omitted in the <code class="code " id="f47c00fc_100"  >&lt;group&gt;</code> declaration in favor of using the localization resource bundle to define them.</p></li><li class="list__item" id="f47c00fc_101" ><p>There is no <code class="code " id="f47c00fc_102"  >icon</code> attribute for the group; the <code class="code " id="f47c00fc_103"  >CustomDefaultActionGroup</code> implementation will <a href="#providing-specific-behavior-for-the-custom-group" id="f47c00fc_104" data-tooltip="Override the CustomDefaultActionGroup.update() method to make the group visible only if there's an instance of the editor available. Also, a custom icon is added to demonstrate that group icons can be changed depending on the action context:"  >add an icon for the group</a>.</p></li><li class="list__item" id="f47c00fc_105" ><p>The <a href="plugin-configuration-file.html#idea-plugin__actions__action__add-to-group" id="f47c00fc_106" data-tooltip="Specifies that the action should be added to an existing group. A single action can be added to multiple groups."  ><code class="code " id="f47c00fc_107"  >&lt;add-to-group&gt;</code></a> element specifies adding the group in the first position of the existing <code class="code " id="f47c00fc_108"  >EditorPopupMenu</code>.</p></li></ul><div class="code-block" data-lang="markup"         >
&lt;resource-bundle&gt;messages.BasicActionsBundle&lt;/resource-bundle&gt;

&lt;actions&gt;
  &lt;group
      id=&quot;org.intellij.sdk.action.CustomDefaultActionGroup&quot;
      class=&quot;org.intellij.sdk.action.CustomDefaultActionGroup&quot;
      popup=&quot;true&quot;&gt;
    &lt;add-to-group group-id=&quot;EditorPopupMenu&quot; anchor=&quot;first&quot;/&gt;
  &lt;/group&gt;
&lt;/actions&gt;
</div></section><section class="chapter"  ><h3 id="adding-actions-to-the-custom-group" data-toc="adding-actions-to-the-custom-group"  >Adding Actions to the Custom Group</h3><p id="f47c00fc_110" >As in <a href="#adding-a-new-action-to-the-static-grouped-actions" id="f47c00fc_111" data-tooltip="The PopupDialogAction implementation will be reused and registered in the newly created static group. The id attribute for the reused PopupDialogAction implementation is set to a unique value, org.intellij.sdk.action.GroupPopDialogAction. This value differentiates this new <action>…"  >Static Grouped Actions</a>, the <code class="code " id="f47c00fc_112"  >PopupDialogAction</code> action is added as an <a href="plugin-configuration-file.html#idea-plugin__actions__action" id="f47c00fc_113" data-tooltip="A single action entry of the <actions> implemented by the plugin. A single <actions> element can contain multiple <action> elements."  ><code class="code " id="f47c00fc_114"  >&lt;action&gt;</code></a> element in the <a href="plugin-configuration-file.html#idea-plugin__actions__group" id="f47c00fc_115" data-tooltip="Defines an action group. The <action>, <group> and <separator> elements defined inside the group are automatically included in it. The <group> elements can be nested."  ><code class="code " id="f47c00fc_116"  >&lt;group&gt;</code></a> element. In the <code class="code " id="f47c00fc_117"  >&lt;action&gt;</code> element declaration below:</p><ul class="list _ul" id="f47c00fc_118"    ><li class="list__item" id="f47c00fc_119" ><p>The <code class="code " id="f47c00fc_120"  >class</code> attribute in the <code class="code " id="f47c00fc_121"  >&lt;action&gt;</code> element has the same FQN to reuse this action implementation.</p></li><li class="list__item" id="f47c00fc_122" ><p>The <code class="code " id="f47c00fc_123"  >id</code> attribute is unique to distinguish it from other uses of the implementation in the Action System.</p></li><li class="list__item" id="f47c00fc_124" ><p>The <code class="code " id="f47c00fc_125"  >text</code> and <code class="code " id="f47c00fc_126"  >description</code> attributes are omitted in the <code class="code " id="f47c00fc_127"  >&lt;action&gt;</code> declaration; they are instead defined using the localization resource bundle.</p></li><li class="list__item" id="f47c00fc_128" ><p>The SDK icon is declared for use with this action.</p></li></ul><div class="code-block" data-lang="markup"         >
&lt;group
    id=&quot;org.intellij.sdk.action.CustomDefaultActionGroup&quot;
    class=&quot;org.intellij.sdk.action.CustomDefaultActionGroup&quot;
    popup=&quot;true&quot;
    icon=&quot;SdkIcons.Sdk_default_icon&quot;&gt;
  &lt;add-to-group group-id=&quot;EditorPopupMenu&quot; anchor=&quot;first&quot;/&gt;
  &lt;action
      id=&quot;org.intellij.sdk.action.CustomGroupedAction&quot;
      class=&quot;org.intellij.sdk.action.PopupDialogAction&quot;
      icon=&quot;SdkIcons.Sdk_default_icon&quot;/&gt;
&lt;/group&gt;
</div><p id="f47c00fc_130" >Now the translations for the <code class="code " id="f47c00fc_131"  >text</code> and <code class="code " id="f47c00fc_132"  >description</code> attributes must be provided in the resource bundle <a href="https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/action_basics/src/main/resources/messages/BasicActionsBundle.properties" id="f47c00fc_133"   data-external="true" rel="noopener noreferrer" ><code class="code " id="f47c00fc_134"  >BasicActionsBundle.properties</code></a> file according to <a href="basic-action-system.html#localizing-actions-and-groups" id="f47c00fc_135" data-tooltip="Action and group localization use resource bundles containing property files named $NAME$Bundle.properties, each file consisting of key=value pairs. The action_basics plugin demonstrates using a resource bundle to localize the group and action entries added to the Editor Popup Menu."  >Localizing Actions and Groups</a>. Note there are two sets of <code class="code " id="f47c00fc_136"  >text</code> and <code class="code " id="f47c00fc_137"  >description</code> translations, one for the action and one for the group. Conceivably, there could be another set of translations for the action if it used the <a href="plugin-configuration-file.html#idea-plugin__actions__action__override-text" id="f47c00fc_138" data-tooltip="Defines an alternate version of the text for the menu action or group."  ><code class="code " id="f47c00fc_139"  >&lt;override-text&gt;</code></a> attribute.</p><div class="code-block" data-lang="none"         >
action.org.intellij.sdk.action.CustomGroupedAction.text=A Popup Action[en]
action.org.intellij.sdk.action.CustomGroupedAction.description=SDK popup grouped action example[en]
group.org.intellij.sdk.action.CustomDefaultActionGroup.text=Popup Grouped Actions[en]
group.org.intellij.sdk.action.CustomDefaultActionGroup.description=Custom defaultActionGroup demo[en]
</div></section><section class="chapter"  ><h3 id="providing-specific-behavior-for-the-custom-group" data-toc="providing-specific-behavior-for-the-custom-group"  >Providing Specific Behavior for the Custom Group</h3><p id="f47c00fc_141" >Override the <code class="code " id="f47c00fc_142"  >CustomDefaultActionGroup.update()</code> method to make the group visible only if there's an instance of the editor available. Also, a custom icon is added to demonstrate that group icons can be changed depending on the action context:</p><div class="code-block" data-lang="java"         >
public class CustomDefaultActionGroup extends DefaultActionGroup {
  @Override
  public void update(AnActionEvent event) {
    // Enable/disable depending on whether a user is editing
    Editor editor = event.getData(CommonDataKeys.EDITOR);
    event.getPresentation().setEnabled(editor != null);
    // Take this opportunity to set an icon for the group.
    event.getPresentation().setIcon(SdkIcons.Sdk_default_icon);
  }
}
</div><p id="f47c00fc_144" >After compiling and running the code sample above and opening a file in the editor and right-clicking, the Editor context menu will pop up containing a new group of actions in the first position. Note that the group and actions come from the resource file as all contain the suffix &quot;[en]&quot;. The new group will also have an icon:</p><figure  id="f47c00fc_145"><img alt="Custom Action Group" title="Custom Action Group" src="images/editor_popup_menu.png"  class="" width="600" height="230"/></figure></section></section><section class="chapter"  ><h2 id="action-groups-with-dynamic-actions-sets" data-toc="action-groups-with-dynamic-actions-sets"  >Action Groups with Dynamic Actions Sets</h2><p id="f47c00fc_146" >If a set of actions belonging to a custom group varies depending on the context, the group must extend <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/ActionGroup.java" id="f47c00fc_147"   data-external="true" rel="noopener noreferrer" ><code class="code " id="f47c00fc_148"  >ActionGroup</code></a>. The set of actions in the <code class="code " id="f47c00fc_149"  >ActionGroup</code> is dynamically defined.</p><section class="chapter"  ><h3 id="creating-variable-action-group" data-toc="creating-variable-action-group"  >Creating Variable Action Group</h3><p id="f47c00fc_150" >To create a group of actions with a variable number of actions, extend <code class="code " id="f47c00fc_151"  >ActionGroup</code>. For example, as in the <code class="code " id="f47c00fc_152"  >action_basics</code> class <a href="https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/action_basics/src/main/java/org/intellij/sdk/action/DynamicActionGroup.java" id="f47c00fc_153"   data-external="true" rel="noopener noreferrer" ><code class="code " id="f47c00fc_154"  >DynamicActionGroup</code></a> code:</p><div class="code-block" data-lang="java"         >
public class DynamicActionGroup extends ActionGroup {
}
</div></section><section class="chapter"  ><h3 id="registering-a-variable-action-group" data-toc="registering-a-variable-action-group"  >Registering a Variable Action Group</h3><p id="f47c00fc_156" >To register the dynamic menu group, a <a href="plugin-configuration-file.html#idea-plugin__actions__group" id="f47c00fc_157" data-tooltip="Defines an action group. The <action>, <group> and <separator> elements defined inside the group are automatically included in it. The <group> elements can be nested."  ><code class="code " id="f47c00fc_158"  >&lt;group&gt;</code></a> attribute needs to be placed in the <a href="plugin-configuration-file.html#idea-plugin__actions" id="f47c00fc_159" data-tooltip="Defines the plugin actions."  ><code class="code " id="f47c00fc_160"  >&lt;actions&gt;</code></a> section of <a href="https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/action_basics/src/main/resources/META-INF/plugin.xml" id="f47c00fc_161"   data-external="true" rel="noopener noreferrer" ><code class="code " id="f47c00fc_162"  >plugin</code> .xml</a>. When enabled, this group appears just below the <a href="#binding-action-groups-to-ui-components" id="f47c00fc_163" data-tooltip="The following sample shows how to use an <add-to-group> element to place a custom action group relative to an entry in the Tools menu. The attribute relative-to-action references the action id for PopupDialogAction, not a native IntelliJ menu entry. Rather PopupDialogAction is…"  >Static Grouped Actions</a> in the  menu:</p><div class="code-block" data-lang="markup"         >
&lt;group
    id=&quot;org.intellij.sdk.action.DynamicActionGroup&quot;
    class=&quot;org.intellij.sdk.action.DynamicActionGroup&quot;
    popup=&quot;true&quot;
    text=&quot;Dynamically Grouped Actions&quot;
    description=&quot;SDK dynamically grouped action example&quot;
    icon=&quot;SdkIcons.Sdk_default_icon&quot;&gt;
  &lt;add-to-group
      group-id=&quot;ToolsMenu&quot;
      anchor=&quot;after&quot;
      relative-to-action=&quot;org.intellij.sdk.action.GroupedActions&quot;/&gt;
&lt;/group&gt;
</div><aside data-type="tip" class="prompt" data-title="" id="f47c00fc_166" ><p id="f47c00fc_167" >If a<code class="code " id="f47c00fc_168"  >&lt;group&gt;</code> element's <code class="code " id="f47c00fc_169"  >class</code> attribute names a class derived from <code class="code " id="f47c00fc_170"  >ActionGroup</code>, then any static <code class="code " id="f47c00fc_171"  >&lt;action&gt;</code> declarations in that group throw an exception. For a statically defined group, use <code class="code " id="f47c00fc_172"  >DefaultActionGroup</code>.</p></aside></section><section class="chapter"  ><h3 id="adding-child-actions-to-the-dynamic-group" data-toc="adding-child-actions-to-the-dynamic-group"  >Adding Child Actions to the Dynamic Group</h3><p id="f47c00fc_173" >To add actions to the <code class="code " id="f47c00fc_174"  >DynamicActionGroup</code>, a non-empty array of <code class="code " id="f47c00fc_175"  >AnAction</code> instances should be returned from the <code class="code " id="f47c00fc_176"  >DynamicActionGroup.getChildren()</code> method. Here again, reuse the <code class="code " id="f47c00fc_177"  >PopupDialogAction</code> implementation. This use case is why <code class="code " id="f47c00fc_178"  >PopupDialogAction</code> overrides a constructor:</p><div class="code-block" data-lang="java"         >
public class DynamicActionGroup extends ActionGroup {
  @NotNull
  @Override
  public AnAction[] getChildren(AnActionEvent event) {
    return new AnAction[]{
        new PopupDialogAction(
            &quot;Action Added at Runtime&quot;,
            &quot;Dynamic Action Demo&quot;,
            SdkIcons.Sdk_default_icon)
    };
  }
}
</div><p id="f47c00fc_180" >After providing the implementation of <code class="code " id="f47c00fc_181"  >DynamicActionGroup</code> and making it return a non-empty array of actions, the third position in the  menu will contain a new group of actions:</p><figure  id="f47c00fc_183"><img alt="Dynamic Action Group" title="Dynamic Action Group" src="images/dynamic_action_group.png"  class="" width="600" height="198"/></figure></section></section><div class="last-modified"> Last modified: 28 九月 2022</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="working-with-custom-actions.html">Creating Actions</a>   <a class="navigation-links__next" href="persistence.html">Persistence Model</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/storage/help-app/v5/app.js"></script></body></html>