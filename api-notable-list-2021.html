<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8">  <meta name="built-on" content="2022-09-29T19:15:57.3202257"><meta name="build-number" content="${buildNumber}">    <meta name="keywords" content="">  <title>Notable Changes in IntelliJ Platform and Plugins API 2021.* | IntelliJ Platform Plugin SDK</title><script id="virtual-toc-data" type="application/json">[{"id":"20213","level":0,"title":"2021.3","anchor":"#20213"},{"id":"20212","level":0,"title":"2021.2","anchor":"#20212"},{"id":"20211","level":0,"title":"2021.1","anchor":"#20211"}]</script>   <link href="https://resources.jetbrains.com/storage/help-app/v5/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Notable Changes in IntelliJ Platform and Plugins API 2021.* | IntelliJ Platform Plugin SDK"/><meta property="og:description" content=""/><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"/><meta property="og:site_name" content="IntelliJ Platform Plugin SDK Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="https://plugins.jetbrains.com/docs/intellij/api-notable-list-2021.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@JBPlatform"><meta name="twitter:title" content="Notable Changes in IntelliJ Platform and Plugins API 2021.* | IntelliJ Platform Plugin SDK"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@JBPlatform"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "https://plugins.jetbrains.com/docs/intellij/api-notable-list-2021.html#webpage", "url": "https://plugins.jetbrains.com/docs/intellij/api-notable-list-2021.html", "name": "Notable Changes in IntelliJ Platform and Plugins API 2021.* | IntelliJ Platform Plugin SDK", "description": "", "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "https://plugins.jetbrains.com/docs/intellij/#website", "url": "https://plugins.jetbrains.com/docs/intellij/", "name": "IntelliJ Platform Plugin SDK Help" }</script><!-- End Schema.org --></head>    <body data-id="api_notable_list_2021.md" data-main-title="Notable Changes in IntelliJ Platform and Plugins API 2021.*" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Appendix II — API and Compatibility///api_notable.md|Notable API Changes"  data-edit-url="https://github.com/JetBrains/intellij-sdk-docs/edit/main/topics/appendix/api_notable/api_notable_list_2021.md"  >  <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>IntelliJ Platform Plugin SDK  Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select class="select _shortcuts" height="1" id="switch-shortcuts">      </select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="api_notable_list_2021.md" id="api_notable_list_2021.md"  >Notable Changes in IntelliJ Platform and Plugins API 2021.*</h1><p id="7422463_71" ><span class="emphasis" id="7422463_72" >Early Access Program</span> (EAP) releases of upcoming versions are available <a href="https://eap.jetbrains.com" id="7422463_73"   data-external="true" rel="noopener noreferrer" >here</a>.</p><section class="chapter"  ><h2 id="20213" data-toc="20213"  >2021.3</h2><section class="chapter"  ><h3 id="intellij-platform-20213" data-toc="intellij-platform-20213"  >IntelliJ Platform 2021.3</h3><dl id="7422463_74"  data-style="title-top"  ><dt id="7422463_75"  data-expandable="false" >External code formatter tools API</dt><dd><p>Allows integration of standalone tools like <code class="code " id="7422463_77"  >shfmt</code>: <a href="code-formatting.html#external-code-formatter" id="7422463_78" data-tooltip="2021.3"  >External Code Formatter</a>.</p></dd><dt id="7422463_79"  data-expandable="false" >Simplified API for CustomComponentAction</dt><dd><p>Use new method <code class="code " id="7422463_82"  >updateCustomComponent(Component, Presentation)</code> to synchronize given Presentation and component state.</p></dd><dt id="7422463_83"  data-expandable="false" >Highlighting API exposes priority range</dt><dd><p>Use <code class="code " id="7422463_85"  >getPriorityRange()</code> in <code class="code " id="7422463_86"  >AnnotationSession</code>/<code class="code " id="7422463_87"  >LocalInspectionToolSession</code> to optimize highlighting for coarse-grained files (e.g., <code class="code " id="7422463_88"  >PsiPlainTextFile</code> files with single node).</p></dd></dl></section></section><section class="chapter"  ><h2 id="20212" data-toc="20212"  >2021.2</h2><section class="chapter"  ><h3 id="intellij-platform-20212" data-toc="intellij-platform-20212"  >IntelliJ Platform 2021.2</h3><dl id="7422463_89"  data-style="title-top"  ><dt id="7422463_90"  data-expandable="false" >Unit test mode: non-production IconManager</dt><dd><p>Now <code class="code " id="7422463_93"  >com.intellij.ui.IconManager.createDeferredIcon()</code> doesn't use <code class="code " id="7422463_94"  >iconProducer</code> which might result in &quot;wrong&quot; composite icons and failed assertions. Override <code class="code " id="7422463_95"  >UsefulTestCase.isIconRequired()</code> returning <code class="code " id="7422463_96"  >true</code> to restore production icons. Alternatively, invoke <code class="code " id="7422463_97"  >Registry.get(&quot;psi.deferIconLoading&quot;).setValue(false)</code> in <code class="code " id="7422463_98"  >setUp()</code> and <code class="code " id="7422463_99"  >Registry.get(&quot;psi.deferIconLoading&quot;).resetToDefault()</code> in <code class="code " id="7422463_100"  >tearDown()</code>.</p></dd><dt id="7422463_101"  data-expandable="false" >Constructor Injection disabled for Extensions</dt><dd><p>Please obtain necessary components only when needed (logged as ERROR now).</p></dd><dt id="7422463_103"  data-expandable="false" >Language Injection</dt><dd><p>Use <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/core-api/src/com/intellij/lang/injection/general/LanguageInjectionContributor.java" id="7422463_105"   data-external="true" rel="noopener noreferrer" ><code class="code " id="7422463_106"  >LanguageInjectionContributor</code></a> (<code class="code " id="7422463_107"  >com.intellij.languageInjectionContributor</code> EP) and <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/core-api/src/com/intellij/lang/injection/general/LanguageInjectionPerformer.java" id="7422463_108"   data-external="true" rel="noopener noreferrer" ><code class="code " id="7422463_109"  >LanguageInjectionPerformer</code></a> (<code class="code " id="7422463_110"  >com.intellij.languageInjectionPerformer</code> EP) to customize language injection.</p></dd></dl></section><section class="chapter"  ><h3 id="intellij-idea-20212" data-toc="intellij-idea-20212"  >IntelliJ IDEA 2021.2</h3><dl id="7422463_111"  data-style="title-top"  ><dt id="7422463_112"  data-expandable="false" >Unbundled plugins</dt><dd><p>Several plugins (Arquillian, AspectJ, CoffeeScript, Debugger Support for JSP (JSR45), Drools, Guice, Helidon, Java EE: Enterprise Java Beans (EJB), Spring OSGi, Spring Web Flow) have been unbundled. The IDE will suggest installation if the project contains related framework dependency. If your plugin depends on them, users will need to install them from the <a href="https://plugins.jetbrains.com" id="7422463_114"   data-external="true" rel="noopener noreferrer" >JetBrains Marketplace</a>.</p></dd></dl></section></section><section class="chapter"  ><h2 id="20211" data-toc="20211"  >2021.1</h2><section class="chapter"  ><h3 id="intellij-platform-20211" data-toc="intellij-platform-20211"  >IntelliJ Platform 2021.1</h3><dl id="7422463_115"  data-style="title-top"  ><dt id="7422463_116"  data-expandable="false" >Add unambiguous imports on the fly for custom languages</dt><dd><p>Override <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/analysis-impl/src/com/intellij/codeInsight/daemon/ReferenceImporter.java" id="7422463_119"   data-external="true" rel="noopener noreferrer" ><code class="code " id="7422463_120"  >ReferenceImporter#isAddUnambiguousImportsOnTheFlyEnabled()</code></a> and provide corresponding user setting. Implement <code class="code " id="7422463_121"  >HintAction</code> with <code class="code " id="7422463_122"  >fixSilently()</code> and hook it up to highlighting as a quick fix for unresolved reference.</p></dd><dt id="7422463_123"  data-expandable="false" >Ability to override encoding per VirtualFile</dt><dd><p>Implement <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/core-api/src/com/intellij/openapi/vfs/encoding/FileEncodingProvider.java" id="7422463_126"   data-external="true" rel="noopener noreferrer" ><code class="code " id="7422463_127"  >FileEncodingProvider</code></a> and register in <code class="code " id="7422463_128"  >com.intellij.fileEncodingProvider</code> extension point.</p></dd><dt id="7422463_129"  data-expandable="false" >JCEF: wrapper for CefBrowser</dt><dd><p><a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/platform-api/src/com/intellij/ui/jcef/JBCefOsrHandlerBrowser.java" id="7422463_133"   data-external="true" rel="noopener noreferrer" ><code class="code " id="7422463_134"  >JBCefOsrHandlerBrowser</code></a> forwards to custom <code class="code " id="7422463_135"  >CefRenderHandler</code>, e.g., for off-screen rendering.</p></dd></dl></section><section class="chapter"  ><h3 id="java-plugin-20211" data-toc="java-plugin-20211"  >Java Plugin 2021.1</h3><dl id="7422463_136"  data-style="title-top"  ><dt id="7422463_137"  data-expandable="false" >Testframework: JUnit4 variant for LightJavaCodeInsightFixtureTestCase</dt><dd><p>Use <code class="code " id="7422463_140"  >com.intellij.testFramework.fixtures.LightJavaCodeInsightFixtureTestCase4</code>.</p></dd></dl></section></section><div class="last-modified"> Last modified: 29 九月 2022</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="api-notable-list-2022.html">Notable Changes in IntelliJ Platform and Plugins API 2022.*</a>   <a class="navigation-links__next" href="api-notable-list-2020.html">Notable Changes in IntelliJ Platform and Plugins API 2020.*</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/storage/help-app/v5/app.js"></script></body></html>