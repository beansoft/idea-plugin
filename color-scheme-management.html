<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8">  <meta name="built-on" content="2022-09-29T19:15:56.7292291"><meta name="build-number" content="${buildNumber}">    <meta name="keywords" content="">  <title>Color Scheme Management | IntelliJ Platform Plugin SDK</title><script id="virtual-toc-data" type="application/json">[{"id":"preface","level":0,"title":"Preface","anchor":"#preface"},{"id":"plug-in-developers","level":0,"title":"Plug-in Developers","anchor":"#plug-in-developers"},{"id":"scheme-designers","level":0,"title":"Scheme Designers","anchor":"#scheme-designers"}]</script>   <link href="https://resources.jetbrains.com/storage/help-app/v5/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Color Scheme Management | IntelliJ Platform Plugin SDK"/><meta property="og:description" content=""/><meta property="og:image" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"/><meta property="og:site_name" content="IntelliJ Platform Plugin SDK Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="https://plugins.jetbrains.com/docs/intellij/color-scheme-management.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@JBPlatform"><meta name="twitter:title" content="Color Scheme Management | IntelliJ Platform Plugin SDK"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@JBPlatform"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "https://plugins.jetbrains.com/docs/intellij/color-scheme-management.html#webpage", "url": "https://plugins.jetbrains.com/docs/intellij/color-scheme-management.html", "name": "Color Scheme Management | IntelliJ Platform Plugin SDK", "description": "", "image": "https://resources.jetbrains.com/storage/products/jetbrains/img/meta/preview.png", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "https://plugins.jetbrains.com/docs/intellij/#website", "url": "https://plugins.jetbrains.com/docs/intellij/", "name": "IntelliJ Platform Plugin SDK Help" }</script><!-- End Schema.org --></head>    <body data-id="color_scheme_management.md" data-main-title="Color Scheme Management" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Part II — Base Platform///user_interface_components.md|User Interface Components"  data-edit-url="https://github.com/JetBrains/intellij-sdk-docs/edit/main/topics/reference_guide/color_scheme_management.md"  >  <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>IntelliJ Platform Plugin SDK  Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select class="select _shortcuts" height="1" id="switch-shortcuts">      </select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="color_scheme_management.md" id="color_scheme_management.md"  >Color Scheme Management</h1><section class="chapter"  ><h2 id="preface" data-toc="preface"  >Preface</h2><p id="1452e8c0_56" >Color scheme management in IntelliJ IDEA 12.1 was changed to ease scheme designers' work and make schemes look equally well for different programming languages even if not designed specifically for these languages. Previously language plug-ins were using fixed default colors incompatible, for example, with dark schemes.</p><p id="1452e8c0_57" >The new implementation allows specifying a dependency on a set of standard text attributes linked to a scheme but not to any specific language. Language-specific attributes still can be set by a scheme designer if needed, but it's optional. New color schemes have got a new <span class="filepath" id="1452e8c0_58" >.icls</span> (Idea CoLor Scheme) extension to avoid confusion about compatibility problems with older platform versions: if only standard attributes are set, they will not be used by the version before 12.1, resulting in different highlighting colors.</p></section><section class="chapter"  ><h2 id="plug-in-developers" data-toc="plug-in-developers"  >Plug-in Developers</h2><section class="chapter"  ><h3 id="text-attribute-key-dependency" data-toc="text-attribute-key-dependency"  >Text Attribute Key Dependency</h3><p id="1452e8c0_59" >The easiest and the best way to specify highlighting text attributes is to specify a dependency on one of standard keys defined in <a href="https://github.com/JetBrains/intellij-community/tree/idea/222.3739.54/platform/editor-ui-api/src/com/intellij/openapi/editor/DefaultLanguageHighlighterColors.java" id="1452e8c0_60"   data-external="true" rel="noopener noreferrer" ><code class="code " id="1452e8c0_61"  >DefaultLanguageHighlighterColors</code></a>:</p><div class="code-block" data-lang="java"         >
static final TextAttributesKey MY_KEYWORD =
  TextAttributesKey.createTextAttributesKey(&quot;MY_KEYWORD&quot;, DefaultLanguageHighlighterColors.KEYWORD);
</div><p id="1452e8c0_63" >The color scheme manager will search first for text attributes specified by the <code class="code " id="1452e8c0_64"  >MY_KEYWORD</code> key. If those are not defined explicitly or if all the attributes are empty (undefined), it will search them using the <code class="code " id="1452e8c0_65"  >DEFAULT_KEYWORD</code> key. If neither is defined, it will further fall back to a default scheme.</p><p id="1452e8c0_66" >Text attribute keys can be chained, for example you can define another key as:</p><div class="code-block" data-lang="java"         >
static final TextAttributesKey MY_PREDEFINED_SYMBOL =
  TextAttributesKey.createTextAttributesKey(&quot;MY_PREDEFINED_SYMBOL&quot;, MY_KEYWORD);
</div><p id="1452e8c0_68" >The rule is the same: if text attributes can not be found by the <code class="code " id="1452e8c0_69"  >MY_PREDEFINED_SYMBOL</code> key or are empty, the color scheme manager will search for <code class="code " id="1452e8c0_70"  >MY_KEYWORD</code> and if not found (empty) will further look for <code class="code " id="1452e8c0_71"  >DEFAULT_KEYWORD</code>.</p><aside data-type="tip" class="prompt" data-title="" id="1452e8c0_72" ><p id="1452e8c0_73" >A use of fixed default attributes is <span class="emphasis" id="1452e8c0_74" >strongly discouraged</span>.</p></aside><p id="1452e8c0_75" >If you are unsure which base key to use, it's better to pick the most generic one, for example, <code class="code " id="1452e8c0_76"  >DefaultLanguageHighlighterColors.IDENTIFIER</code>. Remember that using fixed default attributes <span class="emphasis" id="1452e8c0_77" >will force</span> a scheme designer to explicitly set up a color for this element. Otherwise, its default colors may visually conflict with a color scheme. If the scheme designer doesn't have a language plug-in, he will not be able to fix this at all.</p></section><section class="chapter"  ><h3 id="providing-attributes-for-specific-schemes" data-toc="providing-attributes-for-specific-schemes"  >Providing Attributes for Specific Schemes</h3><p id="1452e8c0_78" >A language plug-in may provide default text attributes for &quot;Default&quot; and &quot;Darcula&quot; bundled schemes or basically for any other scheme if the scheme's name is known. This can be done in <span class="filepath" id="1452e8c0_79" ><a href="plugin-configuration-file.html" id="1452e8c0_80" data-tooltip="Plugin configuration file contains all the information about the plugin, as well as all registered extensions, actions, listeners, etc."  >plugin.xml</a></span> by adding an <code class="code " id="1452e8c0_81"  >com.intellij.additionalTextAttributes</code> extension providing the name of the file containing desired text attributes, for example:</p><div class="code-block" data-lang="markup"         >
&lt;extensions defaultExtensionNs=&quot;com.intellij&quot;&gt;
  ...
  &lt;additionalTextAttributes
      scheme=&quot;Default&quot;
      file=&quot;colorSchemes/MyLangDefault.xml&quot;/&gt;
  ...
&lt;/extensions&gt;
</div><p id="1452e8c0_83" >It tells the IDE that the file <span class="filepath" id="1452e8c0_84" >MyLangDefault.xml</span> must be searched in resources under <span class="filepath" id="1452e8c0_85" >colorSchemes</span>. Note that the path should <span class="emphasis" id="1452e8c0_86" >not</span> start with a backslash and its fully qualified name (in our case <span class="filepath" id="1452e8c0_87" >colorSchemes/MyLangDefault.xml</span>) <span class="emphasis" id="1452e8c0_88" >MUST BE UNIQUE</span> to avoid naming collisions between different providers. Thus adding a language prefix, for example, &quot;MyLang&quot;, is highly recommended.</p><p id="1452e8c0_89" >The file itself is an extract from a color scheme with required attributes, for example:</p><div class="code-block" data-lang="markup"         >
&lt;?xml version='1.0'?&gt;
&lt;list&gt;
  &lt;option name=&quot;MY_VAR&quot;&gt;
    &lt;value&gt;
      &lt;option name=&quot;FOREGROUND&quot; value=&quot;660000&quot;/&gt;
    &lt;/value&gt;
  &lt;/option&gt;
  &lt;option name=&quot;MY_SPECIAL_CHAR&quot;&gt;
    &lt;value&gt;
      &lt;option name=&quot;FOREGROUND&quot; value=&quot;008000&quot;/&gt;
      &lt;option name=&quot;BACKGROUND&quot; value=&quot;e3fcff&quot;/&gt;
      &lt;option name=&quot;FONT_TYPE&quot; value=&quot;1&quot;/&gt;
    &lt;/value&gt;
  &lt;/option&gt;
&lt;/list&gt;
</div><p id="1452e8c0_91" ><span class="emphasis" id="1452e8c0_92" >Note:</span> When the scheme is copied via &quot;Save as...&quot; all its attributes, including the ones defined in the extension, will be copied to the new scheme. A scheme designer may need to check that these copied attributes do not conflict with his/her color scheme, although in this case, the plug-in is installed, and it should not cause any problems. Anyway, try to stick with a simple key dependency if possible (note that it works well for &quot;Darcula&quot;) and provide explicit attributes only if necessary.</p></section></section><section class="chapter"  ><h2 id="scheme-designers" data-toc="scheme-designers"  >Scheme Designers</h2><section class="chapter"  ><h3 id="a-typical-workflow-for-a-new-scheme-creation" data-toc="a-typical-workflow-for-a-new-scheme-creation"  >A Typical Workflow for a New Scheme Creation</h3><ul class="list _ul" id="1452e8c0_93"    ><li class="list__item" id="1452e8c0_94" ><p id="1452e8c0_95" >Choose a scheme which will be used as a base, for example, &quot;Default&quot;</p></li><li class="list__item" id="1452e8c0_96" ><p id="1452e8c0_97" >Click &quot;Save As...&quot; and give a name for the new scheme</p></li><li class="list__item" id="1452e8c0_98" ><p id="1452e8c0_99" >First set attributes in the <span class="emphasis" id="1452e8c0_100" >General</span> section and proceed with <span class="emphasis" id="1452e8c0_101" >Language Defaults</span></p></li><li class="list__item" id="1452e8c0_102" ><p id="1452e8c0_103" >Check all the languages and adjust language-specific text attributes if necessary. In most cases, this may not be needed, but two cases may require an extra action:</p><ul class="list _ul" id="1452e8c0_104"    ><li class="list__item" id="1452e8c0_105" ><p>There is an obsolete plug-in which does not use the new color scheme management API and therefore does not utilize the attributes set in &quot;Language Defaults&quot;. Ideally, a report must be created for the language plug-in so that its author will fix it eventually.</p></li><li class="list__item" id="1452e8c0_106" ><p>A plug-in intentionally sets some default colors and, if the scheme was created from a default one, the colors are copied to the newly created scheme. This can be fixed either by resetting all the attributes to restore the inheritance from Language Defaults (see below) or by setting other colors suitable for the scheme. The first way is preferable since it will require less effort to change the color scheme later.</p></li></ul></li></ul></section><section class="chapter"  ><h3 id="text-attributes-inheritance" data-toc="text-attributes-inheritance"  >Text Attributes Inheritance</h3><p id="1452e8c0_107" >For many language text attributes that do not have any values, there will be a line indicating that the attributes are inherited from a specific section/attributes, such as &quot;Keyword (Language Defaults)&quot;. If an element has <span class="emphasis" id="1452e8c0_108" >any</span> attributes set, only these attributes are used. All attributes from the base element are ignored. To <span class="emphasis" id="1452e8c0_109" >restore</span> the inheritance, unchecks all the boxes, and click <span class="emphasis" id="1452e8c0_110" >Apply</span>.</p></section></section><div class="last-modified"> Last modified: 29 九月 2022</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="work-with-icons-and-images.html">Working with Icons and Images</a>   <a class="navigation-links__next" href="jcef.html">JCEF - Java Chromium Embedded Framework</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/storage/help-app/v5/app.js"></script></body></html>